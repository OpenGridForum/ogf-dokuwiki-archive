<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 
<!-- Mirrored from www.ogf.org/pipermail/occi-wg/2015-August/003667.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 07 Oct 2022 23:42:07 GMT -->
<HEAD>
   <TITLE> [occi-wg] Typed Link Kind
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:occi-wg%40ogf.org?Subject=Re%3A%20%5Bocci-wg%5D%20Typed%20Link%20Kind&In-Reply-To=%3CCABm3g7rKaagf41Ofs3UHHo-CoUjFykpMWNYwRPErrQUJU9HihQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003666.html">
   <LINK REL="Next"  HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003668.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[occi-wg] Typed Link Kind</H1>
    <B>Boris Parak</B> 
    <A HREF="mailto:occi-wg%40ogf.org?Subject=Re%3A%20%5Bocci-wg%5D%20Typed%20Link%20Kind&In-Reply-To=%3CCABm3g7rKaagf41Ofs3UHHo-CoUjFykpMWNYwRPErrQUJU9HihQ%40mail.gmail.com%3E"
       TITLE="[occi-wg] Typed Link Kind">xparak at mail.muni.cz
       </A><BR>
    <I>Mon Aug  3 07:24:46 EDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003666.html">[occi-wg] Typed Link Kind
</A></li>
        <LI>Next message: <A HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003668.html">[occi-wg] Typed Link Kind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/date.html#3667">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/thread.html#3667">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/subject.html#3667">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/author.html#3667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jean,

that's a very good point. Thanks! I will explore erocci a little bit :-)

However, there is one problem we did not discuss yet (AFAIK). I've
seen the unfinished DRMAA&lt;-&gt;OCCI document and Peter is using complex
instance attributes, such as:

&lt; X-OCCI-Attribute: occi.drmaa2.drmsName=&quot;Platform LSF&quot;
&lt; X-OCCI-Attribute: occi.drmaa2.drmsVersion={&quot;major&quot;:&quot;42&quot;, &quot;minor&quot;:&quot;0&quot;}
&lt; X-OCCI-Attribute: occi.drmaa2.drmaaName=&quot;Thijs&#8217;s OCCI-DRMAA backend&quot;
&lt; X-OCCI-Attribute: occi.drmaa2.drmaaVersion={&quot;major&quot;:&quot;2&quot;, &quot;minor&quot;:&quot;17&quot;}

or

&gt;<i> X-OCCI-Attribute: occi.drmaa2.remoteCommand=&quot;/bin/date&quot;
</I>&gt;<i> X-OCCI-Attribute: occi.drmaa2.machineOS=&quot;LINUX&quot;
</I>&gt;<i> X-OCCI-Attribute: occi.drmaa2.email=[&quot;<A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">peter at troeger.eu</A>&quot;,&quot;<A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">tmetsch at platform.com</A>&quot;]
</I>&gt;<i> X-OCCI-Attribute: occi.drmaa2.emailOnTerminated=true
</I>
As far as I know, this is not something we explored in the main OCCI
specification and we need to address it for OCCI 1.2. The Core
document is talking about possible attribute types Object, Array, Hash
... but the rendering documents (Text or JSON) do not specify how to
render/parse these without ambiguity. Especially in JSON, as you
pointed out, complex instance attribute values cannot be parsed
without the accompanying attribute definitions ... and even with that,
there is still some ambiguity there due to the unknown structure of
the particular instance attribute value.

Let's say we have two instance attributes with Hash values:

occi.test.case.attr1 = { &quot;subattr1&quot;: { &quot;value1&quot;: &quot;something_here&quot; } }

occi.test.case.attr1.subattr1 = { &quot;value1&quot; : &quot;something_different_here&quot; }

Once rendered into JSON, these two are indistinguishable despite the
fact that they are technically two different attributes with two
different values. This is a major problem, especially with the
intended degree of extensibility of OCCI.

Therefore I propose to modify the JSON rendering specification and use
the attribute name as an identifier without any internal structure,
i.e. no splitting on '.'.

Am I completely wrong here? Does anyone else think this is a problem?

Thanks!

Cheers, Boris

On Mon, Aug 3, 2015 at 12:46 PM, Jean Parpaillon
&lt;<A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at free.fr</A>&gt; wrote:
&gt;<i> Hi Boris,
</I>&gt;<i>
</I>&gt;<i> Le vendredi 31 juillet 2015 &#224; 23:08 +0200, Boris Parak a &#233;crit :
</I>&gt;&gt;<i> On Fri, Jul 31, 2015 at 5:01 PM, Jean Parpaillon
</I>&gt;&gt;<i> &lt;<A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at free.fr</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Hi Boris,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Le vendredi 31 juillet 2015 &#224; 11:48 +0200, Boris Parak a &#233;crit :
</I>&gt;&gt;<i> &gt; &gt; Hi Jean,
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; On Fri, Jul 31, 2015 at 10:49 AM, Jean Parpaillon
</I>&gt;&gt;<i> &gt; &gt; &lt;<A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at free.fr</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt; Hi all,
</I>&gt;&gt;<i> &gt; &gt; &gt; With Olivier Barais, in CC, with which I am working on the
</I>&gt;&gt;<i> &gt; &gt; &gt; OCCIware
</I>&gt;&gt;<i> &gt; &gt; &gt; project, we would like to enhance the core specification with a
</I>&gt;&gt;<i> &gt; &gt; &gt; way
</I>&gt;&gt;<i> &gt; &gt; &gt; to
</I>&gt;&gt;<i> &gt; &gt; &gt; constrain the Category of resources pointed out by
</I>&gt;&gt;<i> &gt; &gt; &gt; occi.core.src
</I>&gt;&gt;<i> &gt; &gt; &gt; and
</I>&gt;&gt;<i> &gt; &gt; &gt; occi.core.target attributes of a link.
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; For instance, in the infrastructure extension, while it is
</I>&gt;&gt;<i> &gt; &gt; &gt; specified
</I>&gt;&gt;<i> &gt; &gt; &gt; (and easily make sense) a NetworkInterface link must be linked
</I>&gt;&gt;<i> &gt; &gt; &gt; to a
</I>&gt;&gt;<i> &gt; &gt; &gt; compute and a network instance, there is no formal way to
</I>&gt;&gt;<i> &gt; &gt; &gt; define
</I>&gt;&gt;<i> &gt; &gt; &gt; this
</I>&gt;&gt;<i> &gt; &gt; &gt; constraint.
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; A proposal would be to add new type of Category, sub-type of
</I>&gt;&gt;<i> &gt; &gt; &gt; Kind,
</I>&gt;&gt;<i> &gt; &gt; &gt; with
</I>&gt;&gt;<i> &gt; &gt; &gt; following attributes:
</I>&gt;&gt;<i> &gt; &gt; &gt; - parent: instantiated as <A HREF="http://schemas.ogf.org/occi/core#link">http://schemas.ogf.org/occi/core#link</A>
</I>&gt;&gt;<i> &gt; &gt; &gt; - occi.core.src.type: additional attribute, type category id
</I>&gt;&gt;<i> &gt; &gt; &gt; - occi.core.target.type: additional attribute, type category id
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; The name of this type of Category could be &quot;TypedLinkKind&quot;.
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; What do you think of this ?
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; at first glance, it looks like a reasonable request ... it would
</I>&gt;&gt;<i> &gt; &gt; definitely improve automated validation and modeling in OCCI.
</I>&gt;&gt;<i> &gt; &gt; Especially with previously unknown extensions.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; 'occi.core.target' will be a bit problematic, because it can
</I>&gt;&gt;<i> &gt; &gt; point
</I>&gt;&gt;<i> &gt; &gt; &quot;outside&quot; the local domain. But we could easily cover that by
</I>&gt;&gt;<i> &gt; &gt; making
</I>&gt;&gt;<i> &gt; &gt; these attributes optional.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; So, I would consider dropping the TypedLinkKind and include these
</I>&gt;&gt;<i> &gt; &gt; two
</I>&gt;&gt;<i> &gt; &gt; attributes in the existing Link kind, as optional. That way we
</I>&gt;&gt;<i> &gt; &gt; get a
</I>&gt;&gt;<i> &gt; &gt; typed link, partially typed link and &quot;legacy&quot; link all-in-one.
</I>&gt;&gt;<i> &gt; &gt; While
</I>&gt;&gt;<i> &gt; &gt; keeping it all backwards compatible. If the type attribute is
</I>&gt;&gt;<i> &gt; &gt; present,
</I>&gt;&gt;<i> &gt; &gt; you can use it, if not ... well ... you are out of luck :-)
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; As a side note, I would very much like to avoid introducing
</I>&gt;&gt;<i> &gt; &gt; attribute
</I>&gt;&gt;<i> &gt; &gt; names with matching prefixes:
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; occi.core.target = &quot;value&quot;
</I>&gt;&gt;<i> &gt; &gt; occi.core.target.type = &quot;value&quot;
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; This makes JSON rendering really difficult. Would you be OK with
</I>&gt;&gt;<i> &gt; &gt; &quot;target_type&quot; &amp; &quot;source_type&quot;?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I would prefer the former one, but I can accept the second one.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I know ... 'target.type' makes more sense and is much prettier to
</I>&gt;&gt;<i> look at.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; BTW, here is the algortihm I use for inserting any dot-separated
</I>&gt;&gt;<i> &gt; attribute name into the JSON tree of attributes, would you be
</I>&gt;&gt;<i> &gt; interested in implementing it into rocci:
</I>&gt;&gt;<i> &gt; <A HREF="https://github.com/erocci/erocci/blob/master/apps/erocci_core/src/r">https://github.com/erocci/erocci/blob/master/apps/erocci_core/src/r</A>
</I>&gt;&gt;<i> &gt; ende
</I>&gt;&gt;<i> &gt; ring/occi_renderer_json.erl#L194
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have to admit that my basic understanding of functional languages
</I>&gt;&gt;<i> is
</I>&gt;&gt;<i> a problem here :-)
</I>&gt;<i>
</I>&gt;<i> The occi_rendering_json.code file contains a &quot;pseudo-code&quot; version of
</I>&gt;<i> the algorithm, without pattern matching, which is maybe what's
</I>&gt;<i> confusion there.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How do you deal with complex attribute values? Let's say we have an
</I>&gt;&gt;<i> attribute
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> occi.test.target = { ... Hash Here ... } // hash has &quot;type&quot; =&gt;
</I>&gt;&gt;<i> &quot;StringHere&quot; inside it
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and an attribute
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> occi.test.target.type = &quot;StringHere&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How would you distinguish between the value for key 'type' in the
</I>&gt;&gt;<i> attribute value (Hash) of 'occi.test.target' and the attribute value
</I>&gt;&gt;<i> of 'occi.test.target.type'? How would these be rendered in JSON
</I>&gt;&gt;<i> together?
</I>&gt;<i>
</I>&gt;<i> I suppose it is related in some way to the discussion we've had in
</I>&gt;<i> January 2014 ;)
</I>&gt;<i> <A HREF="https://www.ogf.org/pipermail/occi-wg/2014-January/003438.html">https://www.ogf.org/pipermail/occi-wg/2014-January/003438.html</A>
</I>&gt;<i>
</I>&gt;<i> You will find in attachment an XML description of such complex
</I>&gt;<i> attributes with the JSON output from erocci. Would you like to test
</I>&gt;<i> other cases, you can use the erocci docker, as described here,
</I>&gt;<i> replacing occi.xml with your own schema (like ext1.xml in attachment):
</I>&gt;<i> <A HREF="https://github.com/erocci/docker-erocci">https://github.com/erocci/docker-erocci</A>
</I>&gt;<i>
</I>&gt;<i> Rendering the JSON is fine with the above algorithm. Parsing is
</I>&gt;<i> unambiguous but parsing may be tough to implement:
</I>&gt;<i> - when parsing the attribute definition, if &quot;type&quot; value is a string,
</I>&gt;<i> it is the type of the attribute, if &quot;type&quot; value is an object, it is a
</I>&gt;<i> component of the attribute name.
</I>&gt;<i> - when parsing the attribute instance, &quot;type&quot; can be only an attribute
</I>&gt;<i> name component.
</I>&gt;<i>
</I>&gt;<i> At the end, implementation concerns may be a valid reason for
</I>&gt;<i> forbidding some attribute names, but we must explicit it in the
</I>&gt;<i> specification.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could you give me the rendered JSON as an example?
</I>&gt;<i>
</I>&gt;<i> See attachment.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; Also, could you, please, include this as a comment here [1], then
</I>&gt;&gt;<i> &gt; &gt; we
</I>&gt;&gt;<i> &gt; &gt; can discuss it as a part of public comment on OCCI 1.2 and
</I>&gt;&gt;<i> &gt; &gt; possibly
</I>&gt;&gt;<i> &gt; &gt; include it :-)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Done, last minute before end of comments ;)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; Thanks!
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; You're welcome.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Jean
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers, Boris
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Jean
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; &gt; [1] <A HREF="https://redmine.ogf.org/boards/26/topics/429">https://redmine.ogf.org/boards/26/topics/429</A>
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; Regards,
</I>&gt;&gt;<i> &gt; &gt; &gt; --
</I>&gt;&gt;<i> &gt; &gt; &gt; Jean Parpaillon
</I>&gt;&gt;<i> &gt; &gt; &gt; --
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; Cheers, Boris
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; Open Source Consultant
</I>&gt;&gt;<i> &gt; &gt; &gt; OW2 Technology Council Chairman
</I>&gt;&gt;<i> &gt; &gt; &gt; Director @ OW2 Consortium
</I>&gt;&gt;<i> &gt; &gt; &gt; OCCIware Strategic Orientation Committee Chairman
</I>&gt;&gt;<i> &gt; &gt; &gt; Research Engineer @ Inria
</I>&gt;&gt;<i> &gt; &gt; &gt; --
</I>&gt;&gt;<i> &gt; &gt; &gt; Phone: +33 6 30 10 92 86
</I>&gt;&gt;<i> &gt; &gt; &gt; im: <A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at gmail.com</A>
</I>&gt;&gt;<i> &gt; &gt; &gt; skype: jean.parpaillon
</I>&gt;&gt;<i> &gt; &gt; &gt; linkedin: <A HREF="http://www.linkedin.com/in/jeanparpaillon/en">http://www.linkedin.com/in/jeanparpaillon/en</A>
</I>&gt;&gt;<i> &gt; &gt; &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; &gt; &gt; occi-wg mailing list
</I>&gt;&gt;<i> &gt; &gt; &gt; <A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">occi-wg at ogf.org</A>
</I>&gt;&gt;<i> &gt; &gt; &gt; <A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">https://www.ogf.org/mailman/listinfo/occi-wg</A>
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Jean Parpaillon
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Open Source Consultant
</I>&gt;&gt;<i> &gt; OW2 Technology Council Chairman
</I>&gt;&gt;<i> &gt; Director @ OW2 Consortium
</I>&gt;&gt;<i> &gt; OCCIware Strategic Orientation Committee Chairman
</I>&gt;&gt;<i> &gt; Research Engineer @ Inria
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Phone: +33 6 30 10 92 86
</I>&gt;&gt;<i> &gt; im: <A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at gmail.com</A>
</I>&gt;&gt;<i> &gt; skype: jean.parpaillon
</I>&gt;&gt;<i> &gt; linkedin: <A HREF="http://www.linkedin.com/in/jeanparpaillon/en">http://www.linkedin.com/in/jeanparpaillon/en</A>
</I>&gt;<i> --
</I>&gt;<i> Jean Parpaillon
</I>&gt;<i> --
</I>&gt;<i> Open Source Consultant
</I>&gt;<i> OW2 Technology Council Chairman
</I>&gt;<i> Director @ OW2 Consortium
</I>&gt;<i> OCCIware Strategic Orientation Committee Chairman
</I>&gt;<i> Research Engineer @ Inria
</I>&gt;<i> --
</I>&gt;<i> Phone: +33 6 30 10 92 86
</I>&gt;<i> im: <A HREF="https://www.ogf.org/mailman/listinfo/occi-wg">jean.parpaillon at gmail.com</A>
</I>&gt;<i> skype: jean.parpaillon
</I>&gt;<i> linkedin: <A HREF="http://www.linkedin.com/in/jeanparpaillon/en">http://www.linkedin.com/in/jeanparpaillon/en</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003666.html">[occi-wg] Typed Link Kind
</A></li>
	<LI>Next message: <A HREF="https://www.ogf.org/pipermail/occi-wg/2015-August/003668.html">[occi-wg] Typed Link Kind
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/date.html#3667">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/thread.html#3667">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/subject.html#3667">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/occi-wg/2015-August/author.html#3667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://www.ogf.org/mailman/listinfo/occi-wg">More information about the occi-wg
mailing list</a><br>
</body>
<!-- Mirrored from www.ogf.org/pipermail/occi-wg/2015-August/003667.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 07 Oct 2022 23:42:08 GMT -->
</html>
