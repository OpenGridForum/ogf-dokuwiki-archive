<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.ogf.org/pipermail/glue-wg/2008-March/000430.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Oct 2022 15:01:33 GMT -->
<HEAD>
   <TITLE> [glue-wg] Modeling Relationships in GlueSQL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:glue-wg%40ogf.org?Subject=%5Bglue-wg%5D%20Modeling%20Relationships%20in%20GlueSQL&In-Reply-To=47ED384B.7010004%40lrz-muenchen.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="https://www.ogf.org/pipermail/glue-wg/2008-March/000428.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[glue-wg] Modeling Relationships in GlueSQL</H1>
    <B>Felix Nikolaus Ehm</B> 
    <A HREF="mailto:glue-wg%40ogf.org?Subject=%5Bglue-wg%5D%20Modeling%20Relationships%20in%20GlueSQL&In-Reply-To=47ED384B.7010004%40lrz-muenchen.de"
       TITLE="[glue-wg] Modeling Relationships in GlueSQL">felixehm at mail.cern.ch
       </A><BR>
    <I>Mon Mar 31 09:20:59 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="https://www.ogf.org/pipermail/glue-wg/2008-March/000428.html">[glue-wg] Storge schema telcon
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/date.html#430">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/thread.html#430">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/subject.html#430">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/author.html#430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Timo,


On Fri, 28 Mar 2008, Timo Baur wrote:

&gt;<i> Hello Felix,
</I>&gt;<i> 
</I>&gt;<i> we here at DMON now try to feed first data into our Glue2.0 based DB.
</I>&gt;<i> We have some issues regarding the unique IDs, while trying to model 
</I>&gt;<i> relationships between ComputingResources,
</I>&gt;<i> Locations and AdminDomains.
</I>&gt;<i> 
</I>&gt;<i> What we - still unsucessfully - tried to do is:
</I>&gt;<i> 
</I>&gt;<i> REPLACE INTO Location (...) VALUES (...);
</I>&gt;<i> SELECT @locationID:=id FROM Location WHERE localID=&quot;...&quot;;
</I>&gt;<i> REPLACE INTO AdminDomain (...,locationID) VALUES (<A HREF="http://www.ogf.org/mailman/listinfo/glue-wg">..., at locationID</A>);
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> mysql&gt; SELECT uniqueID,locationID FROM AdminDomain;
</I>&gt;<i> +--------------------------------------+------------+
</I>&gt;<i> | uniqueID                             | locationID |
</I>&gt;<i> +--------------------------------------+------------+
</I>&gt;<i> | <A HREF="https://dmon-unic.fz-juelich.de:9115/">https://dmon-unic.fz-juelich.de:9115</A> |        197 |
</I>&gt;<i> +--------------------------------------+------------+
</I>&gt;<i> 
</I>&gt;<i> ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key
</I>&gt;<i> constraint fails (`GLUE20/AdminDomain`, CONSTRAINT
</I>&gt;<i> `fk_AdminDomainlocationID` FOREIGN KEY (`locationID`) REFERENCES
</I>&gt;<i> `Location` (`id`))
</I>&gt;<i> 
</I>It seems to me that you didn't specify a ParentTypeID which must exist in 
the EntryTable when you do the REPLACE INSERT.
This is mandatory to identify of which type the parentID is. That could 
cause the constraint error.I'll recheck the cases with the schema.



&gt;<i> We are wondering if we really should ask the DB for the id in the RS or 
</I>&gt;<i> if there is another
</I>&gt;<i> way to relate the tables by only using the unique id of the DS.
</I>&gt;<i> 
</I>I also thought of dropping the numerical presentation of the id and 
instead using the document schema ID. But then table joins with several 
key elements would get quite complicated.

Example :
If you want to find the Endpoint which serves a certain Share then you 
would need the localId and parentID from the Share in the EndpointShareLNK 
table. With the current solution you only have one id you need to join.

Another reason I have in mind is the fact when doing joins string 
comparison operations are more heavy-weight than number comparisons. 
Furthermore, modern database systems also support partitioning which is an 
effective way of speeding up search access in large datasets. However, 
MySQL for example supports currently (5.1) only the datatype integer. 

Generally, I do agree with you that this argumentation looses it 
importance if you have exactly one uniqueID for a table (Service, 
Endpoint, etc.). 

I am currently updating the schema to the latest (draft 33) of GLUE 2.0. 
There isn't much change for the main enties and Computing but for the 
storage part. I'll check again the 'numerical id issue' and sent you an 
update as soon as I have finished it.


Cheerio,
	Felix
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="https://www.ogf.org/pipermail/glue-wg/2008-March/000428.html">[glue-wg] Storge schema telcon
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/date.html#430">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/thread.html#430">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/subject.html#430">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/glue-wg/2008-March/author.html#430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.ogf.org/mailman/listinfo/glue-wg">More information about the glue-wg
mailing list</a><br>
</body>
<!-- Mirrored from www.ogf.org/pipermail/glue-wg/2008-March/000430.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Oct 2022 15:01:33 GMT -->
</html>
