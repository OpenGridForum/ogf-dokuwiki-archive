<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.ogf.org/pipermail/graap-wg/2007-August/000663.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Oct 2022 21:53:18 GMT -->
<HEAD>
   <TITLE> [GRAAP-WG] XPath issues in Creation Constraints
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:graap-wg%40ogf.org?Subject=%5BGRAAP-WG%5D%20XPath%20issues%20in%20Creation%20Constraints&In-Reply-To=001801c7e56a%2464b201b0%2451851a81%40gelbwurz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000662.html">
   <LINK REL="Next"  HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[GRAAP-WG] XPath issues in Creation Constraints</H1>
    <B>Dominic Battre</B> 
    <A HREF="mailto:graap-wg%40ogf.org?Subject=%5BGRAAP-WG%5D%20XPath%20issues%20in%20Creation%20Constraints&In-Reply-To=001801c7e56a%2464b201b0%2451851a81%40gelbwurz"
       TITLE="[GRAAP-WG] XPath issues in Creation Constraints">mailinglists at battre.de
       </A><BR>
    <I>Thu Aug 23 06:46:53 CDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000662.html">[GRAAP-WG] XPath issues in Creation Constraints
</A></li>
        <LI>Next message: <A HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000681.html">[GRAAP-WG] Feedback on &quot;Challenges in EU Grid Contracts&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/date.html#663">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/thread.html#663">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/subject.html#663">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/author.html#663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Oliver,

I think I was not clear enough.

This is part of my SLA template:

&lt;wsag:Location&gt;//wsag:GuaranteeTerm[@wsag:Name='StageIn']/\
wsag:ServiceLevelObjective/wsag:CustomServiceLevel/\
assessgrid:ProvideStageInFilesBy&lt;/wsag:Location&gt;

I can do something like

Location_Type location = ...; // get it from the java object
String xpath = location.getValue();

The problem is that xpath contains &quot;wsag:&quot; and &quot;assessgrid:&quot; which need
to be bound to the correct namespace and looked up in order to generate
your xquery expression:
   declare namespace wsag='what do I put here?'

Axis 1.x does not allow me to get all namespace bindings of the DOM node
that is represented by &quot;location&quot;.

Chapter 4.2.5.1, 5.1.1 and Appendix 2 of the WS-Agreement spec use XPath
expressions instead of XQuery expressions as suggested by you.

So the problem is:

XPath expressions as in Appendix 2 may be impossible to evaluate with
current toolkits (I may be wrong, but the Globus Toolkit faced the same
problem). Alternatives would be to use XQuery as you indicated or the
TargetedXPath query that is used in the Globus Toolkit. I think it would
be a good idea to reflect such a proposal in the WS-Agreement spec. In
either way, I think that it would be necessary to specify the query
dialect used, which in my opinion is not possible at the moment.

This is common practice e.g. in WSRF:

<A HREF="http://docs.oasis-open.org/wsrf/wsrf-ws_resource_properties-1.2-spec-os.pdf">http://docs.oasis-open.org/wsrf/wsrf-ws_resource_properties-1.2-spec-os.pdf</A>
-&gt; Section 5.4 (page 19)

Other parts of WS-Agreement have the same issue, that no dialect is
specified.

Best regards,

Dominic

Oliver W&#228;ldrich wrote:
&gt;<i> Hi Dominic,
</I>&gt;<i> 
</I>&gt;<i> In the XMLBeans implementation you can declare the namespace prefix directly
</I>&gt;<i> in the Xpath call. The Xpath expression we use are therefore constructed as
</I>&gt;<i> follows:
</I>&gt;<i> 
</I>&gt;<i> 	declare namespace foo='<A HREF="http://bar.org';/">http://bar.org';</A> $this/foo:bar
</I>&gt;<i> 
</I>&gt;<i> I did not find the place in the Xpath specification where the namespace
</I>&gt;<i> declaration is defined, but 
</I>&gt;<i> 
</I>&gt;<i>   <A HREF="http://www.w3.org/TR/xquery-xpath-parsing/">http://www.w3.org/TR/xquery-xpath-parsing/</A>
</I>&gt;<i> 
</I>&gt;<i> indicates that this should be standard conform. However, this expressions
</I>&gt;<i> work for XMLBeans. I think other implementations should support this as well
</I>&gt;<i> (Saxon?).
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> Oliver
</I>&gt;<i> 
</I>&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: <A HREF="http://www.ogf.org/mailman/listinfo/graap-wg">graap-wg-bounces at ogf.org</A> [mailto:<A HREF="http://www.ogf.org/mailman/listinfo/graap-wg">graap-wg-bounces at ogf.org</A>] Im Auftrag
</I>&gt;<i> von Dominic Battre
</I>&gt;<i> Gesendet: Donnerstag, 23. August 2007 00:05
</I>&gt;<i> An: GRAAP-WG
</I>&gt;<i> Betreff: [GRAAP-WG] XPath issues in Creation Constraints
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi.
</I>&gt;<i> 
</I>&gt;<i> As we are looking for interoperability tests and implementations start
</I>&gt;<i> showing up, I have a question about common practice in the evaluation of
</I>&gt;<i> creation constraints.
</I>&gt;<i> 
</I>&gt;<i> I have raised the issue before, but I think I have never received an answer.
</I>&gt;<i> 
</I>&gt;<i> The issue is:
</I>&gt;<i> 
</I>&gt;<i> A creation constraint might have an xpath &quot;//wsag:foobar&quot; but it is very
</I>&gt;<i> difficult to get the namespace that is bound to the &quot;wsag:&quot; prefix. At least
</I>&gt;<i> in case Axis 1 that is used.
</I>&gt;<i> 
</I>&gt;<i> Does Axis 2 solve this problem or any other toolkit? Otherwise the question
</I>&gt;<i> is whether it is technically feasible to evaluate XPath expressions like
</I>&gt;<i> that at all. If it is not feasible, it might be considered a problem in the
</I>&gt;<i> WS-Agreement spec.
</I>&gt;<i> 
</I>&gt;<i> The reason for my writing this is that I found this bug report:
</I>&gt;<i> <A HREF="http://bugzilla.globus.org/globus/show_bug.cgi?id=4227">http://bugzilla.globus.org/globus/show_bug.cgi?id=4227</A>
</I>&gt;<i> 
</I>&gt;<i> The Globus Toolkit community faced the same issue and surrendered - or lets
</I>&gt;<i> say, they came up with a very nice solution: Introducing a sane query
</I>&gt;<i> language TargetedXPath.
</I>&gt;<i> 
</I>&gt;<i> This is the Schema:
</I>&gt;<i> <A HREF="http://src.gridindex.org/globus_4.1.1/xref/src/wsrf/schema/core/query/">http://src.gridindex.org/globus_4.1.1/xref/src/wsrf/schema/core/query/</A>
</I>&gt;<i> 
</I>&gt;<i> This is the Implementation:
</I>&gt;<i> <A HREF="http://src.gridindex.org/globus_4.1.1/xref/src/wsrf/java/core/source/src/org">http://src.gridindex.org/globus_4.1.1/xref/src/wsrf/java/core/source/src/org</A>
</I>&gt;<i> /globus/wsrf/query/targetedXPath/
</I>&gt;<i> 
</I>&gt;<i> I like this approach a lot. Would this be a viable approach for
</I>&gt;<i> WS-Agreement?
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Dominic
</I>&gt;<i> --
</I>&gt;<i>   graap-wg mailing list
</I>&gt;<i>   <A HREF="http://www.ogf.org/mailman/listinfo/graap-wg">graap-wg at ogf.org</A>
</I>&gt;<i>   <A HREF="http://www.ogf.org/mailman/listinfo/graap-wg">http://www.ogf.org/mailman/listinfo/graap-wg</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000662.html">[GRAAP-WG] XPath issues in Creation Constraints
</A></li>
	<LI>Next message: <A HREF="https://www.ogf.org/pipermail/graap-wg/2007-August/000681.html">[GRAAP-WG] Feedback on &quot;Challenges in EU Grid Contracts&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/date.html#663">[ date ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/thread.html#663">[ thread ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/subject.html#663">[ subject ]</a>
              <a href="https://www.ogf.org/pipermail/graap-wg/2007-August/author.html#663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.ogf.org/mailman/listinfo/graap-wg">More information about the graap-wg
mailing list</a><br>
</body>
<!-- Mirrored from www.ogf.org/pipermail/graap-wg/2007-August/000663.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Oct 2022 21:53:18 GMT -->
</html>
