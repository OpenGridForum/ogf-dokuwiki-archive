<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from redmine.ogf.org/projects/redmine-og/repository/revisions/ea70c3d57d64847353546f1d09c9dbd958672f01/entry/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.js by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Sep 2022 16:53:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.js - Redmine - Open Grid Forum</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="7RiXtn8JMoxXZTBSrtL64n0O2gGmxf69GTM4qjOvQSI="/>
<link rel='shortcut icon' href='../../../../../../../../../../../../favicon4460.ico?1425381960' />
<link href="../../../../../../../../../../../../themes/ogf_redmine/stylesheets/application4460.css?1425381960" media="all" rel="stylesheet" type="text/css" />

<script src="../../../../../../../../../../../../javascripts/prototype4460.js?1425381960" type="text/javascript"></script>
<script src="../../../../../../../../../../../../javascripts/effects4460.js?1425381960" type="text/javascript"></script>
<script src="../../../../../../../../../../../../javascripts/dragdrop4460.js?1425381960" type="text/javascript"></script>
<script src="../../../../../../../../../../../../javascripts/controls4460.js?1425381960" type="text/javascript"></script>
<script src="../../../../../../../../../../../../javascripts/application4460.js?1425381960" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1425381960);}
    </style>
<![endif]-->
<link href="../../../../../../../../../../../../plugin_assets/extended_fields/stylesheets/extended_fields4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" /> <link href="../../../../../../../../../../../../plugin_assets/wiking/stylesheets/wiking4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

  <script src="../../../../../../../../../../../../javascripts/repository_navigation4460.js?1425381960" type="text/javascript"></script>

<link href="../../../../../../../../../../../../stylesheets/scm4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Ogf redmine controller-repositories action-entry">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../../../../../../../../../../../login.html" class="login">Login</a></li>
<li><a href="../../../../../../../../../../../../account/register.html" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../../../../../../../../../../../index.html" class="home">Home</a></li>
<li><a href="../../../../../../../../../../../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="https://redmine.ogf.org/search/index/redmine-og" method="get">
        <input name="changesets" type="hidden" value="1" />
        <label for='q'>
          <a href="../../../../../../../../../../../../search/index/redmine-og.html" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1><a href="../../../../../../../../../../../operations/repository.html?jump=repository" class="root">Operations</a> » <a href="../../../../../../../../../../../it-og/repository.html?jump=repository" class="ancestor">IT</a> » Redmine</h1>

    
    <div id="main-menu">
        <ul><li><a href="../../../../../../../../../../../redmine-og.html" class="overview">Overview</a></li>
<li><a href="../../../../../../../../../../issues.html" class="issues">Issues</a></li>
<li><a href="../../../../../../../../../../issues/calendar.html" class="calendar">Calendar</a></li>
<li><a href="../../../../../../../../../../news.html" class="news">News</a></li>
<li><a href="../../../../../../../../../../../../dmsf/redmine-og.html" class="dmsf">Documents</a></li>
<li><a href="../../../../../../../../../../wiki.html" class="wiki">Wiki</a></li>
<li><a href="../../../../../../../../../../files.html" class="files">Files</a></li>
<li><a href="../../../../../../../../../../repository.html" class="repository selected">Repository</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
  
  


    </div>

    <div id="content">
        
        

<div class="contextual">
  

<a href="../../../../../../../../../statistics.html" class="icon icon-stats">Statistics</a>

<form action="https://redmine.ogf.org/projects/redmine-og/repository/entry/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.js?rev=" id="revision_selector" method="get">  <!-- Branches Dropdown -->
      | Branch: 
    <select id="branch" name="branch"><option value=""></option>
<option value="1.3-stable">1.3-stable</option>
<option value="devel">devel</option>
<option value="master">master</option></select>
  
  
  | Revision: 
  <input id="rev" name="rev" size="8" type="text" value="ea70c3d57d64847353546f1d09c9dbd958672f01" />
</form>
</div>

<h2><a href="../../../../../../../show.html">root</a>

    / <a href="../../../../../../../show/public.html">public</a>

    / <a href="../../../../../../../show/public/plugin_assets.html">plugin_assets</a>

    / <a href="../../../../../../../show/public/plugin_assets/redmine-openid-selector.html">redmine-openid-selector</a>

    / <a href="../../../../../../../show/public/plugin_assets/redmine-openid-selector/javascripts.html">javascripts</a>

    / <a href="../../../../../../../show/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector.html">openid-selector</a>

    / <a href="../../../../../../../show/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js.html">js</a>


    / <a href="../../../../../../../changes/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.html">mootools-more.js</a>


@ ea70c3d5

</h2>

<p>

<p>
<a href="../../../../../../../changes/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.html">History</a> |

    View |


    <a href="../../../../../../../annotate/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.html">Annotate</a> |

<a href="../../../../../../../raw/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.js">Download</a>
(131.6 kB)
</p>


</p>

<div class="autoscroll">
<table class="filecontent syntaxhl">
<tbody>


  <tr>
    <th class="line-num" id="L1">
      <a href="#L1">1</a>
    </th>
    <td class="line-code">
      <pre><span class="comment">//MooTools More, &lt;http://mootools.net/more&gt;. Copyright (c) 2006-2009 Aaron Newton &lt;http://clientcide.com/&gt;, Valerio Proietti &lt;http://mad4milk.net&gt; &amp; the MooTools team &lt;http://mootools.net/developers&gt;, MIT Style License.</span>
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L2">
      <a href="#L2">2</a>
    </th>
    <td class="line-code">
      <pre>
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L3">
      <a href="#L3">3</a>
    </th>
    <td class="line-code">
      <pre>MooTools.More={<span class="key">version</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1.2.4.2</span><span class="delimiter">&quot;</span></span>,<span class="key">build</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bd5a93c0913cce25917c48cbdacde568e15e02ef</span><span class="delimiter">&quot;</span></span>};(<span class="keyword">function</span>(){<span class="keyword">var</span> a={<span class="key">language</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>,<span class="key">languages</span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>:{}},<span class="key">cascades</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>]};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L4">
      <a href="#L4">4</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b;MooTools.lang=<span class="keyword">new</span> Events();<span class="predefined">$extend</span>(MooTools.lang,{<span class="function">setLanguage</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(!a.languages[c]){<span class="keyword">return</span> <span class="local-variable">this</span>;}a.language=c;<span class="local-variable">this</span>.load();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">langChange</span><span class="delimiter">&quot;</span></span>,c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L5">
      <a href="#L5">5</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">load</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> c=<span class="local-variable">this</span>.cascade(<span class="local-variable">this</span>.getCurrentLanguage());b={};<span class="predefined">$each</span>(c,<span class="keyword">function</span>(e,d){b[d]=<span class="local-variable">this</span>.lambda(e);},<span class="local-variable">this</span>);},<span class="function">getCurrentLanguage</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> a.language;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L6">
      <a href="#L6">6</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">addLanguage</span>:<span class="keyword">function</span>(c){a.languages[c]=a.languages[c]||{};<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">cascade</span>:<span class="keyword">function</span>(e){<span class="keyword">var</span> c=(a.languages[e]||{}).cascades||[];c.combine(a.cascades);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L7">
      <a href="#L7">7</a>
    </th>
    <td class="line-code">
      <pre>c.erase(e).push(e);<span class="keyword">var</span> d=c.map(<span class="keyword">function</span>(f){<span class="keyword">return</span> a.languages[f];},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="predefined">$merge</span>.apply(<span class="local-variable">this</span>,d);},<span class="function">lambda</span>:<span class="keyword">function</span>(c){(c||{}).<span class="function">get</span>=<span class="keyword">function</span>(e,d){<span class="keyword">return</span> <span class="predefined">$lambda</span>(c[e]).apply(<span class="local-variable">this</span>,<span class="predefined">$splat</span>(d));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L8">
      <a href="#L8">8</a>
    </th>
    <td class="line-code">
      <pre>};<span class="keyword">return</span> c;},<span class="function">get</span>:<span class="keyword">function</span>(e,d,c){<span class="keyword">if</span>(b&amp;&amp;b[e]){<span class="keyword">return</span>(d?b[e].get(d,c):b[e]);}},<span class="function">set</span>:<span class="keyword">function</span>(d,e,c){<span class="local-variable">this</span>.addLanguage(d);langData=a.languages[d];<span class="keyword">if</span>(!langData[e]){langData[e]={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L9">
      <a href="#L9">9</a>
    </th>
    <td class="line-code">
      <pre>}<span class="predefined">$extend</span>(langData[e],c);<span class="keyword">if</span>(d==<span class="local-variable">this</span>.getCurrentLanguage()){<span class="local-variable">this</span>.load();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">langChange</span><span class="delimiter">&quot;</span></span>,d);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">list</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Hash.getKeys(a.languages);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L10">
      <a href="#L10">10</a>
    </th>
    <td class="line-code">
      <pre>}});})();(<span class="keyword">function</span>(){<span class="keyword">var</span> c=<span class="local-variable">this</span>;<span class="keyword">var</span> <span class="function">b</span>=<span class="keyword">function</span>(){<span class="keyword">if</span>(c.console&amp;&amp;console.log){<span class="keyword">try</span>{console.log.apply(console,<span class="local-variable">arguments</span>);}<span class="keyword">catch</span>(d){console.log(Array.slice(<span class="local-variable">arguments</span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L11">
      <a href="#L11">11</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">else</span>{Log.logged.push(<span class="local-variable">arguments</span>);}<span class="keyword">return</span> <span class="local-variable">this</span>;};<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.logged.push(<span class="local-variable">arguments</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;};<span class="local-variable">this</span>.Log=<span class="keyword">new</span> Class({<span class="key">logged</span>:[],<span class="key">log</span>:a,<span class="function">resetLog</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.logged.empty();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L12">
      <a href="#L12">12</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">enableLog</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.log=b;<span class="local-variable">this</span>.logged.each(<span class="keyword">function</span>(d){<span class="local-variable">this</span>.log.apply(<span class="local-variable">this</span>,d);},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>.resetLog();},<span class="function">disableLog</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.log=a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L13">
      <a href="#L13">13</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;}});Log.extend(<span class="keyword">new</span> Log).enableLog();Log.<span class="function">logger</span>=<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.log.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);};})();<span class="keyword">var</span> Depender={<span class="key">options</span>:{<span class="key">loadedSources</span>:[],<span class="key">loadedScripts</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">Core</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Browser</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Array</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Function</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Number</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Hash</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Element</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Event</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Element.Event</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Class</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">DomReady</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Class.Extras</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Request</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">JSON</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Request.JSON</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">More</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Depender</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Log</span><span class="delimiter">&quot;</span></span>],<span class="key">useScriptInjection</span>:<span class="predefined-constant">true</span>},<span class="key">loaded</span>:[],<span class="key">sources</span>:{},<span class="key">libs</span>:{},<span class="function">include</span>:<span class="keyword">function</span>(b){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">include: </span><span class="delimiter">&quot;</span></span>,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L14">
      <a href="#L14">14</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.mapLoaded=<span class="predefined-constant">false</span>;<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(c){<span class="local-variable">this</span>.libs=<span class="predefined">$merge</span>(<span class="local-variable">this</span>.libs,c);<span class="predefined">$each</span>(<span class="local-variable">this</span>.libs,<span class="keyword">function</span>(d,e){<span class="keyword">if</span>(d.scripts){<span class="local-variable">this</span>.loadSource(e,d.scripts);}},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L15">
      <a href="#L15">15</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(<span class="predefined">$type</span>(b)==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">fetching libs </span><span class="delimiter">&quot;</span></span>,b);<span class="local-variable">this</span>.request(b,a);}<span class="keyword">else</span>{a(b);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="key">required</span>:[],<span class="function">require</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(){<span class="keyword">var</span> c=<span class="local-variable">this</span>.calculateDependencies(b.scripts);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L16">
      <a href="#L16">16</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(b.sources){b.sources.each(<span class="keyword">function</span>(d){c.combine(<span class="local-variable">this</span>.libs[d].files);},<span class="local-variable">this</span>);}<span class="keyword">if</span>(b.serial){c.combine(<span class="local-variable">this</span>.getLoadedScripts());}b.scripts=c;<span class="local-variable">this</span>.required.push(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L17">
      <a href="#L17">17</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">require</span><span class="delimiter">&quot;</span></span>,b);<span class="local-variable">this</span>.loadScripts(b.scripts);};<span class="keyword">if</span>(<span class="local-variable">this</span>.mapLoaded){a.call(<span class="local-variable">this</span>);}<span class="keyword">else</span>{<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mapLoaded</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){a.call(<span class="local-variable">this</span>);<span class="local-variable">this</span>.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mapLoaded</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>.callee);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L18">
      <a href="#L18">18</a>
    </th>
    <td class="line-code">
      <pre>});}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">cleanDoubleSlash</span>:<span class="keyword">function</span>(b){<span class="keyword">if</span>(!b){<span class="keyword">return</span> b;}<span class="keyword">var</span> a=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;<span class="keyword">if</span>(b.test(<span class="regexp"><span class="delimiter">/</span><span class="content">^http:</span><span class="content">\/</span><span class="content">\/</span><span class="delimiter">/</span></span>)){a=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://</span><span class="delimiter">&quot;</span></span>;b=b.substring(<span class="integer">7</span>,b.length);}b=b.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">\/</span><span class="content">\/</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L19">
      <a href="#L19">19</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> a+b;},<span class="function">request</span>:<span class="keyword">function</span>(a,b){<span class="keyword">new</span> Request.JSON({<span class="key">url</span>:a,<span class="key">secure</span>:<span class="predefined-constant">false</span>,<span class="key">onSuccess</span>:b}).send();},<span class="function">loadSource</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(<span class="local-variable">this</span>.libs[b].files){<span class="local-variable">this</span>.dataLoaded();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L20">
      <a href="#L20">20</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span>;}<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">loading source: </span><span class="delimiter">&quot;</span></span>,a);<span class="local-variable">this</span>.request(<span class="local-variable">this</span>.cleanDoubleSlash(a+<span class="string"><span class="delimiter">&quot;</span><span class="content">/scripts.json</span><span class="delimiter">&quot;</span></span>),<span class="keyword">function</span>(c){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded source: </span><span class="delimiter">&quot;</span></span>,a);<span class="local-variable">this</span>.libs[b].files=c;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L21">
      <a href="#L21">21</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.dataLoaded();}.bind(<span class="local-variable">this</span>));},<span class="function">dataLoaded</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="predefined-constant">true</span>;<span class="predefined">$each</span>(<span class="local-variable">this</span>.libs,<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(!<span class="local-variable">this</span>.libs[b].files){a=<span class="predefined-constant">false</span>;}},<span class="local-variable">this</span>);<span class="keyword">if</span>(a){<span class="local-variable">this</span>.mapTree();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L22">
      <a href="#L22">22</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.mapLoaded=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.calculateLoaded();<span class="local-variable">this</span>.lastLoaded=<span class="local-variable">this</span>.getLoadedScripts().getLength();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mapLoaded</span><span class="delimiter">&quot;</span></span>);}},<span class="function">calculateLoaded</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(b){<span class="local-variable">this</span>.scriptsState[b]=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L23">
      <a href="#L23">23</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.loadedScripts){<span class="local-variable">this</span>.options.loadedScripts.each(a);}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.loadedSources){<span class="local-variable">this</span>.options.loadedSources.each(<span class="keyword">function</span>(b){<span class="predefined">$each</span>(<span class="local-variable">this</span>.libs[b].files,<span class="keyword">function</span>(c){<span class="predefined">$each</span>(c,<span class="keyword">function</span>(e,d){a(d);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L24">
      <a href="#L24">24</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);}},<span class="key">deps</span>:{},<span class="key">pathMap</span>:{},<span class="function">mapTree</span>:<span class="keyword">function</span>(){<span class="predefined">$each</span>(<span class="local-variable">this</span>.libs,<span class="keyword">function</span>(b,a){<span class="predefined">$each</span>(b.files,<span class="keyword">function</span>(c,d){<span class="predefined">$each</span>(c,<span class="keyword">function</span>(f,e){<span class="keyword">var</span> g=a+<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+d+<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+e;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L25">
      <a href="#L25">25</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.deps[g]){<span class="keyword">return</span>;}<span class="local-variable">this</span>.deps[g]=f.deps;<span class="local-variable">this</span>.pathMap[e]=g;},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);},<span class="function">getDepsForScript</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.deps[<span class="local-variable">this</span>.pathMap[a]]||[];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L26">
      <a href="#L26">26</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">calculateDependencies</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=[];<span class="predefined">$splat</span>(a).each(<span class="keyword">function</span>(c){<span class="keyword">if</span>(c==<span class="string"><span class="delimiter">&quot;</span><span class="content">None</span><span class="delimiter">&quot;</span></span>||!c){<span class="keyword">return</span>;}<span class="keyword">var</span> d=<span class="local-variable">this</span>.getDepsForScript(c);<span class="keyword">if</span>(!d){<span class="keyword">if</span>(window.console&amp;&amp;console.warn){console.warn(<span class="string"><span class="delimiter">&quot;</span><span class="content">dependencies not mapped: script: %o, map: %o, :deps: %o</span><span class="delimiter">&quot;</span></span>,c,<span class="local-variable">this</span>.pathMap,<span class="local-variable">this</span>.deps);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L27">
      <a href="#L27">27</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">else</span>{d.each(<span class="keyword">function</span>(e){<span class="keyword">if</span>(e==c||e==<span class="string"><span class="delimiter">&quot;</span><span class="content">None</span><span class="delimiter">&quot;</span></span>||!e){<span class="keyword">return</span>;}<span class="keyword">if</span>(!b.contains(e)){b.combine(<span class="local-variable">this</span>.calculateDependencies(e));}b.include(e);},<span class="local-variable">this</span>);}b.include(c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L28">
      <a href="#L28">28</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="keyword">return</span> b;},<span class="function">getPath</span>:<span class="keyword">function</span>(a){<span class="keyword">try</span>{<span class="keyword">var</span> f=<span class="local-variable">this</span>.pathMap[a].split(<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> d=<span class="local-variable">this</span>.libs[f[<span class="integer">0</span>]];<span class="keyword">var</span> b=(d.path||d.scripts)+<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>;f.shift();<span class="keyword">return</span> <span class="local-variable">this</span>.cleanDoubleSlash(b+f.join(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">.js</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L29">
      <a href="#L29">29</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">catch</span>(c){<span class="keyword">return</span> a;}},<span class="function">loadScripts</span>:<span class="keyword">function</span>(a){a=a.filter(<span class="keyword">function</span>(b){<span class="keyword">if</span>(!<span class="local-variable">this</span>.scriptsState[b]&amp;&amp;b!=<span class="string"><span class="delimiter">&quot;</span><span class="content">None</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.scriptsState[b]=<span class="predefined-constant">false</span>;<span class="keyword">return</span> <span class="predefined-constant">true</span>;}},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L30">
      <a href="#L30">30</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a.length){a.each(<span class="keyword">function</span>(b){<span class="local-variable">this</span>.loadScript(b);},<span class="local-variable">this</span>);}<span class="keyword">else</span>{<span class="local-variable">this</span>.check();}},<span class="key">toLoad</span>:[],<span class="function">loadScript</span>:<span class="keyword">function</span>(b){<span class="keyword">if</span>(<span class="local-variable">this</span>.scriptsState[b]&amp;&amp;<span class="local-variable">this</span>.toLoad.length){<span class="local-variable">this</span>.loadScript(<span class="local-variable">this</span>.toLoad.shift());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L31">
      <a href="#L31">31</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.loading){<span class="local-variable">this</span>.toLoad.push(b);<span class="keyword">return</span>;}}<span class="keyword">var</span> <span class="function">e</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.loading=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.scriptLoaded(b);<span class="keyword">if</span>(<span class="local-variable">this</span>.toLoad.length){<span class="local-variable">this</span>.loadScript(<span class="local-variable">this</span>.toLoad.shift());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L32">
      <a href="#L32">32</a>
    </th>
    <td class="line-code">
      <pre>}}.bind(<span class="local-variable">this</span>);<span class="keyword">var</span> <span class="function">d</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">could not load: </span><span class="delimiter">&quot;</span></span>,a);}.bind(<span class="local-variable">this</span>);<span class="local-variable">this</span>.loading=<span class="predefined-constant">true</span>;<span class="keyword">var</span> a=<span class="local-variable">this</span>.getPath(b);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.useScriptInjection){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">injecting script: </span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L33">
      <a href="#L33">33</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> <span class="function">c</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded script: </span><span class="delimiter">&quot;</span></span>,a);e();}.bind(<span class="local-variable">this</span>);<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">script</span><span class="delimiter">&quot;</span></span>,{<span class="key">src</span>:a+(<span class="local-variable">this</span>.options.noCache?<span class="string"><span class="delimiter">&quot;</span><span class="content">?noCache=</span><span class="delimiter">&quot;</span></span>+<span class="keyword">new</span> Date().getTime():<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>),<span class="key">events</span>:{<span class="key">load</span>:c,<span class="function">readystatechange</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>([<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>].contains(<span class="local-variable">this</span>.readyState)){c();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L34">
      <a href="#L34">34</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="key">error</span>:d}}).inject(<span class="local-variable">this</span>.options.target||document.head);}<span class="keyword">else</span>{<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">requesting script: </span><span class="delimiter">&quot;</span></span>,a);<span class="keyword">new</span> Request({<span class="key">url</span>:a,<span class="key">noCache</span>:<span class="local-variable">this</span>.options.noCache,<span class="function">onComplete</span>:<span class="keyword">function</span>(f){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded script: </span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L35">
      <a href="#L35">35</a>
    </th>
    <td class="line-code">
      <pre><span class="predefined">$exec</span>(f);e();}.bind(<span class="local-variable">this</span>),<span class="key">onFailure</span>:d,<span class="key">onException</span>:d}).send();}},<span class="key">scriptsState</span>:<span class="predefined">$H</span>(),<span class="function">getLoadedScripts</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.scriptsState.filter(<span class="keyword">function</span>(a){<span class="keyword">return</span> a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L36">
      <a href="#L36">36</a>
    </th>
    <td class="line-code">
      <pre>});},<span class="function">scriptLoaded</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded script: </span><span class="delimiter">&quot;</span></span>,a);<span class="local-variable">this</span>.scriptsState[a]=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.check();<span class="keyword">var</span> b=<span class="local-variable">this</span>.getLoadedScripts();<span class="keyword">var</span> d=b.getLength();<span class="keyword">var</span> c=<span class="local-variable">this</span>.scriptsState.getLength();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L37">
      <a href="#L37">37</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">scriptLoaded</span><span class="delimiter">&quot;</span></span>,{<span class="key">script</span>:a,<span class="key">totalLoaded</span>:(d/c*<span class="integer">100</span>).round(),<span class="key">currentLoaded</span>:((d-<span class="local-variable">this</span>.lastLoaded)/(c-<span class="local-variable">this</span>.lastLoaded)*<span class="integer">100</span>).round(),<span class="key">loaded</span>:b});<span class="keyword">if</span>(d==c){<span class="local-variable">this</span>.lastLoaded=d;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L38">
      <a href="#L38">38</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="key">lastLoaded</span>:<span class="integer">0</span>,<span class="function">check</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=[];<span class="local-variable">this</span>.required.each(<span class="keyword">function</span>(c){<span class="keyword">var</span> b=[];c.scripts.each(<span class="keyword">function</span>(d){<span class="keyword">if</span>(<span class="local-variable">this</span>.scriptsState[d]){b.push(d);}},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L39">
      <a href="#L39">39</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(c.onStep){c.onStep({<span class="key">percent</span>:b.length/c.scripts.length*<span class="integer">100</span>,<span class="key">scripts</span>:b});}<span class="keyword">if</span>(c.scripts.length!=b.length){<span class="keyword">return</span>;}c.callback();<span class="local-variable">this</span>.required.erase(c);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">requirementLoaded</span><span class="delimiter">&quot;</span></span>,[b,c]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L40">
      <a href="#L40">40</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);}};<span class="predefined">$extend</span>(Depender,<span class="keyword">new</span> Events);<span class="predefined">$extend</span>(Depender,<span class="keyword">new</span> Options);<span class="predefined">$extend</span>(Depender,<span class="keyword">new</span> Log);Depender._setOptions=Depender.setOptions;Depender.<span class="function">setOptions</span>=<span class="keyword">function</span>(){Depender._setOptions.apply(Depender,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L41">
      <a href="#L41">41</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.log){Depender.enableLog();}<span class="keyword">return</span> <span class="local-variable">this</span>;};Class.<span class="function">refactor</span>=<span class="keyword">function</span>(b,a){<span class="predefined">$each</span>(a,<span class="keyword">function</span>(e,d){<span class="keyword">var</span> c=b.prototype[d];<span class="keyword">if</span>(c&amp;&amp;(c=c._origin)&amp;&amp;<span class="keyword">typeof</span> e==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>){b.implement(d,<span class="keyword">function</span>(){<span class="keyword">var</span> f=<span class="local-variable">this</span>.previous;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L42">
      <a href="#L42">42</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.previous=c;<span class="keyword">var</span> g=e.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="local-variable">this</span>.previous=f;<span class="keyword">return</span> g;});}<span class="keyword">else</span>{b.implement(d,e);}});<span class="keyword">return</span> b;};Class.Mutators.<span class="function">Binds</span>=<span class="keyword">function</span>(a){<span class="keyword">return</span> a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L43">
      <a href="#L43">43</a>
    </th>
    <td class="line-code">
      <pre>};Class.Mutators.<span class="function">initialize</span>=<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="predefined">$splat</span>(<span class="local-variable">this</span>.Binds).each(<span class="keyword">function</span>(b){<span class="keyword">var</span> c=<span class="local-variable">this</span>[b];<span class="keyword">if</span>(c){<span class="local-variable">this</span>[b]=c.bind(<span class="local-variable">this</span>);}},<span class="local-variable">this</span>);<span class="keyword">return</span> a.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L44">
      <a href="#L44">44</a>
    </th>
    <td class="line-code">
      <pre>};};Class.Occlude=<span class="keyword">new</span> Class({<span class="function">occlude</span>:<span class="keyword">function</span>(c,b){b=document.id(b||<span class="local-variable">this</span>.element);<span class="keyword">var</span> a=b.retrieve(c||<span class="local-variable">this</span>.property);<span class="keyword">if</span>(a&amp;&amp;!<span class="predefined">$defined</span>(<span class="local-variable">this</span>.occluded)){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded=a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L45">
      <a href="#L45">45</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.occluded=<span class="predefined-constant">false</span>;b.store(c||<span class="local-variable">this</span>.property,<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}});(<span class="keyword">function</span>(){<span class="keyword">var</span> a={<span class="function">wait</span>:<span class="keyword">function</span>(b){<span class="keyword">return</span> <span class="local-variable">this</span>.chain(<span class="keyword">function</span>(){<span class="local-variable">this</span>.callChain.delay(<span class="predefined">$pick</span>(b,<span class="integer">500</span>),<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L46">
      <a href="#L46">46</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>));}};Chain.implement(a);<span class="keyword">if</span>(window.Fx){Fx.implement(a);[<span class="string"><span class="delimiter">&quot;</span><span class="content">Css</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Tween</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Elements</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(b){<span class="keyword">if</span>(Fx[b]){Fx[b].implement(a);}});}Element.implement({<span class="function">chains</span>:<span class="keyword">function</span>(b){<span class="predefined">$splat</span>(<span class="predefined">$pick</span>(b,[<span class="string"><span class="delimiter">&quot;</span><span class="content">tween</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">morph</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>])).each(<span class="keyword">function</span>(c){c=<span class="local-variable">this</span>.get(c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L47">
      <a href="#L47">47</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!c){<span class="keyword">return</span>;}c.setOptions({<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">chain</span><span class="delimiter">&quot;</span></span>});},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">pauseFx</span>:<span class="keyword">function</span>(c,b){<span class="local-variable">this</span>.chains(b).get(<span class="predefined">$pick</span>(b,<span class="string"><span class="delimiter">&quot;</span><span class="content">tween</span><span class="delimiter">&quot;</span></span>)).wait(c);<span class="keyword">return</span> <span class="local-variable">this</span>;}});})();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L48">
      <a href="#L48">48</a>
    </th>
    <td class="line-code">
      <pre>Array.implement({<span class="function">min</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Math.min.apply(<span class="predefined-constant">null</span>,<span class="local-variable">this</span>);},<span class="function">max</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Math.max.apply(<span class="predefined-constant">null</span>,<span class="local-variable">this</span>);},<span class="function">average</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.length?<span class="local-variable">this</span>.sum()/<span class="local-variable">this</span>.length:<span class="integer">0</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L49">
      <a href="#L49">49</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">sum</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="integer">0</span>,b=<span class="local-variable">this</span>.length;<span class="keyword">if</span>(b){<span class="keyword">do</span>{a+=<span class="local-variable">this</span>[--b];}<span class="keyword">while</span>(b);}<span class="keyword">return</span> a;},<span class="function">unique</span>:<span class="keyword">function</span>(){<span class="keyword">return</span>[].combine(<span class="local-variable">this</span>);}});(<span class="keyword">function</span>(){<span class="keyword">var</span> i=<span class="local-variable">this</span>.Date;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L50">
      <a href="#L50">50</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!i.now){i.now=<span class="predefined">$time</span>;}i.Methods={<span class="key">ms</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Milliseconds</span><span class="delimiter">&quot;</span></span>,<span class="key">year</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">FullYear</span><span class="delimiter">&quot;</span></span>,<span class="key">min</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Minutes</span><span class="delimiter">&quot;</span></span>,<span class="key">mo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Month</span><span class="delimiter">&quot;</span></span>,<span class="key">sec</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Seconds</span><span class="delimiter">&quot;</span></span>,<span class="key">hr</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Hours</span><span class="delimiter">&quot;</span></span>};[<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Day</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">FullYear</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Hours</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Milliseconds</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Minutes</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Month</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Seconds</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Time</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">TimezoneOffset</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Week</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Timezone</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">GMTOffset</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">DayOfYear</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">LastMonth</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">LastDayOfMonth</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCDate</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCDay</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCFullYear</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">AMPM</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ordinal</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCHours</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCMilliseconds</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCMinutes</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCMonth</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">UTCSeconds</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(p){i.Methods[p.toLowerCase()]=p;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L51">
      <a href="#L51">51</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">var</span> <span class="function">d</span>=<span class="keyword">function</span>(q,p){<span class="keyword">return</span> <span class="keyword">new</span> Array(p-String(q).length+<span class="integer">1</span>).join(<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span>)+q;};i.implement({<span class="function">set</span>:<span class="keyword">function</span>(t,r){<span class="keyword">switch</span>(<span class="predefined">$type</span>(t)){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>:<span class="keyword">for</span>(<span class="keyword">var</span> s <span class="keyword">in</span> t){<span class="local-variable">this</span>.set(s,t[s]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L52">
      <a href="#L52">52</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>:t=t.toLowerCase();<span class="keyword">var</span> q=i.Methods;<span class="keyword">if</span>(q[t]){<span class="local-variable">this</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">set</span><span class="delimiter">&quot;</span></span>+q[t]](r);}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">get</span>:<span class="keyword">function</span>(q){q=q.toLowerCase();<span class="keyword">var</span> p=i.Methods;<span class="keyword">if</span>(p[q]){<span class="keyword">return</span> <span class="local-variable">this</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">get</span><span class="delimiter">&quot;</span></span>+p[q]]();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L53">
      <a href="#L53">53</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="predefined-constant">null</span>;},<span class="function">clone</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">new</span> i(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>));},<span class="function">increment</span>:<span class="keyword">function</span>(p,r){p=p||<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>;r=<span class="predefined">$pick</span>(r,<span class="integer">1</span>);<span class="keyword">switch</span>(p){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.increment(<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>,r*<span class="integer">12</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L54">
      <a href="#L54">54</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>:<span class="keyword">var</span> q=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,<span class="integer">1</span>).set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>)+r);<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,q.min(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastdayofmonth</span><span class="delimiter">&quot;</span></span>)));<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">week</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.increment(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>,r*<span class="integer">7</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L55">
      <a href="#L55">55</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>)+r);}<span class="keyword">if</span>(!i.units[p]){<span class="keyword">throw</span> <span class="keyword">new</span> Error(p+<span class="string"><span class="delimiter">&quot;</span><span class="content"> is not a supported interval</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>)+r*i.units[p]());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L56">
      <a href="#L56">56</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">decrement</span>:<span class="keyword">function</span>(p,q){<span class="keyword">return</span> <span class="local-variable">this</span>.increment(p,-<span class="integer">1</span>*<span class="predefined">$pick</span>(q,<span class="integer">1</span>));},<span class="function">isLeapYear</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> i.isLeapYear(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>));},<span class="function">clearTime</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.set({<span class="key">hr</span>:<span class="integer">0</span>,<span class="key">min</span>:<span class="integer">0</span>,<span class="key">sec</span>:<span class="integer">0</span>,<span class="key">ms</span>:<span class="integer">0</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L57">
      <a href="#L57">57</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">diff</span>:<span class="keyword">function</span>(q,p){<span class="keyword">if</span>(<span class="predefined">$type</span>(q)==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){q=i.parse(q);}<span class="keyword">return</span>((q-<span class="local-variable">this</span>)/i.units[p||<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>](<span class="integer">3</span>,<span class="integer">3</span>)).toInt();},<span class="function">getLastDayOfMonth</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> i.daysInMonth(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>),<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L58">
      <a href="#L58">58</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getDayOfYear</span>:<span class="keyword">function</span>(){<span class="keyword">return</span>(i.UTC(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>),<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>),<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>)+<span class="integer">1</span>)-i.UTC(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>),<span class="integer">0</span>,<span class="integer">1</span>))/i.units.day();},<span class="function">getWeek</span>:<span class="keyword">function</span>(){<span class="keyword">return</span>(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">dayofyear</span><span class="delimiter">&quot;</span></span>)/<span class="integer">7</span>).ceil();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L59">
      <a href="#L59">59</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getOrdinal</span>:<span class="keyword">function</span>(p){<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">ordinal</span><span class="delimiter">&quot;</span></span>,p||<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>));},<span class="function">getTimezone</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.toString().replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^.*? ([A-Z]{3}).[0-9]{4}.*$</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">$1</span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^.*?</span><span class="content">\(</span><span class="content">([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+</span><span class="content">\)</span><span class="content">$</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">$1$2$3</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L60">
      <a href="#L60">60</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getGMTOffset</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> p=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">timezoneOffset</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span>((p&gt;<span class="integer">0</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>)+d((p.abs()/<span class="integer">60</span>).floor(),<span class="integer">2</span>)+d(p%<span class="integer">60</span>,<span class="integer">2</span>);},<span class="function">setAMPM</span>:<span class="keyword">function</span>(p){p=p.toUpperCase();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L61">
      <a href="#L61">61</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> q=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(q&gt;<span class="integer">11</span>&amp;&amp;p==<span class="string"><span class="delimiter">&quot;</span><span class="content">AM</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="local-variable">this</span>.decrement(<span class="string"><span class="delimiter">&quot;</span><span class="content">hour</span><span class="delimiter">&quot;</span></span>,<span class="integer">12</span>);}<span class="keyword">else</span>{<span class="keyword">if</span>(q&lt;<span class="integer">12</span>&amp;&amp;p==<span class="string"><span class="delimiter">&quot;</span><span class="content">PM</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="local-variable">this</span>.increment(<span class="string"><span class="delimiter">&quot;</span><span class="content">hour</span><span class="delimiter">&quot;</span></span>,<span class="integer">12</span>);}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getAMPM</span>:<span class="keyword">function</span>(){<span class="keyword">return</span>(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>)&lt;<span class="integer">12</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">AM</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">PM</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L62">
      <a href="#L62">62</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">parse</span>:<span class="keyword">function</span>(p){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>,i.parse(p));<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">isValid</span>:<span class="keyword">function</span>(p){<span class="keyword">return</span> !!(p||<span class="local-variable">this</span>).valueOf();},<span class="function">format</span>:<span class="keyword">function</span>(p){<span class="keyword">if</span>(!<span class="local-variable">this</span>.isValid()){<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="content">invalid date</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L63">
      <a href="#L63">63</a>
    </th>
    <td class="line-code">
      <pre>}p=p||<span class="string"><span class="delimiter">&quot;</span><span class="content">%x %X</span><span class="delimiter">&quot;</span></span>;p=k[p.toLowerCase()]||p;<span class="keyword">var</span> q=<span class="local-variable">this</span>;<span class="keyword">return</span> p.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">%([a-z%])</span><span class="delimiter">/</span><span class="modifier">gi</span></span>,<span class="keyword">function</span>(s,r){<span class="keyword">switch</span>(r){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">days</span><span class="delimiter">&quot;</span></span>)[q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>)].substr(<span class="integer">0</span>,<span class="integer">3</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L64">
      <a href="#L64">64</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">days</span><span class="delimiter">&quot;</span></span>)[q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>)];<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">months</span><span class="delimiter">&quot;</span></span>)[q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>)].substr(<span class="integer">0</span>,<span class="integer">3</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">B</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">months</span><span class="delimiter">&quot;</span></span>)[q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>)];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L65">
      <a href="#L65">65</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.toString();<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>),<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">H</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>),<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span>((q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>)%<span class="integer">12</span>)||<span class="integer">12</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">j</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">dayofyear</span><span class="delimiter">&quot;</span></span>),<span class="integer">3</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L66">
      <a href="#L66">66</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d((q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>)+<span class="integer">1</span>),<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">M</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">min</span><span class="delimiter">&quot;</span></span>),<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">ordinal</span><span class="delimiter">&quot;</span></span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> i.getMsg(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">ampm</span><span class="delimiter">&quot;</span></span>));<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">S</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">seconds</span><span class="delimiter">&quot;</span></span>),<span class="integer">2</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L67">
      <a href="#L67">67</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">U</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> d(q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">week</span><span class="delimiter">&quot;</span></span>),<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">w</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.format(i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">shortDate</span><span class="delimiter">&quot;</span></span>));<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">X</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.format(i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">shortTime</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L68">
      <a href="#L68">68</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>).toString().substr(<span class="integer">2</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">Y</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">T</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">GMTOffset</span><span class="delimiter">&quot;</span></span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">Z</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> q.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">Timezone</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> r;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L69">
      <a href="#L69">69</a>
    </th>
    <td class="line-code">
      <pre>});},<span class="function">toISOString</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.format(<span class="string"><span class="delimiter">&quot;</span><span class="content">iso8601</span><span class="delimiter">&quot;</span></span>);}});i.alias(<span class="string"><span class="delimiter">&quot;</span><span class="content">toISOString</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">toJSON</span><span class="delimiter">&quot;</span></span>);i.alias(<span class="string"><span class="delimiter">&quot;</span><span class="content">diff</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">compare</span><span class="delimiter">&quot;</span></span>);i.alias(<span class="string"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">strftime</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> k={<span class="key">db</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y-%m-%d %H:%M:%S</span><span class="delimiter">&quot;</span></span>,<span class="key">compact</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y%m%dT%H%M%S</span><span class="delimiter">&quot;</span></span>,<span class="key">iso8601</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y-%m-%dT%H:%M:%S%T</span><span class="delimiter">&quot;</span></span>,<span class="key">rfc822</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%a, %d %b %Y %H:%M:%S %Z</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">short</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%d %b %H:%M</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">long</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%B %d, %Y %H:%M</span><span class="delimiter">&quot;</span></span>};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L70">
      <a href="#L70">70</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> g=[];<span class="keyword">var</span> e=i.parse;<span class="keyword">var</span> <span class="function">n</span>=<span class="keyword">function</span>(s,u,r){<span class="keyword">var</span> q=-<span class="integer">1</span>;<span class="keyword">var</span> t=i.getMsg(s+<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>);<span class="keyword">switch</span>(<span class="predefined">$type</span>(u)){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>:q=t[u.get(s)];<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>:q=t[month-<span class="integer">1</span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L71">
      <a href="#L71">71</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!q){<span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid </span><span class="delimiter">&quot;</span></span>+s+<span class="string"><span class="delimiter">&quot;</span><span class="content"> index: </span><span class="delimiter">&quot;</span></span>+index);}<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>:<span class="keyword">var</span> p=t.filter(<span class="keyword">function</span>(v){<span class="keyword">return</span> <span class="local-variable">this</span>.test(v);},<span class="keyword">new</span> RegExp(<span class="string"><span class="delimiter">&quot;</span><span class="content">^</span><span class="delimiter">&quot;</span></span>+u,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>));<span class="keyword">if</span>(!p.length){<span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid </span><span class="delimiter">&quot;</span></span>+s+<span class="string"><span class="delimiter">&quot;</span><span class="content"> string</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L72">
      <a href="#L72">72</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(p.length&gt;<span class="integer">1</span>){<span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ambiguous </span><span class="delimiter">&quot;</span></span>+s);}q=p[<span class="integer">0</span>];}<span class="keyword">return</span>(r)?t.indexOf(q):q;};i.extend({<span class="function">getMsg</span>:<span class="keyword">function</span>(q,p){<span class="keyword">return</span> MooTools.lang.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>,q,p);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L73">
      <a href="#L73">73</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">units</span>:{<span class="key">ms</span>:<span class="predefined">$lambda</span>(<span class="integer">1</span>),<span class="key">second</span>:<span class="predefined">$lambda</span>(<span class="integer">1000</span>),<span class="key">minute</span>:<span class="predefined">$lambda</span>(<span class="integer">60000</span>),<span class="key">hour</span>:<span class="predefined">$lambda</span>(<span class="integer">3600000</span>),<span class="key">day</span>:<span class="predefined">$lambda</span>(<span class="integer">86400000</span>),<span class="key">week</span>:<span class="predefined">$lambda</span>(<span class="integer">608400000</span>),<span class="function">month</span>:<span class="keyword">function</span>(q,p){<span class="keyword">var</span> r=<span class="keyword">new</span> i;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L74">
      <a href="#L74">74</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> i.daysInMonth(<span class="predefined">$pick</span>(q,r.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>)),<span class="predefined">$pick</span>(p,r.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>)))*<span class="integer">86400000</span>;},<span class="function">year</span>:<span class="keyword">function</span>(p){p=p||<span class="keyword">new</span> i().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> i.isLeapYear(p)?<span class="integer">31622400000</span>:<span class="integer">31536000000</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L75">
      <a href="#L75">75</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">daysInMonth</span>:<span class="keyword">function</span>(q,p){<span class="keyword">return</span>[<span class="integer">31</span>,i.isLeapYear(p)?<span class="integer">29</span>:<span class="integer">28</span>,<span class="integer">31</span>,<span class="integer">30</span>,<span class="integer">31</span>,<span class="integer">30</span>,<span class="integer">31</span>,<span class="integer">31</span>,<span class="integer">30</span>,<span class="integer">31</span>,<span class="integer">30</span>,<span class="integer">31</span>][q];},<span class="function">isLeapYear</span>:<span class="keyword">function</span>(p){<span class="keyword">return</span>((p%<span class="integer">4</span>===<span class="integer">0</span>)&amp;&amp;(p%<span class="integer">100</span>!==<span class="integer">0</span>))||(p%<span class="integer">400</span>===<span class="integer">0</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L76">
      <a href="#L76">76</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">parse</span>:<span class="keyword">function</span>(r){<span class="keyword">var</span> q=<span class="predefined">$type</span>(r);<span class="keyword">if</span>(q==<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="keyword">new</span> i(r);}<span class="keyword">if</span>(q!=<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> r;}r=r.clean();<span class="keyword">if</span>(!r.length){<span class="keyword">return</span> <span class="predefined-constant">null</span>;}<span class="keyword">var</span> p;g.some(<span class="keyword">function</span>(t){<span class="keyword">var</span> s=t.re.exec(r);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L77">
      <a href="#L77">77</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span>(s)?(p=t.handler(s)):<span class="predefined-constant">false</span>;});<span class="keyword">return</span> p||<span class="keyword">new</span> i(e(r));},<span class="function">parseDay</span>:<span class="keyword">function</span>(p,q){<span class="keyword">return</span> n(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>,p,q);},<span class="function">parseMonth</span>:<span class="keyword">function</span>(q,p){<span class="keyword">return</span> n(<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>,q,p);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L78">
      <a href="#L78">78</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">parseUTC</span>:<span class="keyword">function</span>(q){<span class="keyword">var</span> p=<span class="keyword">new</span> i(q);<span class="keyword">var</span> r=i.UTC(p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>),p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>),p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>),p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>),p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">min</span><span class="delimiter">&quot;</span></span>),p.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">sec</span><span class="delimiter">&quot;</span></span>));<span class="keyword">return</span> <span class="keyword">new</span> i(r);},<span class="function">orderIndex</span>:<span class="keyword">function</span>(p){<span class="keyword">return</span> i.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">dateOrder</span><span class="delimiter">&quot;</span></span>).indexOf(p)+<span class="integer">1</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L79">
      <a href="#L79">79</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">defineFormat</span>:<span class="keyword">function</span>(p,q){k[p]=q;},<span class="function">defineFormats</span>:<span class="keyword">function</span>(p){<span class="keyword">for</span>(<span class="keyword">var</span> q <span class="keyword">in</span> p){i.defineFormat(q,p[q]);}},<span class="key">parsePatterns</span>:g,<span class="function">defineParser</span>:<span class="keyword">function</span>(p){g.push((p.re&amp;&amp;p.handler)?p:l(p));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L80">
      <a href="#L80">80</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">defineParsers</span>:<span class="keyword">function</span>(){Array.flatten(<span class="local-variable">arguments</span>).each(i.defineParser);},<span class="function">define2DigitYearStart</span>:<span class="keyword">function</span>(p){h=p%<span class="integer">100</span>;m=p-h;}});<span class="keyword">var</span> m=<span class="integer">1900</span>;<span class="keyword">var</span> h=<span class="integer">70</span>;<span class="keyword">var</span> <span class="function">j</span>=<span class="keyword">function</span>(p){<span class="keyword">return</span> <span class="keyword">new</span> RegExp(<span class="string"><span class="delimiter">&quot;</span><span class="content">(?:</span><span class="delimiter">&quot;</span></span>+i.getMsg(p).map(<span class="keyword">function</span>(q){<span class="keyword">return</span> q.substr(<span class="integer">0</span>,<span class="integer">3</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L81">
      <a href="#L81">81</a>
    </th>
    <td class="line-code">
      <pre>}).join(<span class="string"><span class="delimiter">&quot;</span><span class="content">|</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">)[a-z]*</span><span class="delimiter">&quot;</span></span>);};<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(p){<span class="keyword">switch</span>(p){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span>((i.orderIndex(<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>)==<span class="integer">1</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">%m[.-/]%d</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%d[.-/]%m</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">([.-/]%y)?</span><span class="delimiter">&quot;</span></span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">X</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="content">%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%T?</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L82">
      <a href="#L82">82</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="predefined-constant">null</span>;};<span class="keyword">var</span> o={<span class="key">d</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">[0-2]?[0-9]|3[01]</span><span class="delimiter">/</span></span>,<span class="key">H</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">[01]?[0-9]|2[0-3]</span><span class="delimiter">/</span></span>,<span class="key">I</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">0?[1-9]|1[0-2]</span><span class="delimiter">/</span></span>,<span class="key">M</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">[0-5]?</span><span class="char">\d</span><span class="delimiter">/</span></span>,<span class="key">s</span>:<span class="regexp"><span class="delimiter">/</span><span class="char">\d</span><span class="content">+</span><span class="delimiter">/</span></span>,<span class="key">o</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">[a-z]*</span><span class="delimiter">/</span></span>,<span class="key">p</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">[ap]</span><span class="content">\.</span><span class="content">?m</span><span class="content">\.</span><span class="content">?</span><span class="delimiter">/</span></span>,<span class="key">y</span>:<span class="regexp"><span class="delimiter">/</span><span class="char">\d</span><span class="content">{2}|</span><span class="char">\d</span><span class="content">{4}</span><span class="delimiter">/</span></span>,<span class="key">Y</span>:<span class="regexp"><span class="delimiter">/</span><span class="char">\d</span><span class="content">{4}</span><span class="delimiter">/</span></span>,<span class="key">T</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">Z|[+-]</span><span class="char">\d</span><span class="content">{2}(?::?</span><span class="char">\d</span><span class="content">{2})?</span><span class="delimiter">/</span></span>};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L83">
      <a href="#L83">83</a>
    </th>
    <td class="line-code">
      <pre>o.m=o.I;o.S=o.M;<span class="keyword">var</span> c;<span class="keyword">var</span> <span class="function">b</span>=<span class="keyword">function</span>(p){c=p;o.a=o.A=j(<span class="string"><span class="delimiter">&quot;</span><span class="content">days</span><span class="delimiter">&quot;</span></span>);o.b=o.B=j(<span class="string"><span class="delimiter">&quot;</span><span class="content">months</span><span class="delimiter">&quot;</span></span>);g.each(<span class="keyword">function</span>(r,q){<span class="keyword">if</span>(r.format){g[q]=l(r.format);}});};<span class="keyword">var</span> <span class="function">l</span>=<span class="keyword">function</span>(r){<span class="keyword">if</span>(!c){<span class="keyword">return</span>{<span class="key">format</span>:r};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L84">
      <a href="#L84">84</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> p=[];<span class="keyword">var</span> q=(r.source||r).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">%([a-z])</span><span class="delimiter">/</span><span class="modifier">gi</span></span>,<span class="keyword">function</span>(t,s){<span class="keyword">return</span> a(s)||t;}).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">\(</span><span class="content">(?!</span><span class="content">\?</span><span class="content">)</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">(?:</span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content"> (?!</span><span class="content">\?</span><span class="content">|</span><span class="content">\*</span><span class="content">)</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">,? </span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">%([a-z%])</span><span class="delimiter">/</span><span class="modifier">gi</span></span>,<span class="keyword">function</span>(t,s){<span class="keyword">var</span> u=o[s];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L85">
      <a href="#L85">85</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!u){<span class="keyword">return</span> s;}p.push(s);<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="content">(</span><span class="delimiter">&quot;</span></span>+u.source+<span class="string"><span class="delimiter">&quot;</span><span class="content">)</span><span class="delimiter">&quot;</span></span>;}).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">\[</span><span class="content">a-z</span><span class="content">\]</span><span class="delimiter">/</span><span class="modifier">gi</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">[a-z</span><span class="char">\\</span><span class="content">u00c0-</span><span class="char">\\</span><span class="content">uffff]</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span>{<span class="key">format</span>:r,<span class="key">re</span>:<span class="keyword">new</span> RegExp(<span class="string"><span class="delimiter">&quot;</span><span class="content">^</span><span class="delimiter">&quot;</span></span>+q+<span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>),<span class="function">handler</span>:<span class="keyword">function</span>(u){u=u.slice(<span class="integer">1</span>).associate(p);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L86">
      <a href="#L86">86</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> s=<span class="keyword">new</span> i().clearTime();<span class="keyword">if</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span> <span class="keyword">in</span> u){f.call(s,<span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>,<span class="integer">1</span>);}<span class="keyword">if</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span> <span class="keyword">in</span> u){f.call(s,<span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>,<span class="integer">1</span>);}<span class="keyword">for</span>(<span class="keyword">var</span> t <span class="keyword">in</span> u){f.call(s,t,u[t]);}<span class="keyword">return</span> s;}};};<span class="keyword">var</span> <span class="function">f</span>=<span class="keyword">function</span>(p,q){<span class="keyword">if</span>(!q){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L87">
      <a href="#L87">87</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">switch</span>(p){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>:<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>,i.parseDay(q,<span class="predefined-constant">true</span>));<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>:<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">B</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>,i.parseMonth(q,<span class="predefined-constant">true</span>));<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,q);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L88">
      <a href="#L88">88</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">H</span><span class="delimiter">&quot;</span></span>:<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">hr</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>,q-<span class="integer">1</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">M</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">min</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ampm</span><span class="delimiter">&quot;</span></span>,q.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">\.</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L89">
      <a href="#L89">89</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">S</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">sec</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ms</span><span class="delimiter">&quot;</span></span>,(<span class="string"><span class="delimiter">&quot;</span><span class="content">0.</span><span class="delimiter">&quot;</span></span>+q)*<span class="integer">1000</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">w</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">Y</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>:q=+q;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L90">
      <a href="#L90">90</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(q&lt;<span class="integer">100</span>){q+=m+(q&lt;h?<span class="integer">100</span>:<span class="integer">0</span>);}<span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>,q);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">T</span><span class="delimiter">&quot;</span></span>:<span class="keyword">if</span>(q==<span class="string"><span class="delimiter">&quot;</span><span class="content">Z</span><span class="delimiter">&quot;</span></span>){q=<span class="string"><span class="delimiter">&quot;</span><span class="content">+00</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">var</span> r=q.match(<span class="regexp"><span class="delimiter">/</span><span class="content">([+-])(</span><span class="char">\d</span><span class="content">{2}):?(</span><span class="char">\d</span><span class="content">{2})?</span><span class="delimiter">/</span></span>);r=(r[<span class="integer">1</span>]+<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>)*(r[<span class="integer">2</span>]*<span class="integer">60</span>+(+r[<span class="integer">3</span>]||<span class="integer">0</span>))+<span class="local-variable">this</span>.getTimezoneOffset();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L91">
      <a href="#L91">91</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>-r*<span class="integer">60000</span>);}<span class="keyword">return</span> <span class="local-variable">this</span>;};i.defineParsers(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y([-./]%m([-./]%d((T| )%X)?)?)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y%m%d(T%H(%M%S?)?)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%x( %X)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%d%o( %b( %Y)?)?( %X)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%b( %d%o)?( %Y)?( %X)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%Y %b( %d%o( %X)?)?</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">%o %b %d %X %T %Y</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L92">
      <a href="#L92">92</a>
    </th>
    <td class="line-code">
      <pre>MooTools.lang.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">langChange</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(p){<span class="keyword">if</span>(MooTools.lang.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>)){b(p);}}).fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">langChange</span><span class="delimiter">&quot;</span></span>,MooTools.lang.getCurrentLanguage());})();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L93">
      <a href="#L93">93</a>
    </th>
    <td class="line-code">
      <pre>Date.implement({<span class="function">timeDiffInWords</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Date.distanceOfTimeInWords(<span class="local-variable">this</span>,a||<span class="keyword">new</span> Date);},<span class="function">timeDiff</span>:<span class="keyword">function</span>(g,b){<span class="keyword">if</span>(g==<span class="predefined-constant">null</span>){g=<span class="keyword">new</span> Date;}<span class="keyword">var</span> f=((g-<span class="local-variable">this</span>)/<span class="integer">1000</span>).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L94">
      <a href="#L94">94</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!f){<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="content">0s</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">var</span> a={<span class="key">s</span>:<span class="integer">60</span>,<span class="key">m</span>:<span class="integer">60</span>,<span class="key">h</span>:<span class="integer">24</span>,<span class="key">d</span>:<span class="integer">365</span>,<span class="key">y</span>:<span class="integer">0</span>};<span class="keyword">var</span> e,d=[];<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> a){<span class="keyword">if</span>(!f){<span class="keyword">break</span>;}<span class="keyword">if</span>((e=a[c])){d.unshift((f%e)+c);f=(f/e).toInt();}<span class="keyword">else</span>{d.unshift(f+c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L95">
      <a href="#L95">95</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span> d.join(b||<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>);}});Date.alias(<span class="string"><span class="delimiter">&quot;</span><span class="content">timeDiffInWords</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">timeAgoInWords</span><span class="delimiter">&quot;</span></span>);Date.extend({<span class="function">distanceOfTimeInWords</span>:<span class="keyword">function</span>(b,a){<span class="keyword">return</span> Date.getTimePhrase(((a-b)/<span class="integer">1000</span>).toInt());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L96">
      <a href="#L96">96</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getTimePhrase</span>:<span class="keyword">function</span>(f){<span class="keyword">var</span> d=(f&lt;<span class="integer">0</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">Until</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ago</span><span class="delimiter">&quot;</span></span>;<span class="keyword">if</span>(f&lt;<span class="integer">0</span>){f*=-<span class="integer">1</span>;}<span class="keyword">var</span> b={<span class="key">minute</span>:<span class="integer">60</span>,<span class="key">hour</span>:<span class="integer">60</span>,<span class="key">day</span>:<span class="integer">24</span>,<span class="key">week</span>:<span class="integer">7</span>,<span class="key">month</span>:<span class="integer">52</span>/<span class="integer">12</span>,<span class="key">year</span>:<span class="integer">12</span>,<span class="key">eon</span>:<span class="predefined-constant">Infinity</span>};<span class="keyword">var</span> e=<span class="string"><span class="delimiter">&quot;</span><span class="content">lessThanMinute</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L97">
      <a href="#L97">97</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> b){<span class="keyword">var</span> a=b[c];<span class="keyword">if</span>(f&lt;<span class="float">1.5</span>*a){<span class="keyword">if</span>(f&gt;<span class="float">0.75</span>*a){e=c;}<span class="keyword">break</span>;}f/=a;e=c+<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">return</span> Date.getMsg(e+d).substitute({<span class="key">delta</span>:f.round()});}});Date.defineParsers({<span class="key">re</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^(?:tod|tom|yes)</span><span class="delimiter">/</span><span class="modifier">i</span></span>,<span class="function">handler</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">new</span> Date().clearTime();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L98">
      <a href="#L98">98</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">switch</span>(a[<span class="integer">0</span>]){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">tom</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> b.increment();<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">yes</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> b.decrement();<span class="keyword">default</span>:<span class="keyword">return</span> b;}}},{<span class="key">re</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^(next|last) ([a-z]+)$</span><span class="delimiter">/</span><span class="modifier">i</span></span>,<span class="function">handler</span>:<span class="keyword">function</span>(e){<span class="keyword">var</span> f=<span class="keyword">new</span> Date().clearTime();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L99">
      <a href="#L99">99</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=f.getDay();<span class="keyword">var</span> c=Date.parseDay(e[<span class="integer">2</span>],<span class="predefined-constant">true</span>);<span class="keyword">var</span> a=c-b;<span class="keyword">if</span>(c&lt;=b){a+=<span class="integer">7</span>;}<span class="keyword">if</span>(e[<span class="integer">1</span>]==<span class="string"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>){a-=<span class="integer">7</span>;}<span class="keyword">return</span> f.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,f.getDate()+a);}});Hash.implement({<span class="function">getFromPath</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.getClean();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L100">
      <a href="#L100">100</a>
    </th>
    <td class="line-code">
      <pre>a.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">\[</span><span class="content">([^</span><span class="content">\]</span><span class="content">]+)</span><span class="content">\]</span><span class="content">|</span><span class="content">\.</span><span class="content">([^.[]+)|[^[.]+</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="keyword">function</span>(c){<span class="keyword">if</span>(!b){<span class="keyword">return</span> <span class="predefined-constant">null</span>;}<span class="keyword">var</span> d=<span class="local-variable">arguments</span>[<span class="integer">2</span>]||<span class="local-variable">arguments</span>[<span class="integer">1</span>]||<span class="local-variable">arguments</span>[<span class="integer">0</span>];b=(d <span class="keyword">in</span> b)?b[d]:<span class="predefined-constant">null</span>;<span class="keyword">return</span> c;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L101">
      <a href="#L101">101</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">return</span> b;},<span class="function">cleanValues</span>:<span class="keyword">function</span>(a){a=a||<span class="predefined">$defined</span>;<span class="local-variable">this</span>.each(<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(!a(c)){<span class="local-variable">this</span>.erase(b);}},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">run</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">arguments</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L102">
      <a href="#L102">102</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.each(<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(<span class="predefined">$type</span>(c)==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>){c.run(a);}});}});(<span class="keyword">function</span>(){<span class="keyword">var</span> b=[<span class="string"><span class="delimiter">&quot;</span><span class="content">À</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">à</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Á</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">á</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Â</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">â</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ã</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ã</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ä</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ä</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Å</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">å</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ă</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ă</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ą</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ą</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ć</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ć</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Č</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">č</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ç</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ç</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ď</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ď</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Đ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">đ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">È</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">è</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">É</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">é</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ê</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ê</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ë</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ë</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ě</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ě</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ę</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ę</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ğ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ğ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ì</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ì</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Í</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">í</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Î</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">î</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ï</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ï</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ĺ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ĺ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ľ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ľ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ł</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ł</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ñ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ñ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ň</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ň</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ń</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ń</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ò</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ò</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ó</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ó</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ô</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ô</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Õ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">õ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ö</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ö</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ø</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ø</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ő</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ř</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ř</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ŕ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ŕ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Š</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">š</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ş</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ş</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ś</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ś</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ť</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ť</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ť</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ť</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ţ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ţ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ù</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ù</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ú</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ú</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Û</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">û</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ü</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ü</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ů</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ů</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ÿ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ÿ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ý</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ý</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ž</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ž</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ź</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ź</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ż</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ż</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Þ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">þ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ð</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ð</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ß</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Œ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">œ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Æ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">æ</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">µ</span><span class="delimiter">&quot;</span></span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L103">
      <a href="#L103">103</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=[<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ae</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ae</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">D</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">D</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">G</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">g</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">I</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">i</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">L</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">l</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">L</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">l</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">L</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">l</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">N</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">N</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">N</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">O</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">O</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">O</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">O</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Oe</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">oe</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">O</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">r</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">r</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">S</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">S</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">S</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">T</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">t</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">T</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">t</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">T</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">t</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">U</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">U</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">U</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Ue</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ue</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">U</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Y</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Y</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">TH</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">DH</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">dh</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ss</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">OE</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">oe</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">AE</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ae</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L104">
      <a href="#L104">104</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> d={<span class="key"><span class="delimiter">&quot;</span><span class="content">[</span><span class="char">\xa0</span><span class="char">\u2002</span><span class="char">\u2003</span><span class="char">\u2009</span><span class="content">]</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="char">\xb7</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">[</span><span class="char">\u2018</span><span class="char">\u2019</span><span class="content">]</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">'</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">[</span><span class="char">\u201c</span><span class="char">\u201d</span><span class="content">]</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">'</span><span class="content">&quot;</span><span class="delimiter">'</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="char">\u2026</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="char">\u2013</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="char">\u2014</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">--</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="char">\uFFFD</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;raquo;</span><span class="delimiter">&quot;</span></span>};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L105">
      <a href="#L105">105</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> <span class="function">c</span>=<span class="keyword">function</span>(e,f){e=e||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;<span class="keyword">var</span> g=f?<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;</span><span class="delimiter">&quot;</span></span>+e+<span class="string"><span class="delimiter">&quot;</span><span class="content">[^&gt;]*&gt;([</span><span class="char">\\</span><span class="content">s</span><span class="char">\\</span><span class="content">S]*?)&lt;/</span><span class="delimiter">&quot;</span></span>+e+<span class="string"><span class="delimiter">&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/?</span><span class="delimiter">&quot;</span></span>+e+<span class="string"><span class="delimiter">&quot;</span><span class="content">([^&gt;]+)?&gt;</span><span class="delimiter">&quot;</span></span>;reg=<span class="keyword">new</span> RegExp(g,<span class="string"><span class="delimiter">&quot;</span><span class="content">gi</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> reg;};String.implement({<span class="function">standardize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> e=<span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L106">
      <a href="#L106">106</a>
    </th>
    <td class="line-code">
      <pre>b.each(<span class="keyword">function</span>(g,f){e=e.replace(<span class="keyword">new</span> RegExp(g,<span class="string"><span class="delimiter">&quot;</span><span class="content">g</span><span class="delimiter">&quot;</span></span>),a[f]);});<span class="keyword">return</span> e;},<span class="function">repeat</span>:<span class="keyword">function</span>(e){<span class="keyword">return</span> <span class="keyword">new</span> Array(e+<span class="integer">1</span>).join(<span class="local-variable">this</span>);},<span class="function">pad</span>:<span class="keyword">function</span>(f,h,e){<span class="keyword">if</span>(<span class="local-variable">this</span>.length&gt;=f){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L107">
      <a href="#L107">107</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> g=(h==<span class="predefined-constant">null</span>?<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>+h).repeat(f-<span class="local-variable">this</span>.length).substr(<span class="integer">0</span>,f-<span class="local-variable">this</span>.length);<span class="keyword">if</span>(!e||e==<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="local-variable">this</span>+g;}<span class="keyword">if</span>(e==<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> g+<span class="local-variable">this</span>;}<span class="keyword">return</span> g.substr(<span class="integer">0</span>,(g.length/<span class="integer">2</span>).floor())+<span class="local-variable">this</span>+g.substr(<span class="integer">0</span>,(g.length/<span class="integer">2</span>).ceil());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L108">
      <a href="#L108">108</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getTags</span>:<span class="keyword">function</span>(e,f){<span class="keyword">return</span> <span class="local-variable">this</span>.match(c(e,f))||[];},<span class="function">stripTags</span>:<span class="keyword">function</span>(e,f){<span class="keyword">return</span> <span class="local-variable">this</span>.replace(c(e,f),<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);},<span class="function">tidy</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> e=<span class="local-variable">this</span>.toString();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L109">
      <a href="#L109">109</a>
    </th>
    <td class="line-code">
      <pre><span class="predefined">$each</span>(d,<span class="keyword">function</span>(g,f){e=e.replace(<span class="keyword">new</span> RegExp(f,<span class="string"><span class="delimiter">&quot;</span><span class="content">g</span><span class="delimiter">&quot;</span></span>),g);});<span class="keyword">return</span> e;}});})();String.implement({<span class="function">parseQueryString</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">this</span>.split(<span class="regexp"><span class="delimiter">/</span><span class="content">[&amp;;]</span><span class="delimiter">/</span></span>),a={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L110">
      <a href="#L110">110</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(b.length){b.each(<span class="keyword">function</span>(g){<span class="keyword">var</span> c=g.indexOf(<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span>),d=c&lt;<span class="integer">0</span>?[<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>]:g.substr(<span class="integer">0</span>,c).match(<span class="regexp"><span class="delimiter">/</span><span class="content">[^</span><span class="content">\]</span><span class="content">\[</span><span class="content">]+</span><span class="delimiter">/</span><span class="modifier">g</span></span>),e=decodeURIComponent(g.substr(c+<span class="integer">1</span>)),f=a;d.each(<span class="keyword">function</span>(j,h){<span class="keyword">var</span> k=f[j];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L111">
      <a href="#L111">111</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(h&lt;d.length-<span class="integer">1</span>){f=f[j]=k||{};}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="predefined">$type</span>(k)==<span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>){k.push(e);}<span class="keyword">else</span>{f[j]=<span class="predefined">$defined</span>(k)?[k,e]:e;}}});});}<span class="keyword">return</span> a;},<span class="function">cleanQueryString</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;</span><span class="delimiter">&quot;</span></span>).filter(<span class="keyword">function</span>(e){<span class="keyword">var</span> b=e.indexOf(<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span>),c=b&lt;<span class="integer">0</span>?<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:e.substr(<span class="integer">0</span>,b),d=e.substr(b+<span class="integer">1</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L112">
      <a href="#L112">112</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> a?a.run([c,d]):<span class="predefined">$chk</span>(d);}).join(<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;</span><span class="delimiter">&quot;</span></span>);}});<span class="keyword">var</span> URI=<span class="keyword">new</span> Class({<span class="key">Implements</span>:Options,<span class="key">options</span>:{},<span class="key">regex</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^(?:(</span><span class="char">\w</span><span class="content">+):)?(?:</span><span class="content">\/</span><span class="content">\/</span><span class="content">(?:(?:([^:@]*):?([^:@]*))?@)?([^:</span><span class="content">\/</span><span class="content">?#]*)(?::(</span><span class="char">\d</span><span class="content">*))?)?(</span><span class="content">\.</span><span class="content">\.</span><span class="content">?$|(?:[^?#</span><span class="content">\/</span><span class="content">]*</span><span class="content">\/</span><span class="content">)*)([^?#]*)(?:</span><span class="content">\?</span><span class="content">([^#]*))?(?:#(.*))?</span><span class="delimiter">/</span></span>,<span class="key">parts</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">scheme</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">host</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">directory</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">file</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">fragment</span><span class="delimiter">&quot;</span></span>],<span class="key">schemes</span>:{<span class="key">http</span>:<span class="integer">80</span>,<span class="key">https</span>:<span class="integer">443</span>,<span class="key">ftp</span>:<span class="integer">21</span>,<span class="key">rtsp</span>:<span class="integer">554</span>,<span class="key">mms</span>:<span class="integer">1755</span>,<span class="key">file</span>:<span class="integer">0</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.setOptions(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L113">
      <a href="#L113">113</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> c=<span class="local-variable">this</span>.options.base||URI.base;<span class="keyword">if</span>(!b){b=c;}<span class="keyword">if</span>(b&amp;&amp;b.parsed){<span class="local-variable">this</span>.parsed=<span class="predefined">$unlink</span>(b.parsed);}<span class="keyword">else</span>{<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,b.href||b.toString(),c?<span class="keyword">new</span> URI(c):<span class="predefined-constant">false</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L114">
      <a href="#L114">114</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">parse</span>:<span class="keyword">function</span>(c,b){<span class="keyword">var</span> a=c.match(<span class="local-variable">this</span>.regex);<span class="keyword">if</span>(!a){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}a.shift();<span class="keyword">return</span> <span class="local-variable">this</span>.merge(a.associate(<span class="local-variable">this</span>.parts),b);},<span class="function">merge</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>((!b||!b.scheme)&amp;&amp;(!a||!a.scheme)){<span class="keyword">return</span> <span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L115">
      <a href="#L115">115</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(a){<span class="local-variable">this</span>.parts.every(<span class="keyword">function</span>(c){<span class="keyword">if</span>(b[c]){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}b[c]=a[c]||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;<span class="keyword">return</span> <span class="predefined-constant">true</span>;});}b.port=b.port||<span class="local-variable">this</span>.schemes[b.scheme.toLowerCase()];b.directory=b.directory?<span class="local-variable">this</span>.parseDirectory(b.directory,a?a.directory:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>):<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L116">
      <a href="#L116">116</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> b;},<span class="function">parseDirectory</span>:<span class="keyword">function</span>(b,c){b=(b.substr(<span class="integer">0</span>,<span class="integer">1</span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>?<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:(c||<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>))+b;<span class="keyword">if</span>(!b.test(URI.regs.directoryDot)){<span class="keyword">return</span> b;}<span class="keyword">var</span> a=[];b.replace(URI.regs.endSlash,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).split(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).each(<span class="keyword">function</span>(d){<span class="keyword">if</span>(d==<span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span>&amp;&amp;a.length&gt;<span class="integer">0</span>){a.pop();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L117">
      <a href="#L117">117</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">if</span>(d!=<span class="string"><span class="delimiter">&quot;</span><span class="content">.</span><span class="delimiter">&quot;</span></span>){a.push(d);}}});<span class="keyword">return</span> a.join(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>;},<span class="function">combine</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> a.value||a.scheme+<span class="string"><span class="delimiter">&quot;</span><span class="content">://</span><span class="delimiter">&quot;</span></span>+(a.user?a.user+(a.password?<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+a.password:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">@</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(a.host||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(a.port&amp;&amp;a.port!=<span class="local-variable">this</span>.schemes[a.scheme]?<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+a.port:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(a.directory||<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)+(a.file||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(a.query?<span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>+a.query:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(a.fragment?<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>+a.fragment:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L118">
      <a href="#L118">118</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">set</span>:<span class="keyword">function</span>(b,d,c){<span class="keyword">if</span>(b==<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>){<span class="keyword">var</span> a=d.match(URI.regs.scheme);<span class="keyword">if</span>(a){a=a[<span class="integer">1</span>];}<span class="keyword">if</span>(a&amp;&amp;!<span class="predefined">$defined</span>(<span class="local-variable">this</span>.schemes[a.toLowerCase()])){<span class="local-variable">this</span>.parsed={<span class="key">scheme</span>:a,<span class="key">value</span>:d};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L119">
      <a href="#L119">119</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="local-variable">this</span>.parsed=<span class="local-variable">this</span>.parse(d,(c||<span class="local-variable">this</span>).parsed)||(a?{<span class="key">scheme</span>:a,<span class="key">value</span>:d}:{<span class="key">value</span>:d});}}<span class="keyword">else</span>{<span class="keyword">if</span>(b==<span class="string"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.setData(d);}<span class="keyword">else</span>{<span class="local-variable">this</span>.parsed[b]=d;}}<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L120">
      <a href="#L120">120</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">get</span>:<span class="keyword">function</span>(a,b){<span class="keyword">switch</span>(a){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.combine(<span class="local-variable">this</span>.parsed,b?b.parsed:<span class="predefined-constant">false</span>);<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>:<span class="keyword">return</span> <span class="local-variable">this</span>.getData();}<span class="keyword">return</span> <span class="local-variable">this</span>.parsed[a]||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L121">
      <a href="#L121">121</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">go</span>:<span class="keyword">function</span>(){document.location.href=<span class="local-variable">this</span>.toString();},<span class="function">toURI</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getData</span>:<span class="keyword">function</span>(c,b){<span class="keyword">var</span> a=<span class="local-variable">this</span>.get(b||<span class="string"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!<span class="predefined">$chk</span>(a)){<span class="keyword">return</span> c?<span class="predefined-constant">null</span>:{};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L122">
      <a href="#L122">122</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> d=a.parseQueryString();<span class="keyword">return</span> c?d[c]:d;},<span class="function">setData</span>:<span class="keyword">function</span>(a,c,b){<span class="keyword">if</span>(<span class="keyword">typeof</span> a==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){a=<span class="local-variable">this</span>.getData();a[<span class="local-variable">arguments</span>[<span class="integer">0</span>]]=<span class="local-variable">arguments</span>[<span class="integer">1</span>];}<span class="keyword">else</span>{<span class="keyword">if</span>(c){a=<span class="predefined">$merge</span>(<span class="local-variable">this</span>.getData(),a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L123">
      <a href="#L123">123</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span> <span class="local-variable">this</span>.set(b||<span class="string"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>,Hash.toQueryString(a));},<span class="function">clearData</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.set(a||<span class="string"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);}});URI.prototype.toString=URI.prototype.<span class="function">valueOf</span>=<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L124">
      <a href="#L124">124</a>
    </th>
    <td class="line-code">
      <pre>};URI.regs={<span class="key">endSlash</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">\/</span><span class="content">$</span><span class="delimiter">/</span></span>,<span class="key">scheme</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^(</span><span class="char">\w</span><span class="content">+):</span><span class="delimiter">/</span></span>,<span class="key">directoryDot</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">\.</span><span class="content">\/</span><span class="content">|</span><span class="content">\.</span><span class="content">$</span><span class="delimiter">/</span></span>};URI.base=<span class="keyword">new</span> URI(document.getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">base[href]</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">true</span>).getLast(),{<span class="key">base</span>:document.location});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L125">
      <a href="#L125">125</a>
    </th>
    <td class="line-code">
      <pre>String.implement({<span class="function">toURI</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">new</span> URI(<span class="local-variable">this</span>,a);}});URI=Class.refactor(URI,{<span class="function">combine</span>:<span class="keyword">function</span>(f,e){<span class="keyword">if</span>(!e||f.scheme!=e.scheme||f.host!=e.host||f.port!=e.port){<span class="keyword">return</span> <span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L126">
      <a href="#L126">126</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> a=f.file+(f.query?<span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>+f.query:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)+(f.fragment?<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>+f.fragment:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!e.directory){<span class="keyword">return</span>(f.directory||(f.file?<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">./</span><span class="delimiter">&quot;</span></span>))+a;}<span class="keyword">var</span> d=e.directory.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>),c=f.directory.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>),g=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,h;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L127">
      <a href="#L127">127</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="integer">0</span>;<span class="keyword">for</span>(h=<span class="integer">0</span>;h&lt;d.length&amp;&amp;h&lt;c.length&amp;&amp;d[h]==c[h];h++){}<span class="keyword">for</span>(b=<span class="integer">0</span>;b&lt;d.length-h-<span class="integer">1</span>;b++){g+=<span class="string"><span class="delimiter">&quot;</span><span class="content">../</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">for</span>(b=h;b&lt;c.length-<span class="integer">1</span>;b++){g+=c[b]+<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">return</span>(g||(f.file?<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">./</span><span class="delimiter">&quot;</span></span>))+a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L128">
      <a href="#L128">128</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">toAbsolute</span>:<span class="keyword">function</span>(a){a=<span class="keyword">new</span> URI(a);<span class="keyword">if</span>(a){a.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">directory</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).set(<span class="string"><span class="delimiter">&quot;</span><span class="content">file</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> <span class="local-variable">this</span>.toRelative(a);},<span class="function">toRelative</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> URI(a));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L129">
      <a href="#L129">129</a>
    </th>
    <td class="line-code">
      <pre>}});Element.implement({<span class="function">tidy</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).tidy());},<span class="function">getTextInRange</span>:<span class="keyword">function</span>(b,a){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).substring(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L130">
      <a href="#L130">130</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getSelectedText</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.setSelectionRange){<span class="keyword">return</span> <span class="local-variable">this</span>.getTextInRange(<span class="local-variable">this</span>.getSelectionStart(),<span class="local-variable">this</span>.getSelectionEnd());}<span class="keyword">return</span> document.selection.createRange().text;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L131">
      <a href="#L131">131</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getSelectedRange</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="predefined">$defined</span>(<span class="local-variable">this</span>.selectionStart)){<span class="keyword">return</span>{<span class="key">start</span>:<span class="local-variable">this</span>.selectionStart,<span class="key">end</span>:<span class="local-variable">this</span>.selectionEnd};}<span class="keyword">var</span> e={<span class="key">start</span>:<span class="integer">0</span>,<span class="key">end</span>:<span class="integer">0</span>};<span class="keyword">var</span> a=<span class="local-variable">this</span>.getDocument().selection.createRange();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L132">
      <a href="#L132">132</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!a||a.parentElement()!=<span class="local-variable">this</span>){<span class="keyword">return</span> e;}<span class="keyword">var</span> c=a.duplicate();<span class="keyword">if</span>(<span class="local-variable">this</span>.type==<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>){e.start=<span class="integer">0</span>-c.moveStart(<span class="string"><span class="delimiter">&quot;</span><span class="content">character</span><span class="delimiter">&quot;</span></span>,-<span class="integer">100000</span>);e.end=e.start+a.text.length;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L133">
      <a href="#L133">133</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">var</span> b=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> d=b.length;c.moveToElementText(<span class="local-variable">this</span>);c.setEndPoint(<span class="string"><span class="delimiter">&quot;</span><span class="content">StartToEnd</span><span class="delimiter">&quot;</span></span>,a);<span class="keyword">if</span>(c.text.length){d-=b.match(<span class="regexp"><span class="delimiter">/</span><span class="content">[</span><span class="char">\n</span><span class="char">\r</span><span class="content">]*$</span><span class="delimiter">/</span></span>)[<span class="integer">0</span>].length;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L134">
      <a href="#L134">134</a>
    </th>
    <td class="line-code">
      <pre>}e.end=d-c.text.length;c.setEndPoint(<span class="string"><span class="delimiter">&quot;</span><span class="content">StartToStart</span><span class="delimiter">&quot;</span></span>,a);e.start=d-c.text.length;}<span class="keyword">return</span> e;},<span class="function">getSelectionStart</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getSelectedRange().start;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L135">
      <a href="#L135">135</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getSelectionEnd</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getSelectedRange().end;},<span class="function">setCaretPosition</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a==<span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span>){a=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length;}<span class="local-variable">this</span>.selectRange(a,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L136">
      <a href="#L136">136</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getCaretPosition</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getSelectedRange().start;},<span class="function">selectRange</span>:<span class="keyword">function</span>(e,a){<span class="keyword">if</span>(<span class="local-variable">this</span>.setSelectionRange){<span class="local-variable">this</span>.focus();<span class="local-variable">this</span>.setSelectionRange(e,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L137">
      <a href="#L137">137</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">var</span> c=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> d=c.substr(e,a-e).replace(<span class="regexp"><span class="delimiter">/</span><span class="char">\r</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).length;e=c.substr(<span class="integer">0</span>,e).replace(<span class="regexp"><span class="delimiter">/</span><span class="char">\r</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).length;<span class="keyword">var</span> b=<span class="local-variable">this</span>.createTextRange();b.collapse(<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L138">
      <a href="#L138">138</a>
    </th>
    <td class="line-code">
      <pre>b.moveEnd(<span class="string"><span class="delimiter">&quot;</span><span class="content">character</span><span class="delimiter">&quot;</span></span>,e+d);b.moveStart(<span class="string"><span class="delimiter">&quot;</span><span class="content">character</span><span class="delimiter">&quot;</span></span>,e);b.select();}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">insertAtCursor</span>:<span class="keyword">function</span>(b,a){<span class="keyword">var</span> d=<span class="local-variable">this</span>.getSelectedRange();<span class="keyword">var</span> c=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L139">
      <a href="#L139">139</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,c.substring(<span class="integer">0</span>,d.start)+b+c.substring(d.end,c.length));<span class="keyword">if</span>(<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>)){<span class="local-variable">this</span>.selectRange(d.start,d.start+b.length);}<span class="keyword">else</span>{<span class="local-variable">this</span>.setCaretPosition(d.start+b.length);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L140">
      <a href="#L140">140</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">insertAroundCursor</span>:<span class="keyword">function</span>(b,a){b=<span class="predefined">$extend</span>({<span class="key">before</span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,<span class="key">defaultMiddle</span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,<span class="key">after</span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>},b);<span class="keyword">var</span> c=<span class="local-variable">this</span>.getSelectedText()||b.defaultMiddle;<span class="keyword">var</span> g=<span class="local-variable">this</span>.getSelectedRange();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L141">
      <a href="#L141">141</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> f=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(g.start==g.end){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,f.substring(<span class="integer">0</span>,g.start)+b.before+c+b.after+f.substring(g.end,f.length));<span class="local-variable">this</span>.selectRange(g.start+b.before.length,g.end+b.before.length+c.length);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L142">
      <a href="#L142">142</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">var</span> d=f.substring(g.start,g.end);<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,f.substring(<span class="integer">0</span>,g.start)+b.before+d+b.after+f.substring(g.end,f.length));<span class="keyword">var</span> e=g.start+b.before.length;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L143">
      <a href="#L143">143</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>)){<span class="local-variable">this</span>.selectRange(e,e+d.length);}<span class="keyword">else</span>{<span class="local-variable">this</span>.setCaretPosition(e+f.length);}}<span class="keyword">return</span> <span class="local-variable">this</span>;}});Elements.<span class="function">from</span>=<span class="keyword">function</span>(e,d){<span class="keyword">if</span>(<span class="predefined">$pick</span>(d,<span class="predefined-constant">true</span>)){e=e.stripScripts();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L144">
      <a href="#L144">144</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> b,c=e.match(<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="char">\s</span><span class="content">*&lt;(t[dhr]|tbody|tfoot|thead)</span><span class="delimiter">/</span><span class="modifier">i</span></span>);<span class="keyword">if</span>(c){b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">table</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> a=c[<span class="integer">1</span>].toLowerCase();<span class="keyword">if</span>([<span class="string"><span class="delimiter">&quot;</span><span class="content">td</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">tr</span><span class="delimiter">&quot;</span></span>].contains(a)){b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">tbody</span><span class="delimiter">&quot;</span></span>).inject(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L145">
      <a href="#L145">145</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a!=<span class="string"><span class="delimiter">&quot;</span><span class="content">tr</span><span class="delimiter">&quot;</span></span>){b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">tr</span><span class="delimiter">&quot;</span></span>).inject(b);}}}<span class="keyword">return</span>(b||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>)).set(<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span>,e).getChildren();};(<span class="keyword">function</span>(){<span class="keyword">var</span> d=<span class="regexp"><span class="delimiter">/</span><span class="content">(.*?):relay</span><span class="content">\(</span><span class="content">([^)]+)</span><span class="content">\)</span><span class="content">$</span><span class="delimiter">/</span></span>,c=<span class="regexp"><span class="delimiter">/</span><span class="content">[+&gt;~</span><span class="char">\s</span><span class="content">]</span><span class="delimiter">/</span></span>,<span class="function">f</span>=<span class="keyword">function</span>(g){<span class="keyword">var</span> h=g.match(d);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L146">
      <a href="#L146">146</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> !h?{<span class="key">event</span>:g}:{<span class="key">event</span>:h[<span class="integer">1</span>],<span class="key">selector</span>:h[<span class="integer">2</span>]};},<span class="function">b</span>=<span class="keyword">function</span>(m,g){<span class="keyword">var</span> k=m.target;<span class="keyword">if</span>(c.test(g=g.trim())){<span class="keyword">var</span> j=<span class="local-variable">this</span>.getElements(g);<span class="keyword">for</span>(<span class="keyword">var</span> h=j.length;h--;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L147">
      <a href="#L147">147</a>
    </th>
    <td class="line-code">
      <pre>){<span class="keyword">var</span> l=j[h];<span class="keyword">if</span>(k==l||l.hasChild(k)){<span class="keyword">return</span> l;}}}<span class="keyword">else</span>{<span class="keyword">for</span>(;k&amp;&amp;k!=<span class="local-variable">this</span>;k=k.parentNode){<span class="keyword">if</span>(Element.match(k,g)){<span class="keyword">return</span> document.id(k);}}}<span class="keyword">return</span> <span class="predefined-constant">null</span>;};<span class="keyword">var</span> a=Element.prototype.addEvent,e=Element.prototype.removeEvent;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L148">
      <a href="#L148">148</a>
    </th>
    <td class="line-code">
      <pre>Element.implement({<span class="function">addEvent</span>:<span class="keyword">function</span>(j,i){<span class="keyword">var</span> k=f(j);<span class="keyword">if</span>(k.selector){<span class="keyword">var</span> h=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">$moo:delegateMonitors</span><span class="delimiter">&quot;</span></span>,{});<span class="keyword">if</span>(!h[j]){<span class="keyword">var</span> <span class="function">g</span>=<span class="keyword">function</span>(m){<span class="keyword">var</span> l=b.call(<span class="local-variable">this</span>,m,k.selector);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L149">
      <a href="#L149">149</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(l){<span class="local-variable">this</span>.fireEvent(j,[m,l],<span class="integer">0</span>,l);}}.bind(<span class="local-variable">this</span>);h[j]=g;a.call(<span class="local-variable">this</span>,k.event,g);}}<span class="keyword">return</span> a.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);},<span class="function">removeEvent</span>:<span class="keyword">function</span>(j,i){<span class="keyword">var</span> k=f(j);<span class="keyword">if</span>(k.selector){<span class="keyword">var</span> h=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">events</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L150">
      <a href="#L150">150</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!h||!h[j]||(i&amp;&amp;!h[j].keys.contains(i))){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="keyword">if</span>(i){e.apply(<span class="local-variable">this</span>,[j,i]);}<span class="keyword">else</span>{e.apply(<span class="local-variable">this</span>,j);}h=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">events</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(h&amp;&amp;h[j]&amp;&amp;h[j].length==<span class="integer">0</span>){<span class="keyword">var</span> g=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">$moo:delegateMonitors</span><span class="delimiter">&quot;</span></span>,{});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L151">
      <a href="#L151">151</a>
    </th>
    <td class="line-code">
      <pre>e.apply(<span class="local-variable">this</span>,[k.event,g[j]]);<span class="keyword">delete</span> g[j];}<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="keyword">return</span> e.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);},<span class="function">fireEvent</span>:<span class="keyword">function</span>(j,h,g,k){<span class="keyword">var</span> i=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">events</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!i||!i[j]){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L152">
      <a href="#L152">152</a>
    </th>
    <td class="line-code">
      <pre>}i[j].keys.each(<span class="keyword">function</span>(l){l.create({<span class="key">bind</span>:k||<span class="local-variable">this</span>,<span class="key">delay</span>:g,<span class="local-variable">arguments</span>:h})();},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;}});})();Element.implement({<span class="function">measure</span>:<span class="keyword">function</span>(e){<span class="keyword">var</span> <span class="function">g</span>=<span class="keyword">function</span>(h){<span class="keyword">return</span> !!(!h||h.offsetHeight||h.offsetWidth);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L153">
      <a href="#L153">153</a>
    </th>
    <td class="line-code">
      <pre>};<span class="keyword">if</span>(g(<span class="local-variable">this</span>)){<span class="keyword">return</span> e.apply(<span class="local-variable">this</span>);}<span class="keyword">var</span> d=<span class="local-variable">this</span>.getParent(),f=[],b=[];<span class="keyword">while</span>(!g(d)&amp;&amp;d!=document.body){b.push(d.expose());d=d.getParent();}<span class="keyword">var</span> c=<span class="local-variable">this</span>.expose();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L154">
      <a href="#L154">154</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=e.apply(<span class="local-variable">this</span>);c();b.each(<span class="keyword">function</span>(h){h();});<span class="keyword">return</span> a;},<span class="function">expose</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="predefined">$empty</span>;}<span class="keyword">var</span> a=<span class="local-variable">this</span>.style.cssText;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L155">
      <a href="#L155">155</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.setStyles({<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">visibility</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>});<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="local-variable">this</span>.style.cssText=a;}.bind(<span class="local-variable">this</span>);},<span class="function">getDimensions</span>:<span class="keyword">function</span>(a){a=<span class="predefined">$merge</span>({<span class="key">computeSize</span>:<span class="predefined-constant">false</span>},a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L156">
      <a href="#L156">156</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> f={};<span class="keyword">var</span> <span class="function">d</span>=<span class="keyword">function</span>(g,e){<span class="keyword">return</span>(e.computeSize)?g.getComputedSize(e):g.getSize();};<span class="keyword">var</span> b=<span class="local-variable">this</span>.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b&amp;&amp;<span class="local-variable">this</span>.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>){f=<span class="local-variable">this</span>.measure(<span class="keyword">function</span>(){<span class="keyword">return</span> d(<span class="local-variable">this</span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L157">
      <a href="#L157">157</a>
    </th>
    <td class="line-code">
      <pre>});}<span class="keyword">else</span>{<span class="keyword">if</span>(b){<span class="keyword">try</span>{f=d(<span class="local-variable">this</span>,a);}<span class="keyword">catch</span>(c){}}<span class="keyword">else</span>{f={<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>};}}<span class="keyword">return</span> <span class="predefined">$chk</span>(f.x)?<span class="predefined">$extend</span>(f,{<span class="key">width</span>:f.x,<span class="key">height</span>:f.y}):<span class="predefined">$extend</span>(f,{<span class="key">x</span>:f.width,<span class="key">y</span>:f.height});},<span class="function">getComputedSize</span>:<span class="keyword">function</span>(a){a=<span class="predefined">$merge</span>({<span class="key">styles</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>],<span class="key">plains</span>:{<span class="key">height</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>],<span class="key">width</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>]},<span class="key">mode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">both</span><span class="delimiter">&quot;</span></span>},a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L158">
      <a href="#L158">158</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> c={<span class="key">width</span>:<span class="integer">0</span>,<span class="key">height</span>:<span class="integer">0</span>};<span class="keyword">switch</span>(a.mode){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>:<span class="keyword">delete</span> c.width;<span class="keyword">delete</span> a.plains.width;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">horizontal</span><span class="delimiter">&quot;</span></span>:<span class="keyword">delete</span> c.height;<span class="keyword">delete</span> a.plains.height;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L159">
      <a href="#L159">159</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">break</span>;}<span class="keyword">var</span> b=[];<span class="predefined">$each</span>(a.plains,<span class="keyword">function</span>(g,f){g.each(<span class="keyword">function</span>(h){a.styles.each(<span class="keyword">function</span>(i){b.push((i==<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>)?i+<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>+h+<span class="string"><span class="delimiter">&quot;</span><span class="content">-width</span><span class="delimiter">&quot;</span></span>:i+<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>+h);});});});<span class="keyword">var</span> e={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L160">
      <a href="#L160">160</a>
    </th>
    <td class="line-code">
      <pre>b.each(<span class="keyword">function</span>(f){e[f]=<span class="local-variable">this</span>.getComputedStyle(f);},<span class="local-variable">this</span>);<span class="keyword">var</span> d=[];<span class="predefined">$each</span>(a.plains,<span class="keyword">function</span>(g,f){<span class="keyword">var</span> h=f.capitalize();c[<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>+h]=c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+h]=<span class="integer">0</span>;g.each(<span class="keyword">function</span>(i){c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+i.capitalize()]=<span class="integer">0</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L161">
      <a href="#L161">161</a>
    </th>
    <td class="line-code">
      <pre>b.each(<span class="keyword">function</span>(k,j){<span class="keyword">if</span>(k.test(i)){e[k]=e[k].toInt()||<span class="integer">0</span>;c[<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>+h]=c[<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>+h]+e[k];c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+i.capitalize()]=c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+i.capitalize()]+e[k];}<span class="keyword">if</span>(k.test(i)&amp;&amp;f!=k&amp;&amp;(k.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>)||k.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>))&amp;&amp;!d.contains(k)){d.push(k);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L162">
      <a href="#L162">162</a>
    </th>
    <td class="line-code">
      <pre>c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+h]=c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+h]-e[k];}});});});[<span class="string"><span class="delimiter">&quot;</span><span class="content">Width</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Height</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(g){<span class="keyword">var</span> f=g.toLowerCase();<span class="keyword">if</span>(!<span class="predefined">$chk</span>(c[f])){<span class="keyword">return</span>;}c[f]=c[f]+<span class="local-variable">this</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">offset</span><span class="delimiter">&quot;</span></span>+g]+c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+g];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L163">
      <a href="#L163">163</a>
    </th>
    <td class="line-code">
      <pre>c[<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>+g]=c[f]+c[<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>+g];<span class="keyword">delete</span> c[<span class="string"><span class="delimiter">&quot;</span><span class="content">computed</span><span class="delimiter">&quot;</span></span>+g];},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="predefined">$extend</span>(e,c);}});(<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="predefined-constant">false</span>;window.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">domready</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>).setStyles({<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">fixed</span><span class="delimiter">&quot;</span></span>,<span class="key">top</span>:<span class="integer">0</span>,<span class="key">right</span>:<span class="integer">0</span>}).inject(document.body);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L164">
      <a href="#L164">164</a>
    </th>
    <td class="line-code">
      <pre>a=(b.offsetTop===<span class="integer">0</span>);b.dispose();});Element.implement({<span class="function">pin</span>:<span class="keyword">function</span>(d){<span class="keyword">if</span>(<span class="local-variable">this</span>.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="predefined-constant">null</span>;}<span class="keyword">var</span> f,b=window.getScroll();<span class="keyword">if</span>(d!==<span class="predefined-constant">false</span>){f=<span class="local-variable">this</span>.getPosition();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L165">
      <a href="#L165">165</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinned</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">var</span> h={<span class="key">top</span>:f.y-b.y,<span class="key">left</span>:f.x-b.x};<span class="keyword">if</span>(a){<span class="local-variable">this</span>.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">fixed</span><span class="delimiter">&quot;</span></span>).setStyles(h);}<span class="keyword">else</span>{<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinnedByJS</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L166">
      <a href="#L166">166</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.setStyles({<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">top</span>:f.y,<span class="key">left</span>:f.x}).addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">isPinned</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">scrollFixer</span><span class="delimiter">&quot;</span></span>,(<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinned</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">var</span> i=window.getScroll();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L167">
      <a href="#L167">167</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.setStyles({<span class="key">top</span>:h.top.toInt()+i.y,<span class="key">left</span>:h.left.toInt()+i.x});}).bind(<span class="local-variable">this</span>));window.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">scroll</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">scrollFixer</span><span class="delimiter">&quot;</span></span>));}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinned</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L168">
      <a href="#L168">168</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">else</span>{<span class="keyword">var</span> g;<span class="keyword">if</span>(!Browser.Engine.trident){<span class="keyword">var</span> e=<span class="local-variable">this</span>.getParent();g=(e.getComputedStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">static</span><span class="delimiter">&quot;</span></span>?e:e.getOffsetParent());}f=<span class="local-variable">this</span>.getPosition(g);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L169">
      <a href="#L169">169</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinned</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">false</span>);<span class="keyword">var</span> c;<span class="keyword">if</span>(a&amp;&amp;!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinnedByJS</span><span class="delimiter">&quot;</span></span>)){c={<span class="key">top</span>:f.y+b.y,<span class="key">left</span>:f.x+b.x};}<span class="keyword">else</span>{<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinnedByJS</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">false</span>);window.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">scroll</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">scrollFixer</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L170">
      <a href="#L170">170</a>
    </th>
    <td class="line-code">
      <pre>c={<span class="key">top</span>:f.y,<span class="key">left</span>:f.x};}<span class="local-variable">this</span>.setStyles(<span class="predefined">$merge</span>(c,{<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>})).removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">isPinned</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">unpin</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.pin(<span class="predefined-constant">false</span>);},<span class="function">togglepin</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.pin(!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">pinned</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L171">
      <a href="#L171">171</a>
    </th>
    <td class="line-code">
      <pre>}});})();(<span class="keyword">function</span>(){<span class="keyword">var</span> a=Element.prototype.position;Element.implement({<span class="function">position</span>:<span class="keyword">function</span>(h){<span class="keyword">if</span>(h&amp;&amp;(<span class="predefined">$defined</span>(h.x)||<span class="predefined">$defined</span>(h.y))){<span class="keyword">return</span> a?a.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>):<span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L172">
      <a href="#L172">172</a>
    </th>
    <td class="line-code">
      <pre>}<span class="predefined">$each</span>(h||{},<span class="keyword">function</span>(w,u){<span class="keyword">if</span>(!<span class="predefined">$defined</span>(w)){<span class="keyword">delete</span> h[u];}});h=<span class="predefined">$merge</span>({<span class="key">relativeTo</span>:document.body,<span class="key">position</span>:{<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>},<span class="key">edge</span>:<span class="predefined-constant">false</span>,<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>},<span class="key">returnPos</span>:<span class="predefined-constant">false</span>,<span class="key">relFixedPosition</span>:<span class="predefined-constant">false</span>,<span class="key">ignoreMargins</span>:<span class="predefined-constant">false</span>,<span class="key">ignoreScroll</span>:<span class="predefined-constant">false</span>,<span class="key">allowNegative</span>:<span class="predefined-constant">false</span>},h);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L173">
      <a href="#L173">173</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> s={<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>},f=<span class="predefined-constant">false</span>;<span class="keyword">var</span> c=<span class="local-variable">this</span>.measure(<span class="keyword">function</span>(){<span class="keyword">return</span> document.id(<span class="local-variable">this</span>.getOffsetParent());});<span class="keyword">if</span>(c&amp;&amp;c!=<span class="local-variable">this</span>.getDocument().body){s=c.measure(<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getPosition();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L174">
      <a href="#L174">174</a>
    </th>
    <td class="line-code">
      <pre>});f=c!=document.id(h.relativeTo);h.offset.x=h.offset.x-s.x;h.offset.y=h.offset.y-s.y;}<span class="keyword">var</span> <span class="function">t</span>=<span class="keyword">function</span>(u){<span class="keyword">if</span>(<span class="predefined">$type</span>(u)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> u;}u=u.toLowerCase();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L175">
      <a href="#L175">175</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> v={};<span class="keyword">if</span>(u.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>)){v.x=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(u.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>)){v.x=<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">else</span>{v.x=<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>;}}<span class="keyword">if</span>(u.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">upper</span><span class="delimiter">&quot;</span></span>)||u.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>)){v.y=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(u.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>)){v.y=<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L176">
      <a href="#L176">176</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{v.y=<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>;}}<span class="keyword">return</span> v;};h.edge=t(h.edge);h.position=t(h.position);<span class="keyword">if</span>(!h.edge){<span class="keyword">if</span>(h.position.x==<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>&amp;&amp;h.position.y==<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>){h.edge={<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L177">
      <a href="#L177">177</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{h.edge={<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>};}}<span class="local-variable">this</span>.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> g=document.id(h.relativeTo)||document.body,d=g==document.body?window.getScroll():g.getPosition(),n=d.y,i=d.x;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L178">
      <a href="#L178">178</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> e=g.getScrolls();n+=e.y;i+=e.x;<span class="keyword">var</span> o=<span class="local-variable">this</span>.getDimensions({<span class="key">computeSize</span>:<span class="predefined-constant">true</span>,<span class="key">styles</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>]});<span class="keyword">var</span> k={},p=h.offset.y,r=h.offset.x,l=window.getSize();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L179">
      <a href="#L179">179</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">switch</span>(h.position.x){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>:k.x=i+r;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>:k.x=i+r+g.offsetWidth;<span class="keyword">break</span>;<span class="keyword">default</span>:k.x=i+((g==document.body?l.x:g.offsetWidth)/<span class="integer">2</span>)+r;<span class="keyword">break</span>;}<span class="keyword">switch</span>(h.position.y){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>:k.y=n+p;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L180">
      <a href="#L180">180</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>:k.y=n+p+g.offsetHeight;<span class="keyword">break</span>;<span class="keyword">default</span>:k.y=n+((g==document.body?l.y:g.offsetHeight)/<span class="integer">2</span>)+p;<span class="keyword">break</span>;}<span class="keyword">if</span>(h.edge){<span class="keyword">var</span> b={};<span class="keyword">switch</span>(h.edge.x){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>:b.x=<span class="integer">0</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L181">
      <a href="#L181">181</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>:b.x=-o.x-o.computedRight-o.computedLeft;<span class="keyword">break</span>;<span class="keyword">default</span>:b.x=-(o.totalWidth/<span class="integer">2</span>);<span class="keyword">break</span>;}<span class="keyword">switch</span>(h.edge.y){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>:b.y=<span class="integer">0</span>;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>:b.y=-o.y-o.computedTop-o.computedBottom;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L182">
      <a href="#L182">182</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">break</span>;<span class="keyword">default</span>:b.y=-(o.totalHeight/<span class="integer">2</span>);<span class="keyword">break</span>;}k.x+=b.x;k.y+=b.y;}k={<span class="key">left</span>:((k.x&gt;=<span class="integer">0</span>||f||h.allowNegative)?k.x:<span class="integer">0</span>).toInt(),<span class="key">top</span>:((k.y&gt;=<span class="integer">0</span>||f||h.allowNegative)?k.y:<span class="integer">0</span>).toInt()};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L183">
      <a href="#L183">183</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> j={<span class="key">left</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>,<span class="key">top</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>};[<span class="string"><span class="delimiter">&quot;</span><span class="content">minimum</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">maximum</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(u){[<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(v){<span class="keyword">var</span> w=h[u]?h[u][j[v]]:<span class="predefined-constant">null</span>;<span class="keyword">if</span>(w!=<span class="predefined-constant">null</span>&amp;&amp;k[v]&lt;w){k[v]=w;}});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L184">
      <a href="#L184">184</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">if</span>(g.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">fixed</span><span class="delimiter">&quot;</span></span>||h.relFixedPosition){<span class="keyword">var</span> m=window.getScroll();k.top+=m.y;k.left+=m.x;}<span class="keyword">if</span>(h.ignoreScroll){<span class="keyword">var</span> q=g.getScroll();k.top-=q.y;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L185">
      <a href="#L185">185</a>
    </th>
    <td class="line-code">
      <pre>k.left-=q.x;}<span class="keyword">if</span>(h.ignoreMargins){k.left+=(h.edge.x==<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>?o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-right</span><span class="delimiter">&quot;</span></span>]:h.edge.x==<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>?-o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-left</span><span class="delimiter">&quot;</span></span>]+((o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-right</span><span class="delimiter">&quot;</span></span>]+o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-left</span><span class="delimiter">&quot;</span></span>])/<span class="integer">2</span>):-o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-left</span><span class="delimiter">&quot;</span></span>]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L186">
      <a href="#L186">186</a>
    </th>
    <td class="line-code">
      <pre>k.top+=(h.edge.y==<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>?o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-bottom</span><span class="delimiter">&quot;</span></span>]:h.edge.y==<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>?-o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>]+((o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-bottom</span><span class="delimiter">&quot;</span></span>]+o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>])/<span class="integer">2</span>):-o[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>]);}k.left=Math.ceil(k.left);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L187">
      <a href="#L187">187</a>
    </th>
    <td class="line-code">
      <pre>k.top=Math.ceil(k.top);<span class="keyword">if</span>(h.returnPos){<span class="keyword">return</span> k;}<span class="keyword">else</span>{<span class="local-variable">this</span>.setStyles(k);}<span class="keyword">return</span> <span class="local-variable">this</span>;}});})();Element.implement({<span class="function">isDisplayed</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L188">
      <a href="#L188">188</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">isVisible</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.offsetWidth,b=<span class="local-variable">this</span>.offsetHeight;<span class="keyword">return</span>(a==<span class="integer">0</span>&amp;&amp;b==<span class="integer">0</span>)?<span class="predefined-constant">false</span>:(a&gt;<span class="integer">0</span>&amp;&amp;b&gt;<span class="integer">0</span>)?<span class="predefined-constant">true</span>:<span class="local-variable">this</span>.isDisplayed();},<span class="function">toggle</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>[<span class="local-variable">this</span>.isDisplayed()?<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>]();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L189">
      <a href="#L189">189</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">hide</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b;<span class="keyword">try</span>{<span class="keyword">if</span>((b=<span class="local-variable">this</span>.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>))==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>){b=<span class="predefined-constant">null</span>;}}<span class="keyword">catch</span>(a){}<span class="keyword">return</span> <span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">originalDisplay</span><span class="delimiter">&quot;</span></span>,b||<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>).setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L190">
      <a href="#L190">190</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">show</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,a||<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">originalDisplay</span><span class="delimiter">&quot;</span></span>)||<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);},<span class="function">swapClass</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> <span class="local-variable">this</span>.removeClass(a).addClass(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L191">
      <a href="#L191">191</a>
    </th>
    <td class="line-code">
      <pre>}});<span class="keyword">if</span>(!window.Form){window.Form={};}(<span class="keyword">function</span>(){Form.Request=<span class="keyword">new</span> Class({<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">onSubmit</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">onFormValidate</span><span class="delimiter">&quot;</span></span>],<span class="key">Implements</span>:[Options,Events,Class.Occlude],<span class="key">options</span>:{<span class="key">requestOptions</span>:{<span class="key">evalScripts</span>:<span class="predefined-constant">true</span>,<span class="key">useSpinner</span>:<span class="predefined-constant">true</span>,<span class="key">emulation</span>:<span class="predefined-constant">false</span>,<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">ignore</span><span class="delimiter">&quot;</span></span>},<span class="key">extraData</span>:{},<span class="key">resetForm</span>:<span class="predefined-constant">true</span>},<span class="key">property</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>,<span class="function">initialize</span>:<span class="keyword">function</span>(b,c,a){<span class="local-variable">this</span>.element=document.id(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L192">
      <a href="#L192">192</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occlude()){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.update=document.id(c);<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.makeRequest();<span class="keyword">if</span>(<span class="local-variable">this</span>.options.resetForm){<span class="local-variable">this</span>.request.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){<span class="predefined">$try</span>(<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.reset();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L193">
      <a href="#L193">193</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>));<span class="keyword">if</span>(window.OverText){OverText.update();}}.bind(<span class="local-variable">this</span>));}<span class="local-variable">this</span>.attach();},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.element;},<span class="function">makeRequest</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.request=<span class="keyword">new</span> Request.HTML(<span class="predefined">$merge</span>({<span class="key">url</span>:<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">action</span><span class="delimiter">&quot;</span></span>),<span class="key">update</span>:<span class="local-variable">this</span>.update,<span class="key">emulation</span>:<span class="predefined-constant">false</span>,<span class="key">spinnerTarget</span>:<span class="local-variable">this</span>.element,<span class="key">method</span>:<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">method</span><span class="delimiter">&quot;</span></span>)||<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span>},<span class="local-variable">this</span>.options.requestOptions)).addEvents({<span class="function">success</span>:<span class="keyword">function</span>(b,a){[<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(c){<span class="local-variable">this</span>.fireEvent(c,[<span class="local-variable">this</span>.update,b,a]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L194">
      <a href="#L194">194</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);}.bind(<span class="local-variable">this</span>),<span class="function">failure</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,a);}.bind(<span class="local-variable">this</span>),<span class="function">exception</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,xhr);}.bind(<span class="local-variable">this</span>)});},<span class="function">attach</span>:<span class="keyword">function</span>(a){a=<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L195">
      <a href="#L195">195</a>
    </th>
    <td class="line-code">
      <pre>method=a?<span class="string"><span class="delimiter">&quot;</span><span class="content">addEvent</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">removeEvent</span><span class="delimiter">&quot;</span></span>;<span class="keyword">var</span> b=<span class="local-variable">this</span>.element.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b){b[method](<span class="string"><span class="delimiter">&quot;</span><span class="content">onFormValidate</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.onFormValidate);}<span class="keyword">if</span>(!b||!a){<span class="local-variable">this</span>.element[method](<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.onSubmit);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L196">
      <a href="#L196">196</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.attach(<span class="predefined-constant">false</span>);},<span class="function">enable</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.attach();},<span class="function">disable</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.detach();},<span class="function">onFormValidate</span>:<span class="keyword">function</span>(b,a,c){<span class="keyword">if</span>(b||!fv.options.stopOnFailure){<span class="keyword">if</span>(c&amp;&amp;c.stop){c.stop();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L197">
      <a href="#L197">197</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.send();}},<span class="function">onSubmit</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.element.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.detach();<span class="local-variable">this</span>.addFormEvent();<span class="keyword">return</span>;}a.stop();<span class="local-variable">this</span>.send();},<span class="function">send</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">this</span>.element.toQueryString().trim();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L198">
      <a href="#L198">198</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=<span class="predefined">$H</span>(<span class="local-variable">this</span>.options.extraData).toQueryString();<span class="keyword">if</span>(b){b+=<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;</span><span class="delimiter">&quot;</span></span>+a;}<span class="keyword">else</span>{b=a;}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">send</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,b]);<span class="local-variable">this</span>.request.send({<span class="key">data</span>:b});<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L199">
      <a href="#L199">199</a>
    </th>
    <td class="line-code">
      <pre>}});Element.Properties.formRequest={<span class="function">set</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">update</span>:Element.type,<span class="key">updateId</span>:String.type});<span class="keyword">var</span> c=a.update||a.updateId;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L200">
      <a href="#L200">200</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(c){<span class="keyword">if</span>(b){b.update=document.id(c);}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request:update</span><span class="delimiter">&quot;</span></span>,c);}<span class="keyword">if</span>(a.options){<span class="keyword">if</span>(b){b.setOptions(a.options);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L201">
      <a href="#L201">201</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request:options</span><span class="delimiter">&quot;</span></span>,a.options);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">get</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">update</span>:Element.type,<span class="key">updateId</span>:String.type});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L202">
      <a href="#L202">202</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=a.update||a.updateId;<span class="keyword">if</span>(a.options||b||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(a.options||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>,a.options);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L203">
      <a href="#L203">203</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(b){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>,b);}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Form.Request(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request:update</span><span class="delimiter">&quot;</span></span>),<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request:options</span><span class="delimiter">&quot;</span></span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L204">
      <a href="#L204">204</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>);}};Element.implement({<span class="function">formUpdate</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">form.request</span><span class="delimiter">&quot;</span></span>,b,a).send();<span class="keyword">return</span> <span class="local-variable">this</span>;}});})();Form.Request.Append=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Form.Request,<span class="key">options</span>:{<span class="key">useReveal</span>:<span class="predefined-constant">true</span>,<span class="key">revealOptions</span>:{},<span class="key">inject</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>},<span class="function">makeRequest</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.request=<span class="keyword">new</span> Request.HTML(<span class="predefined">$merge</span>({<span class="key">url</span>:<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">action</span><span class="delimiter">&quot;</span></span>),<span class="key">method</span>:<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">method</span><span class="delimiter">&quot;</span></span>)||<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span>,<span class="key">spinnerTarget</span>:<span class="local-variable">this</span>.element},<span class="local-variable">this</span>.options.requestOptions,{<span class="key">evalScripts</span>:<span class="predefined-constant">false</span>})).addEvents({<span class="function">success</span>:<span class="keyword">function</span>(b,g,f,a){<span class="keyword">var</span> c;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L205">
      <a href="#L205">205</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> d=Elements.from(f);<span class="keyword">if</span>(d.length==<span class="integer">1</span>){c=d[<span class="integer">0</span>];}<span class="keyword">else</span>{c=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key">styles</span>:{<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>}}).adopt(d);}c.inject(<span class="local-variable">this</span>.update,<span class="local-variable">this</span>.options.inject);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L206">
      <a href="#L206">206</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.requestOptions.evalScripts){<span class="predefined">$exec</span>(a);}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">beforeEffect</span><span class="delimiter">&quot;</span></span>,c);<span class="keyword">var</span> <span class="function">e</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,[c,<span class="local-variable">this</span>.update,b,g,f,a]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L207">
      <a href="#L207">207</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.useReveal){c.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.revealOptions).chain(e);c.reveal();}<span class="keyword">else</span>{e();}}.bind(<span class="local-variable">this</span>),<span class="function">failure</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L208">
      <a href="#L208">208</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>)});}});<span class="keyword">if</span>(!window.Form){window.Form={};}<span class="keyword">var</span> InputValidator=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options],<span class="key">options</span>:{<span class="key">errorMsg</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Validation failed.</span><span class="delimiter">&quot;</span></span>,<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L209">
      <a href="#L209">209</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.className=b;},<span class="function">test</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(document.id(b)){<span class="keyword">return</span> <span class="local-variable">this</span>.options.test(document.id(b),a||<span class="local-variable">this</span>.getProps(b));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L210">
      <a href="#L210">210</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="predefined-constant">false</span>;}},<span class="function">getError</span>:<span class="keyword">function</span>(c,a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.options.errorMsg;<span class="keyword">if</span>(<span class="predefined">$type</span>(b)==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>){b=b(document.id(c),a||<span class="local-variable">this</span>.getProps(c));}<span class="keyword">return</span> b;},<span class="function">getProps</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!document.id(a)){<span class="keyword">return</span>{};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L211">
      <a href="#L211">211</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>);}});Element.Properties.validatorProps={<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L212">
      <a href="#L212">212</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a){<span class="local-variable">this</span>.set(a);}<span class="keyword">if</span>(<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">if</span>(<span class="local-variable">this</span>.getProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">try</span>{<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>,JSON.decode(<span class="local-variable">this</span>.getProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L213">
      <a href="#L213">213</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">catch</span>(c){<span class="keyword">return</span>{};}}<span class="keyword">else</span>{<span class="keyword">var</span> b=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>).split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).filter(<span class="keyword">function</span>(d){<span class="keyword">return</span> d.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>);});<span class="keyword">if</span>(!b.length){<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>,{});}<span class="keyword">else</span>{a={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L214">
      <a href="#L214">214</a>
    </th>
    <td class="line-code">
      <pre>b.each(<span class="keyword">function</span>(d){<span class="keyword">var</span> f=d.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(f[<span class="integer">1</span>]){<span class="keyword">try</span>{a[f[<span class="integer">0</span>]]=JSON.decode(f[<span class="integer">1</span>]);}<span class="keyword">catch</span>(g){}}});<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>,a);}}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L215">
      <a href="#L215">215</a>
    </th>
    <td class="line-code">
      <pre>}};Form.Validator=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events],<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">onSubmit</span><span class="delimiter">&quot;</span></span>],<span class="key">options</span>:{<span class="key">fieldSelectors</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">input, select, textarea</span><span class="delimiter">&quot;</span></span>,<span class="key">ignoreHidden</span>:<span class="predefined-constant">true</span>,<span class="key">ignoreDisabled</span>:<span class="predefined-constant">true</span>,<span class="key">useTitles</span>:<span class="predefined-constant">false</span>,<span class="key">evaluateOnSubmit</span>:<span class="predefined-constant">true</span>,<span class="key">evaluateFieldsOnBlur</span>:<span class="predefined-constant">true</span>,<span class="key">evaluateFieldsOnChange</span>:<span class="predefined-constant">true</span>,<span class="key">serial</span>:<span class="predefined-constant">true</span>,<span class="key">stopOnFailure</span>:<span class="predefined-constant">true</span>,<span class="function">warningPrefix</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">warningPrefix</span><span class="delimiter">&quot;</span></span>)||<span class="string"><span class="delimiter">&quot;</span><span class="content">Warning: </span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L216">
      <a href="#L216">216</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">errorPrefix</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">errorPrefix</span><span class="delimiter">&quot;</span></span>)||<span class="string"><span class="delimiter">&quot;</span><span class="content">Error: </span><span class="delimiter">&quot;</span></span>;}},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.element=document.id(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L217">
      <a href="#L217">217</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>);<span class="local-variable">this</span>.warningPrefix=<span class="predefined">$lambda</span>(<span class="local-variable">this</span>.options.warningPrefix)();<span class="local-variable">this</span>.errorPrefix=<span class="predefined">$lambda</span>(<span class="local-variable">this</span>.options.errorPrefix)();<span class="keyword">if</span>(<span class="local-variable">this</span>.options.evaluateOnSubmit){<span class="local-variable">this</span>.element.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.onSubmit);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L218">
      <a href="#L218">218</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.evaluateFieldsOnBlur||<span class="local-variable">this</span>.options.evaluateFieldsOnChange){<span class="local-variable">this</span>.watchFields(<span class="local-variable">this</span>.getFields());}},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.element;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L219">
      <a href="#L219">219</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getFields</span>:<span class="keyword">function</span>(){<span class="keyword">return</span>(<span class="local-variable">this</span>.fields=<span class="local-variable">this</span>.element.getElements(<span class="local-variable">this</span>.options.fieldSelectors));},<span class="function">watchFields</span>:<span class="keyword">function</span>(a){a.each(<span class="keyword">function</span>(b){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.evaluateFieldsOnBlur){b.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">blur</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.validationMonitor.pass([b,<span class="predefined-constant">false</span>],<span class="local-variable">this</span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L220">
      <a href="#L220">220</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.evaluateFieldsOnChange){b.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.validationMonitor.pass([b,<span class="predefined-constant">true</span>],<span class="local-variable">this</span>));}},<span class="local-variable">this</span>);},<span class="function">validationMonitor</span>:<span class="keyword">function</span>(){<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L221">
      <a href="#L221">221</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.timer=<span class="local-variable">this</span>.validateField.delay(<span class="integer">50</span>,<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);},<span class="function">onSubmit</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!<span class="local-variable">this</span>.validate(a)&amp;&amp;a){a.preventDefault();}<span class="keyword">else</span>{<span class="local-variable">this</span>.reset();}},<span class="function">reset</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.getFields().each(<span class="local-variable">this</span>.resetField,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L222">
      <a href="#L222">222</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">validate</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> a=<span class="local-variable">this</span>.getFields().map(<span class="keyword">function</span>(c){<span class="keyword">return</span> <span class="local-variable">this</span>.validateField(c,<span class="predefined-constant">true</span>);},<span class="local-variable">this</span>).every(<span class="keyword">function</span>(c){<span class="keyword">return</span> c;});<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">formValidate</span><span class="delimiter">&quot;</span></span>,[a,<span class="local-variable">this</span>.element,b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L223">
      <a href="#L223">223</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.stopOnFailure&amp;&amp;!a&amp;&amp;b){b.preventDefault();}<span class="keyword">return</span> a;},<span class="function">validateField</span>:<span class="keyword">function</span>(i,a){<span class="keyword">if</span>(<span class="local-variable">this</span>.paused){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}i=document.id(i);<span class="keyword">var</span> d=!i.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-failed</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L224">
      <a href="#L224">224</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> f,h;<span class="keyword">if</span>(<span class="local-variable">this</span>.options.serial&amp;&amp;!a){f=<span class="local-variable">this</span>.element.getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">.validation-failed</span><span class="delimiter">&quot;</span></span>);h=<span class="local-variable">this</span>.element.getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">.warning</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">if</span>(i&amp;&amp;(!f||a||i.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-failed</span><span class="delimiter">&quot;</span></span>)||(f&amp;&amp;!<span class="local-variable">this</span>.options.serial))){<span class="keyword">var</span> c=i.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).some(<span class="keyword">function</span>(j){<span class="keyword">return</span> <span class="local-variable">this</span>.getValidator(j);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L225">
      <a href="#L225">225</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="keyword">var</span> g=[];i.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).each(<span class="keyword">function</span>(j){<span class="keyword">if</span>(j&amp;&amp;!<span class="local-variable">this</span>.test(j,i)){g.include(j);}},<span class="local-variable">this</span>);d=g.length===<span class="integer">0</span>;<span class="keyword">if</span>(c&amp;&amp;!i.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(d){i.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-passed</span><span class="delimiter">&quot;</span></span>).removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-failed</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L226">
      <a href="#L226">226</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">elementPass</span><span class="delimiter">&quot;</span></span>,i);}<span class="keyword">else</span>{i.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-failed</span><span class="delimiter">&quot;</span></span>).removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-passed</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">elementFail</span><span class="delimiter">&quot;</span></span>,[i,g]);}}<span class="keyword">if</span>(!h){<span class="keyword">var</span> e=i.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).some(<span class="keyword">function</span>(j){<span class="keyword">if</span>(j.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">^warn-</span><span class="delimiter">&quot;</span></span>)||i.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">return</span> <span class="local-variable">this</span>.getValidator(j.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^warn-</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L227">
      <a href="#L227">227</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="predefined-constant">null</span>;}},<span class="local-variable">this</span>);i.removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warning</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> b=i.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).map(<span class="keyword">function</span>(j){<span class="keyword">if</span>(j.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">^warn-</span><span class="delimiter">&quot;</span></span>)||i.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">return</span> <span class="local-variable">this</span>.test(j.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^warn-</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>),i,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L228">
      <a href="#L228">228</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="predefined-constant">null</span>;}},<span class="local-variable">this</span>);}}<span class="keyword">return</span> d;},<span class="function">test</span>:<span class="keyword">function</span>(b,d,e){d=document.id(d);<span class="keyword">if</span>((<span class="local-variable">this</span>.options.ignoreHidden&amp;&amp;!d.isVisible())||(<span class="local-variable">this</span>.options.ignoreDisabled&amp;&amp;d.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">disabled</span><span class="delimiter">&quot;</span></span>))){<span class="keyword">return</span> <span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L229">
      <a href="#L229">229</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> a=<span class="local-variable">this</span>.getValidator(b);<span class="keyword">if</span>(d.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">ignoreValidation</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}e=<span class="predefined">$pick</span>(e,<span class="predefined-constant">false</span>);<span class="keyword">if</span>(d.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>)){e=<span class="predefined-constant">true</span>;}<span class="keyword">var</span> c=a?a.test(d):<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L230">
      <a href="#L230">230</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a&amp;&amp;d.isVisible()){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">elementValidate</span><span class="delimiter">&quot;</span></span>,[c,d,b,e]);}<span class="keyword">if</span>(e){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}<span class="keyword">return</span> c;},<span class="function">resetField</span>:<span class="keyword">function</span>(a){a=document.id(a);<span class="keyword">if</span>(a){a.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).each(<span class="keyword">function</span>(b){<span class="keyword">if</span>(b.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">^warn-</span><span class="delimiter">&quot;</span></span>)){b=b.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^warn-</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L231">
      <a href="#L231">231</a>
    </th>
    <td class="line-code">
      <pre>}a.removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-failed</span><span class="delimiter">&quot;</span></span>);a.removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warning</span><span class="delimiter">&quot;</span></span>);a.removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-passed</span><span class="delimiter">&quot;</span></span>);},<span class="local-variable">this</span>);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">stop</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.paused=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L232">
      <a href="#L232">232</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">start</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.paused=<span class="predefined-constant">false</span>;<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">ignoreField</span>:<span class="keyword">function</span>(a,b){a=document.id(a);<span class="keyword">if</span>(a){<span class="local-variable">this</span>.enforceField(a);<span class="keyword">if</span>(b){a.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L233">
      <a href="#L233">233</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{a.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">ignoreValidation</span><span class="delimiter">&quot;</span></span>);}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">enforceField</span>:<span class="keyword">function</span>(a){a=document.id(a);<span class="keyword">if</span>(a){a.removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>).removeClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">ignoreValidation</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L234">
      <a href="#L234">234</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;}});Form.Validator.<span class="function">getMsg</span>=<span class="keyword">function</span>(a){<span class="keyword">return</span> MooTools.lang.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">Form.Validator</span><span class="delimiter">&quot;</span></span>,a);};Form.Validator.adders={<span class="key">validators</span>:{},<span class="function">add</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.validators[b]=<span class="keyword">new</span> InputValidator(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L235">
      <a href="#L235">235</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.initialize){<span class="local-variable">this</span>.implement({<span class="key">validators</span>:<span class="local-variable">this</span>.validators});}},<span class="function">addAllThese</span>:<span class="keyword">function</span>(a){<span class="predefined">$A</span>(a).each(<span class="keyword">function</span>(b){<span class="local-variable">this</span>.add(b[<span class="integer">0</span>],b[<span class="integer">1</span>]);},<span class="local-variable">this</span>);},<span class="function">getValidator</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.validators[a.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>)[<span class="integer">0</span>]];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L236">
      <a href="#L236">236</a>
    </th>
    <td class="line-code">
      <pre>}};<span class="predefined">$extend</span>(Form.Validator,Form.Validator.adders);Form.Validator.implement(Form.Validator.adders);Form.Validator.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:<span class="predefined-constant">false</span>,<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a.type==<span class="string"><span class="delimiter">&quot;</span><span class="content">select-one</span><span class="delimiter">&quot;</span></span>||a.type==<span class="string"><span class="delimiter">&quot;</span><span class="content">select</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> !(a.selectedIndex&gt;=<span class="integer">0</span>&amp;&amp;a.options[a.selectedIndex].value!=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L237">
      <a href="#L237">237</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span>((a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)==<span class="predefined-constant">null</span>)||(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length==<span class="integer">0</span>));}}});Form.Validator.addAllThese([[<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L238">
      <a href="#L238">238</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> !Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a);}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">minLength</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(<span class="predefined">$type</span>(b.minLength)){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">minLength</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">minLength</span>:b.minLength,<span class="key">length</span>:a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L239">
      <a href="#L239">239</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;}},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(<span class="predefined">$type</span>(b.minLength)){<span class="keyword">return</span>(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length&gt;=<span class="predefined">$pick</span>(b.minLength,<span class="integer">0</span>));}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="predefined-constant">true</span>;}}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">maxLength</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(<span class="predefined">$type</span>(b.maxLength)){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">maxLength</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">maxLength</span>:b.maxLength,<span class="key">length</span>:a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L240">
      <a href="#L240">240</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;}},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span>(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).length&lt;=<span class="predefined">$pick</span>(b.maxLength,<span class="integer">10000</span>));}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-integer</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^(-?[1-9]</span><span class="char">\d</span><span class="content">*|0)$</span><span class="delimiter">/</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L241">
      <a href="#L241">241</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-numeric</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">numeric</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^-?(?:0$0(?=</span><span class="char">\d</span><span class="content">*</span><span class="content">\.</span><span class="content">)|[1-9]|0)</span><span class="char">\d</span><span class="content">*(</span><span class="content">\.</span><span class="char">\d</span><span class="content">+)?$</span><span class="delimiter">/</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L242">
      <a href="#L242">242</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-digits</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">digits</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^[</span><span class="char">\d</span><span class="content">() .:</span><span class="content">\-</span><span class="content">\+</span><span class="content">#]+$</span><span class="delimiter">/</span></span>.test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L243">
      <a href="#L243">243</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-alpha</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">alpha</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^[a-zA-Z]+$</span><span class="delimiter">/</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L244">
      <a href="#L244">244</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-alphanum</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">alphanum</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||!(<span class="regexp"><span class="delimiter">/</span><span class="char">\W</span><span class="delimiter">/</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L245">
      <a href="#L245">245</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-date</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(Date.parse){<span class="keyword">var</span> c=b.dateFormat||<span class="string"><span class="delimiter">&quot;</span><span class="content">%x</span><span class="delimiter">&quot;</span></span>;<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">dateSuchAs</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">date</span>:<span class="keyword">new</span> Date().format(c)});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L246">
      <a href="#L246">246</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">dateInFormatMDY</span><span class="delimiter">&quot;</span></span>);}},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}<span class="keyword">var</span> g;<span class="keyword">if</span>(Date.parse){<span class="keyword">var</span> f=b.dateFormat||<span class="string"><span class="delimiter">&quot;</span><span class="content">%x</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L247">
      <a href="#L247">247</a>
    </th>
    <td class="line-code">
      <pre>g=Date.parse(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));<span class="keyword">var</span> e=g.format(f);<span class="keyword">if</span>(e!=<span class="string"><span class="delimiter">&quot;</span><span class="content">invalid date</span><span class="delimiter">&quot;</span></span>){a.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,e);}<span class="keyword">return</span> !isNaN(g);}<span class="keyword">else</span>{<span class="keyword">var</span> c=<span class="regexp"><span class="delimiter">/</span><span class="content">^(</span><span class="char">\d</span><span class="content">{2})</span><span class="content">\/</span><span class="content">(</span><span class="char">\d</span><span class="content">{2})</span><span class="content">\/</span><span class="content">(</span><span class="char">\d</span><span class="content">{4})$</span><span class="delimiter">/</span></span>;<span class="keyword">if</span>(!c.test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>))){<span class="keyword">return</span> <span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L248">
      <a href="#L248">248</a>
    </th>
    <td class="line-code">
      <pre>}g=<span class="keyword">new</span> Date(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).replace(c,<span class="string"><span class="delimiter">&quot;</span><span class="content">$1/$2/$3</span><span class="delimiter">&quot;</span></span>));<span class="keyword">return</span>(parseInt(RegExp.<span class="predefined">$1</span>,<span class="integer">10</span>)==(<span class="integer">1</span>+g.getMonth()))&amp;&amp;(parseInt(RegExp.<span class="predefined">$2</span>,<span class="integer">10</span>)==g.getDate())&amp;&amp;(parseInt(RegExp.<span class="predefined">$3</span>,<span class="integer">10</span>)==g.getFullYear());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L249">
      <a href="#L249">249</a>
    </th>
    <td class="line-code">
      <pre>}}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-email</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^[A-Z0-9._%+-]+@[A-Z0-9.-]+</span><span class="content">\.</span><span class="content">[A-Z]{2,4}$</span><span class="delimiter">/</span><span class="modifier">i</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L250">
      <a href="#L250">250</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-url</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^(https?|ftp|rmtp|mms):</span><span class="content">\/</span><span class="content">\/</span><span class="content">(([A-Z0-9][A-Z0-9_-]*)(</span><span class="content">\.</span><span class="content">[A-Z0-9][A-Z0-9_-]*)+)(:(</span><span class="char">\d</span><span class="content">+))?</span><span class="content">\/</span><span class="content">?</span><span class="delimiter">/</span><span class="modifier">i</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L251">
      <a href="#L251">251</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-currency-dollar</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">currencyDollar</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(a)||(<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="content">\$</span><span class="content">?</span><span class="content">\-</span><span class="content">?([1-9]{1}[0-9]{0,2}(</span><span class="content">\,</span><span class="content">[0-9]{3})*(</span><span class="content">\.</span><span class="content">[0-9]{0,2})?|[1-9]{1}</span><span class="char">\d</span><span class="content">*(</span><span class="content">\.</span><span class="content">[0-9]{0,2})?|0(</span><span class="content">\.</span><span class="content">[0-9]{0,2})?|(</span><span class="content">\.</span><span class="content">[0-9]{1,2})?)$</span><span class="delimiter">/</span></span>).test(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L252">
      <a href="#L252">252</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-one-required</span><span class="delimiter">&quot;</span></span>,{<span class="key">errorMsg</span>:Form.Validator.getMsg.pass(<span class="string"><span class="delimiter">&quot;</span><span class="content">oneRequired</span><span class="delimiter">&quot;</span></span>),<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=document.id(b[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-one-required</span><span class="delimiter">&quot;</span></span>])||a.getParent();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L253">
      <a href="#L253">253</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> c.getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>).some(<span class="keyword">function</span>(d){<span class="keyword">if</span>([<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">radio</span><span class="delimiter">&quot;</span></span>].contains(d.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>))){<span class="keyword">return</span> d.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">checked</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> d.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);});}}]]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L254">
      <a href="#L254">254</a>
    </th>
    <td class="line-code">
      <pre>Element.Properties.validator={<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b){b.setOptions(a);}<span class="keyword">return</span> <span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator:options</span><span class="delimiter">&quot;</span></span>);},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L255">
      <a href="#L255">255</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Form.Validator(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator:options</span><span class="delimiter">&quot;</span></span>)));}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);}};Element.implement({<span class="function">validate</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L256">
      <a href="#L256">256</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>,a).validate();}});<span class="keyword">var</span> FormValidator=Form.Validator;Form.Validator.Inline=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Form.Validator,<span class="key">options</span>:{<span class="key">scrollToErrorsOnSubmit</span>:<span class="predefined-constant">true</span>,<span class="key">scrollFxOptions</span>:{<span class="key">transition</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">quad:out</span><span class="delimiter">&quot;</span></span>,<span class="key">offset</span>:{<span class="key">y</span>:-<span class="integer">20</span>}}},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.parent(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L257">
      <a href="#L257">257</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">onElementValidate</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(g,f,e,h){<span class="keyword">var</span> d=<span class="local-variable">this</span>.getValidator(e);<span class="keyword">if</span>(!g&amp;&amp;d.getError(f)){<span class="keyword">if</span>(h){f.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warning</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">var</span> c=<span class="local-variable">this</span>.makeAdvice(e,f,d.getError(f),h);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L258">
      <a href="#L258">258</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.insertAdvice(c,f);<span class="local-variable">this</span>.showAdvice(e,f);}<span class="keyword">else</span>{<span class="local-variable">this</span>.hideAdvice(e,f);}});},<span class="function">makeAdvice</span>:<span class="keyword">function</span>(d,f,c,g){<span class="keyword">var</span> e=(g)?<span class="local-variable">this</span>.warningPrefix:<span class="local-variable">this</span>.errorPrefix;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L259">
      <a href="#L259">259</a>
    </th>
    <td class="line-code">
      <pre>e+=(<span class="local-variable">this</span>.options.useTitles)?f.title||c:c;<span class="keyword">var</span> a=(g)?<span class="string"><span class="delimiter">&quot;</span><span class="content">warning-advice</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">validation-advice</span><span class="delimiter">&quot;</span></span>;<span class="keyword">var</span> b=<span class="local-variable">this</span>.getAdvice(d,f);<span class="keyword">if</span>(b){b=b.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span>,e);}<span class="keyword">else</span>{b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key">html</span>:e,<span class="key">styles</span>:{<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>},<span class="key">id</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">advice-</span><span class="delimiter">&quot;</span></span>+d+<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>+<span class="local-variable">this</span>.getFieldId(f)}).addClass(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L260">
      <a href="#L260">260</a>
    </th>
    <td class="line-code">
      <pre>}f.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">advice-</span><span class="delimiter">&quot;</span></span>+d,b);<span class="keyword">return</span> b;},<span class="function">getFieldId</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> a.id?a.id:a.id=<span class="string"><span class="delimiter">&quot;</span><span class="content">input_</span><span class="delimiter">&quot;</span></span>+a.name;},<span class="function">showAdvice</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> a=<span class="local-variable">this</span>.getAdvice(b,c);<span class="keyword">if</span>(a&amp;&amp;!c.retrieve(<span class="local-variable">this</span>.getPropName(b))&amp;&amp;(a.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>||a.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visiblity</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>||a.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>)==<span class="integer">0</span>)){c.store(<span class="local-variable">this</span>.getPropName(b),<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L261">
      <a href="#L261">261</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a.reveal){a.reveal();}<span class="keyword">else</span>{a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);}}},<span class="function">hideAdvice</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> a=<span class="local-variable">this</span>.getAdvice(b,c);<span class="keyword">if</span>(a&amp;&amp;c.retrieve(<span class="local-variable">this</span>.getPropName(b))){c.store(<span class="local-variable">this</span>.getPropName(b),<span class="predefined-constant">false</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L262">
      <a href="#L262">262</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a.dissolve){a.dissolve();}<span class="keyword">else</span>{a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);}}},<span class="function">getPropName</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="content">advice</span><span class="delimiter">&quot;</span></span>+a;},<span class="function">resetField</span>:<span class="keyword">function</span>(a){a=document.id(a);<span class="keyword">if</span>(!a){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L263">
      <a href="#L263">263</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.parent(a);a.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).each(<span class="keyword">function</span>(b){<span class="local-variable">this</span>.hideAdvice(b,a);},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getAllAdviceMessages</span>:<span class="keyword">function</span>(d,c){<span class="keyword">var</span> b=[];<span class="keyword">if</span>(d.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">ignoreValidation</span><span class="delimiter">&quot;</span></span>)&amp;&amp;!c){<span class="keyword">return</span> b;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L264">
      <a href="#L264">264</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> a=d.className.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>).some(<span class="keyword">function</span>(g){<span class="keyword">var</span> e=g.test(<span class="string"><span class="delimiter">&quot;</span><span class="content">^warn-</span><span class="delimiter">&quot;</span></span>)||d.hasClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">warnOnly</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(e){g=g.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^warn-</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">var</span> f=<span class="local-variable">this</span>.getValidator(g);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L265">
      <a href="#L265">265</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!f){<span class="keyword">return</span>;}b.push({<span class="key">message</span>:f.getError(d),<span class="key">warnOnly</span>:e,<span class="key">passed</span>:f.test(),<span class="key">validator</span>:f});},<span class="local-variable">this</span>);<span class="keyword">return</span> b;},<span class="function">getAdvice</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> b.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">advice-</span><span class="delimiter">&quot;</span></span>+a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L266">
      <a href="#L266">266</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">insertAdvice</span>:<span class="keyword">function</span>(a,c){<span class="keyword">var</span> b=c.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">validatorProps</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!b.msgPos||!document.id(b.msgPos)){<span class="keyword">if</span>(c.type.toLowerCase()==<span class="string"><span class="delimiter">&quot;</span><span class="content">radio</span><span class="delimiter">&quot;</span></span>){c.getParent().adopt(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L267">
      <a href="#L267">267</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{a.inject(document.id(c),<span class="string"><span class="delimiter">&quot;</span><span class="content">after</span><span class="delimiter">&quot;</span></span>);}}<span class="keyword">else</span>{document.id(b.msgPos).grab(a);}},<span class="function">validateField</span>:<span class="keyword">function</span>(f,e){<span class="keyword">var</span> a=<span class="local-variable">this</span>.parent(f,e);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.scrollToErrorsOnSubmit&amp;&amp;!a){<span class="keyword">var</span> b=document.id(<span class="local-variable">this</span>).getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">.validation-failed</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L268">
      <a href="#L268">268</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> c=document.id(<span class="local-variable">this</span>).getParent();<span class="keyword">while</span>(c!=document.body&amp;&amp;c.getScrollSize().y==c.getSize().y){c=c.getParent();}<span class="keyword">var</span> d=c.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">fvScroller</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!d&amp;&amp;window.Fx&amp;&amp;Fx.Scroll){d=<span class="keyword">new</span> Fx.Scroll(c,<span class="local-variable">this</span>.options.scrollFxOptions);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L269">
      <a href="#L269">269</a>
    </th>
    <td class="line-code">
      <pre>c.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">fvScroller</span><span class="delimiter">&quot;</span></span>,d);}<span class="keyword">if</span>(b){<span class="keyword">if</span>(d){d.toElement(b);}<span class="keyword">else</span>{c.scrollTo(c.getScroll().x,b.getPosition(c).y-<span class="integer">20</span>);}}}<span class="keyword">return</span> a;}});Form.Validator.addAllThese([[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-enforce-oncheck</span><span class="delimiter">&quot;</span></span>,{<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(a.checked){<span class="keyword">var</span> c=a.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L270">
      <a href="#L270">270</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!c){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}(b.toEnforce||document.id(b.enforceChildrenOf).getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">input, select, textarea</span><span class="delimiter">&quot;</span></span>)).map(<span class="keyword">function</span>(d){c.enforceField(d);});}<span class="keyword">return</span> <span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L271">
      <a href="#L271">271</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-ignore-oncheck</span><span class="delimiter">&quot;</span></span>,{<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(a.checked){<span class="keyword">var</span> c=a.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!c){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}(b.toIgnore||document.id(b.ignoreChildrenOf).getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">input, select, textarea</span><span class="delimiter">&quot;</span></span>)).each(<span class="keyword">function</span>(d){c.ignoreField(d);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L272">
      <a href="#L272">272</a>
    </th>
    <td class="line-code">
      <pre>c.resetField(d);});}<span class="keyword">return</span> <span class="predefined-constant">true</span>;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-nospace</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">noSpace</span><span class="delimiter">&quot;</span></span>);},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> !a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).test(<span class="regexp"><span class="delimiter">/</span><span class="char">\s</span><span class="delimiter">/</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L273">
      <a href="#L273">273</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-toggle-oncheck</span><span class="delimiter">&quot;</span></span>,{<span class="function">test</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d=b.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!d){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}<span class="keyword">var</span> a=c.toToggle||document.id(c.toToggleChildrenOf).getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">input, select, textarea</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L274">
      <a href="#L274">274</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!b.checked){a.each(<span class="keyword">function</span>(e){d.ignoreField(e);d.resetField(e);});}<span class="keyword">else</span>{a.each(<span class="keyword">function</span>(e){d.enforceField(e);});}<span class="keyword">return</span> <span class="predefined-constant">true</span>;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-reqchk-bynode</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">reqChkByNode</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L275">
      <a href="#L275">275</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span>(document.id(b.nodeId).getElements(b.selector||<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=checkbox], input[type=radio]</span><span class="delimiter">&quot;</span></span>)).some(<span class="keyword">function</span>(c){<span class="keyword">return</span> c.checked;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L276">
      <a href="#L276">276</a>
    </th>
    <td class="line-code">
      <pre>});}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-required-check</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> b.useTitle?a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>):Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">requiredChk</span><span class="delimiter">&quot;</span></span>);},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> !!a.checked;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L277">
      <a href="#L277">277</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-reqchk-byname</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">reqChkByName</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">label</span>:b.label||a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>)});},<span class="function">test</span>:<span class="keyword">function</span>(b,d){<span class="keyword">var</span> c=d.groupName||b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L278">
      <a href="#L278">278</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=<span class="predefined">$$</span>(document.getElementsByName(c)).some(<span class="keyword">function</span>(g,f){<span class="keyword">return</span> g.checked;});<span class="keyword">var</span> e=b.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(a&amp;&amp;e){e.resetField(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L279">
      <a href="#L279">279</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> a;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-match</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">match</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">matchName</span>:b.matchName||document.id(b.matchInput).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L280">
      <a href="#L280">280</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d=b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> a=document.id(c.matchInput)&amp;&amp;document.id(c.matchInput).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> d&amp;&amp;a?d==a:<span class="predefined-constant">true</span>;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-after-date</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">afterDate</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">label</span>:b.afterLabel||(b.afterElement?Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">startDate</span><span class="delimiter">&quot;</span></span>):Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">currentDate</span><span class="delimiter">&quot;</span></span>))});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L281">
      <a href="#L281">281</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d=document.id(c.afterElement)?Date.parse(document.id(c.afterElement).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)):<span class="keyword">new</span> Date();<span class="keyword">var</span> a=Date.parse(b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L282">
      <a href="#L282">282</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> a&amp;&amp;d?a&gt;=d:<span class="predefined-constant">true</span>;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-before-date</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">beforeDate</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">label</span>:b.beforeLabel||(b.beforeElement?Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">endDate</span><span class="delimiter">&quot;</span></span>):Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">currentDate</span><span class="delimiter">&quot;</span></span>))});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L283">
      <a href="#L283">283</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d=Date.parse(b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));<span class="keyword">var</span> a=document.id(c.beforeElement)?Date.parse(document.id(c.beforeElement).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)):<span class="keyword">new</span> Date();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L284">
      <a href="#L284">284</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> a&amp;&amp;d?a&gt;=d:<span class="predefined-constant">true</span>;}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-custom-required</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>);},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)!=b.emptyValue;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L285">
      <a href="#L285">285</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-same-month</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=document.id(b.sameMonthAs)&amp;&amp;document.id(b.sameMonthAs).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> d=a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(d!=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> Form.Validator.getMsg(c?<span class="string"><span class="delimiter">&quot;</span><span class="content">sameMonth</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">startMonth</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L286">
      <a href="#L286">286</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">test</span>:<span class="keyword">function</span>(a,b){<span class="keyword">var</span> d=Date.parse(a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));<span class="keyword">var</span> c=Date.parse(document.id(b.sameMonthAs)&amp;&amp;document.id(b.sameMonthAs).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>));<span class="keyword">return</span> d&amp;&amp;c?d.format(<span class="string"><span class="delimiter">&quot;</span><span class="content">%B</span><span class="delimiter">&quot;</span></span>)==c.format(<span class="string"><span class="delimiter">&quot;</span><span class="content">%B</span><span class="delimiter">&quot;</span></span>):<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L287">
      <a href="#L287">287</a>
    </th>
    <td class="line-code">
      <pre>}}],[<span class="string"><span class="delimiter">&quot;</span><span class="content">validate-cc-num</span><span class="delimiter">&quot;</span></span>,{<span class="function">errorMsg</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).ccNum.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">[^0-9]</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> Form.Validator.getMsg(<span class="string"><span class="delimiter">&quot;</span><span class="content">creditcard</span><span class="delimiter">&quot;</span></span>).substitute({<span class="key">length</span>:b.length});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L288">
      <a href="#L288">288</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(Form.Validator.getValidator(<span class="string"><span class="delimiter">&quot;</span><span class="content">IsEmpty</span><span class="delimiter">&quot;</span></span>).test(c)){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}<span class="keyword">var</span> g=c.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);g=g.replace(<span class="regexp"><span class="delimiter">/</span><span class="content">[^0-9]</span><span class="delimiter">/</span><span class="modifier">g</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);<span class="keyword">var</span> a=<span class="predefined-constant">false</span>;<span class="keyword">if</span>(g.test(<span class="regexp"><span class="delimiter">/</span><span class="content">^4[0-9]{12}([0-9]{3})?$</span><span class="delimiter">/</span></span>)){a=<span class="string"><span class="delimiter">&quot;</span><span class="content">Visa</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L289">
      <a href="#L289">289</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">if</span>(g.test(<span class="regexp"><span class="delimiter">/</span><span class="content">^5[1-5]([0-9]{14})$</span><span class="delimiter">/</span></span>)){a=<span class="string"><span class="delimiter">&quot;</span><span class="content">Master Card</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(g.test(<span class="regexp"><span class="delimiter">/</span><span class="content">^3[47][0-9]{13}$</span><span class="delimiter">/</span></span>)){a=<span class="string"><span class="delimiter">&quot;</span><span class="content">American Express</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(g.test(<span class="regexp"><span class="delimiter">/</span><span class="content">^6011[0-9]{12}$</span><span class="delimiter">/</span></span>)){a=<span class="string"><span class="delimiter">&quot;</span><span class="content">Discover</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L290">
      <a href="#L290">290</a>
    </th>
    <td class="line-code">
      <pre>}}}}<span class="keyword">if</span>(a){<span class="keyword">var</span> d=<span class="integer">0</span>;<span class="keyword">var</span> e=<span class="integer">0</span>;<span class="keyword">for</span>(<span class="keyword">var</span> b=g.length-<span class="integer">1</span>;b&gt;=<span class="integer">0</span>;--b){e=g.charAt(b).toInt();<span class="keyword">if</span>(e==<span class="integer">0</span>){<span class="keyword">continue</span>;}<span class="keyword">if</span>((g.length-b)%<span class="integer">2</span>==<span class="integer">0</span>){e+=e;}<span class="keyword">if</span>(e&gt;<span class="integer">9</span>){e=e.toString().charAt(<span class="integer">0</span>).toInt()+e.toString().charAt(<span class="integer">1</span>).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L291">
      <a href="#L291">291</a>
    </th>
    <td class="line-code">
      <pre>}d+=e;}<span class="keyword">if</span>((d%<span class="integer">10</span>)==<span class="integer">0</span>){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}}<span class="keyword">var</span> f=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;<span class="keyword">while</span>(g!=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>){f+=<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>+g.substr(<span class="integer">0</span>,<span class="integer">4</span>);g=g.substr(<span class="integer">4</span>);}c.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>).ignoreField(c);c.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>,f.clean());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L292">
      <a href="#L292">292</a>
    </th>
    <td class="line-code">
      <pre>c.getParent(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>).enforceField(c);<span class="keyword">return</span> <span class="predefined-constant">false</span>;}}]]);<span class="keyword">var</span> OverText=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events,Class.Occlude],<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">reposition</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">assert</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">focus</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>],<span class="key">options</span>:{<span class="key">element</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>,<span class="key">positionOptions</span>:{<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upperLeft</span><span class="delimiter">&quot;</span></span>,<span class="key">edge</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upperLeft</span><span class="delimiter">&quot;</span></span>,<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">4</span>,<span class="key">y</span>:<span class="integer">2</span>}},<span class="key">poll</span>:<span class="predefined-constant">false</span>,<span class="key">pollInterval</span>:<span class="integer">250</span>,<span class="key">wrap</span>:<span class="predefined-constant">false</span>},<span class="key">property</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">OverText</span><span class="delimiter">&quot;</span></span>,<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.element=document.id(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L293">
      <a href="#L293">293</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occlude()){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.attach(<span class="local-variable">this</span>.element);OverText.instances.push(<span class="local-variable">this</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.poll){<span class="local-variable">this</span>.poll();}<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L294">
      <a href="#L294">294</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.element;},<span class="function">attach</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.options.textOverride||<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">alt</span><span class="delimiter">&quot;</span></span>)||<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!a){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L295">
      <a href="#L295">295</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.text=<span class="keyword">new</span> Element(<span class="local-variable">this</span>.options.element,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">overTxtLabel</span><span class="delimiter">&quot;</span></span>,<span class="key">styles</span>:{<span class="key">lineHeight</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">normal</span><span class="delimiter">&quot;</span></span>,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">cursor</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>},<span class="key">html</span>:a,<span class="key">events</span>:{<span class="key">click</span>:<span class="local-variable">this</span>.hide.pass(<span class="local-variable">this</span>.options.element==<span class="string"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>)}}).inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">after</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L296">
      <a href="#L296">296</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.element==<span class="string"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>){<span class="keyword">if</span>(!<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">input_</span><span class="delimiter">&quot;</span></span>+<span class="keyword">new</span> Date().getTime());}<span class="local-variable">this</span>.text.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">for</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L297">
      <a href="#L297">297</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.wrap){<span class="local-variable">this</span>.textHolder=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key">styles</span>:{<span class="key">lineHeight</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">normal</span><span class="delimiter">&quot;</span></span>,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">overTxtWrapper</span><span class="delimiter">&quot;</span></span>}).adopt(<span class="local-variable">this</span>.text).inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">before</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L298">
      <a href="#L298">298</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.element.addEvents({<span class="key">focus</span>:<span class="local-variable">this</span>.focus,<span class="key">blur</span>:<span class="local-variable">this</span>.assert,<span class="key">change</span>:<span class="local-variable">this</span>.assert}).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">OverTextDiv</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.text);window.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.reposition.bind(<span class="local-variable">this</span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L299">
      <a href="#L299">299</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.assert(<span class="predefined-constant">true</span>);<span class="local-variable">this</span>.reposition();},<span class="function">wrap</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.element==<span class="string"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span>){<span class="keyword">if</span>(!<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">input_</span><span class="delimiter">&quot;</span></span>+<span class="keyword">new</span> Date().getTime());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L300">
      <a href="#L300">300</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.text.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">for</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>));}},<span class="function">startPolling</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.pollingPaused=<span class="predefined-constant">false</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.poll();},<span class="function">poll</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.poller&amp;&amp;!a){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L301">
      <a href="#L301">301</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> <span class="function">b</span>=<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="local-variable">this</span>.pollingPaused){<span class="local-variable">this</span>.assert(<span class="predefined-constant">true</span>);}}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(a){<span class="predefined">$clear</span>(<span class="local-variable">this</span>.poller);}<span class="keyword">else</span>{<span class="local-variable">this</span>.poller=b.periodical(<span class="local-variable">this</span>.options.pollInterval,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L302">
      <a href="#L302">302</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">stopPolling</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.pollingPaused=<span class="predefined-constant">true</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.poll(<span class="predefined-constant">true</span>);},<span class="function">focus</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.text&amp;&amp;(!<span class="local-variable">this</span>.text.isDisplayed()||<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">disabled</span><span class="delimiter">&quot;</span></span>))){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L303">
      <a href="#L303">303</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.hide();},<span class="function">hide</span>:<span class="keyword">function</span>(c,a){<span class="keyword">if</span>(<span class="local-variable">this</span>.text&amp;&amp;(<span class="local-variable">this</span>.text.isDisplayed()&amp;&amp;(!<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">disabled</span><span class="delimiter">&quot;</span></span>)||a))){<span class="local-variable">this</span>.text.hide();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">textHide</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.text,<span class="local-variable">this</span>.element]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L304">
      <a href="#L304">304</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.pollingPaused=<span class="predefined-constant">true</span>;<span class="keyword">try</span>{<span class="keyword">if</span>(!c){<span class="local-variable">this</span>.element.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">focus</span><span class="delimiter">&quot;</span></span>);}<span class="local-variable">this</span>.element.focus();}<span class="keyword">catch</span>(b){}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">show</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.text&amp;&amp;!<span class="local-variable">this</span>.text.isDisplayed()){<span class="local-variable">this</span>.text.show();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L305">
      <a href="#L305">305</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.reposition();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">textShow</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.text,<span class="local-variable">this</span>.element]);<span class="local-variable">this</span>.pollingPaused=<span class="predefined-constant">false</span>;}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">assert</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>[<span class="local-variable">this</span>.test()?<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>](a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L306">
      <a href="#L306">306</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">test</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.element.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> !a;},<span class="function">reposition</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.assert(<span class="predefined-constant">true</span>);<span class="keyword">if</span>(!<span class="local-variable">this</span>.element.isVisible()){<span class="keyword">return</span> <span class="local-variable">this</span>.stopPolling().hide();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L307">
      <a href="#L307">307</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.text&amp;&amp;<span class="local-variable">this</span>.test()){<span class="local-variable">this</span>.text.position(<span class="predefined">$merge</span>(<span class="local-variable">this</span>.options.positionOptions,{<span class="key">relativeTo</span>:<span class="local-variable">this</span>.element}));}<span class="keyword">return</span> <span class="local-variable">this</span>;}});OverText.instances=[];<span class="predefined">$extend</span>(OverText,{<span class="function">each</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> OverText.instances.map(<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(c.element&amp;&amp;c.text){<span class="keyword">return</span> a.apply(OverText,[c,b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L308">
      <a href="#L308">308</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="predefined-constant">null</span>;});},<span class="function">update</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> OverText.each(<span class="keyword">function</span>(a){<span class="keyword">return</span> a.reposition();});},<span class="function">hideAll</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> OverText.each(<span class="keyword">function</span>(a){<span class="keyword">return</span> a.hide(<span class="predefined-constant">true</span>,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L309">
      <a href="#L309">309</a>
    </th>
    <td class="line-code">
      <pre>});},<span class="function">showAll</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> OverText.each(<span class="keyword">function</span>(a){<span class="keyword">return</span> a.show();});}});<span class="keyword">if</span>(window.Fx&amp;&amp;Fx.Reveal){Fx.Reveal.implement({<span class="key">hideInputs</span>:Browser.Engine.trident?<span class="string"><span class="delimiter">&quot;</span><span class="content">select, input, textarea, object, embed, .overTxtLabel</span><span class="delimiter">&quot;</span></span>:<span class="predefined-constant">false</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L310">
      <a href="#L310">310</a>
    </th>
    <td class="line-code">
      <pre>}Fx.Elements=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.CSS,<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.elements=<span class="local-variable">this</span>.subject=<span class="predefined">$$</span>(b);<span class="local-variable">this</span>.parent(a);},<span class="function">compute</span>:<span class="keyword">function</span>(g,h,j){<span class="keyword">var</span> c={};<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> g){<span class="keyword">var</span> a=g[d],e=h[d],f=c[d]={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L311">
      <a href="#L311">311</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">for</span>(<span class="keyword">var</span> b <span class="keyword">in</span> a){f[b]=<span class="local-variable">this</span>.parent(a[b],e[b],j);}}<span class="keyword">return</span> c;},<span class="function">set</span>:<span class="keyword">function</span>(b){<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> b){<span class="keyword">var</span> a=b[c];<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> a){<span class="local-variable">this</span>.render(<span class="local-variable">this</span>.elements[c],d,a[d],<span class="local-variable">this</span>.options.unit);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L312">
      <a href="#L312">312</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">start</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(!<span class="local-variable">this</span>.check(c)){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="keyword">var</span> h={},j={};<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> c){<span class="keyword">var</span> f=c[d],a=h[d]={},g=j[d]={};<span class="keyword">for</span>(<span class="keyword">var</span> b <span class="keyword">in</span> f){<span class="keyword">var</span> e=<span class="local-variable">this</span>.prepare(<span class="local-variable">this</span>.elements[d],b,f[b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L313">
      <a href="#L313">313</a>
    </th>
    <td class="line-code">
      <pre>a[b]=e.from;g[b]=e.to;}}<span class="keyword">return</span> <span class="local-variable">this</span>.parent(h,j);}});<span class="keyword">var</span> Accordion=Fx.Accordion=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.Elements,<span class="key">options</span>:{<span class="key">display</span>:<span class="integer">0</span>,<span class="key">show</span>:<span class="predefined-constant">false</span>,<span class="key">height</span>:<span class="predefined-constant">true</span>,<span class="key">width</span>:<span class="predefined-constant">false</span>,<span class="key">opacity</span>:<span class="predefined-constant">true</span>,<span class="key">alwaysHide</span>:<span class="predefined-constant">false</span>,<span class="key">trigger</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>,<span class="key">initialDisplayFx</span>:<span class="predefined-constant">true</span>,<span class="key">returnHeightToAuto</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> c=Array.link(<span class="local-variable">arguments</span>,{<span class="key">container</span>:Element.type,<span class="key">options</span>:Object.type,<span class="key">togglers</span>:<span class="predefined">$defined</span>,<span class="key">elements</span>:<span class="predefined">$defined</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L314">
      <a href="#L314">314</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.parent(c.elements,c.options);<span class="local-variable">this</span>.togglers=<span class="predefined">$$</span>(c.togglers);<span class="local-variable">this</span>.container=document.id(c.container);<span class="local-variable">this</span>.previous=-<span class="integer">1</span>;<span class="local-variable">this</span>.internalChain=<span class="keyword">new</span> Chain();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L315">
      <a href="#L315">315</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.alwaysHide){<span class="local-variable">this</span>.options.wait=<span class="predefined-constant">true</span>;}<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.show)){<span class="local-variable">this</span>.options.display=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.previous=<span class="local-variable">this</span>.options.show;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.start){<span class="local-variable">this</span>.options.display=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L316">
      <a href="#L316">316</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.options.show=<span class="predefined-constant">false</span>;}<span class="local-variable">this</span>.effects={};<span class="keyword">if</span>(<span class="local-variable">this</span>.options.opacity){<span class="local-variable">this</span>.effects.opacity=<span class="string"><span class="delimiter">&quot;</span><span class="content">fullOpacity</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.width){<span class="local-variable">this</span>.effects.width=<span class="local-variable">this</span>.options.fixedWidth?<span class="string"><span class="delimiter">&quot;</span><span class="content">fullWidth</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">offsetWidth</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L317">
      <a href="#L317">317</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.height){<span class="local-variable">this</span>.effects.height=<span class="local-variable">this</span>.options.fixedHeight?<span class="string"><span class="delimiter">&quot;</span><span class="content">fullHeight</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">scrollHeight</span><span class="delimiter">&quot;</span></span>;}<span class="keyword">for</span>(<span class="keyword">var</span> b=<span class="integer">0</span>,a=<span class="local-variable">this</span>.togglers.length;b&lt;a;b++){<span class="local-variable">this</span>.addSection(<span class="local-variable">this</span>.togglers[b],<span class="local-variable">this</span>.elements[b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L318">
      <a href="#L318">318</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.elements.each(<span class="keyword">function</span>(e,d){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.show===d){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">active</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.togglers[d],e]);}<span class="keyword">else</span>{<span class="keyword">for</span>(<span class="keyword">var</span> f <span class="keyword">in</span> <span class="local-variable">this</span>.effects){e.setStyle(f,<span class="integer">0</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L319">
      <a href="#L319">319</a>
    </th>
    <td class="line-code">
      <pre>}}},<span class="local-variable">this</span>);<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.display)){<span class="local-variable">this</span>.display(<span class="local-variable">this</span>.options.display,<span class="local-variable">this</span>.options.initialDisplayFx);}<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.internalChain.callChain.bind(<span class="local-variable">this</span>.internalChain));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L320">
      <a href="#L320">320</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">addSection</span>:<span class="keyword">function</span>(e,c){e=document.id(e);c=document.id(c);<span class="keyword">var</span> f=<span class="local-variable">this</span>.togglers.contains(e);<span class="local-variable">this</span>.togglers.include(e);<span class="local-variable">this</span>.elements.include(c);<span class="keyword">var</span> a=<span class="local-variable">this</span>.togglers.indexOf(e);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L321">
      <a href="#L321">321</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.display.bind(<span class="local-variable">this</span>,a);e.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">accordion:display</span><span class="delimiter">&quot;</span></span>,b);e.addEvent(<span class="local-variable">this</span>.options.trigger,b);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.height){c.setStyles({<span class="key"><span class="delimiter">&quot;</span><span class="content">padding-top</span><span class="delimiter">&quot;</span></span>:<span class="integer">0</span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">border-top</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">padding-bottom</span><span class="delimiter">&quot;</span></span>:<span class="integer">0</span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">border-bottom</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L322">
      <a href="#L322">322</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.width){c.setStyles({<span class="key"><span class="delimiter">&quot;</span><span class="content">padding-left</span><span class="delimiter">&quot;</span></span>:<span class="integer">0</span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">border-left</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">padding-right</span><span class="delimiter">&quot;</span></span>:<span class="integer">0</span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">border-right</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>});}c.fullOpacity=<span class="integer">1</span>;<span class="keyword">if</span>(<span class="local-variable">this</span>.options.fixedWidth){c.fullWidth=<span class="local-variable">this</span>.options.fixedWidth;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L323">
      <a href="#L323">323</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.fixedHeight){c.fullHeight=<span class="local-variable">this</span>.options.fixedHeight;}c.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">overflow</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(!f){<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> <span class="local-variable">this</span>.effects){c.setStyle(d,<span class="integer">0</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L324">
      <a href="#L324">324</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.togglers.each(<span class="keyword">function</span>(a){a.removeEvent(<span class="local-variable">this</span>.options.trigger,a.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">accordion:display</span><span class="delimiter">&quot;</span></span>));},<span class="local-variable">this</span>);},<span class="function">display</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(!<span class="local-variable">this</span>.check(a,b)){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L325">
      <a href="#L325">325</a>
    </th>
    <td class="line-code">
      <pre>}b=<span class="predefined">$pick</span>(b,<span class="predefined-constant">true</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.returnHeightToAuto){<span class="keyword">var</span> d=<span class="local-variable">this</span>.elements[<span class="local-variable">this</span>.previous];<span class="keyword">if</span>(d&amp;&amp;!<span class="local-variable">this</span>.selfHidden){<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> <span class="local-variable">this</span>.effects){d.setStyle(c,d[<span class="local-variable">this</span>.effects[c]]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L326">
      <a href="#L326">326</a>
    </th>
    <td class="line-code">
      <pre>}}}a=(<span class="predefined">$type</span>(a)==<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>)?<span class="local-variable">this</span>.elements.indexOf(a):a;<span class="keyword">if</span>((<span class="local-variable">this</span>.timer&amp;&amp;<span class="local-variable">this</span>.options.wait)||(a===<span class="local-variable">this</span>.previous&amp;&amp;!<span class="local-variable">this</span>.options.alwaysHide)){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.previous=a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L327">
      <a href="#L327">327</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> e={};<span class="local-variable">this</span>.elements.each(<span class="keyword">function</span>(h,g){e[g]={};<span class="keyword">var</span> f;<span class="keyword">if</span>(g!=a){f=<span class="predefined-constant">true</span>;}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.options.alwaysHide&amp;&amp;((h.offsetHeight&gt;<span class="integer">0</span>&amp;&amp;<span class="local-variable">this</span>.options.height)||h.offsetWidth&gt;<span class="integer">0</span>&amp;&amp;<span class="local-variable">this</span>.options.width)){f=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L328">
      <a href="#L328">328</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.selfHidden=<span class="predefined-constant">true</span>;}}<span class="local-variable">this</span>.fireEvent(f?<span class="string"><span class="delimiter">&quot;</span><span class="content">background</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">active</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.togglers[g],h]);<span class="keyword">for</span>(<span class="keyword">var</span> j <span class="keyword">in</span> <span class="local-variable">this</span>.effects){e[g][j]=f?<span class="integer">0</span>:h[<span class="local-variable">this</span>.effects[j]];}},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L329">
      <a href="#L329">329</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.internalChain.chain(<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.returnHeightToAuto&amp;&amp;!<span class="local-variable">this</span>.selfHidden){<span class="keyword">var</span> f=<span class="local-variable">this</span>.elements[a];<span class="keyword">if</span>(f){f.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">auto</span><span class="delimiter">&quot;</span></span>);}}}.bind(<span class="local-variable">this</span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L330">
      <a href="#L330">330</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> b?<span class="local-variable">this</span>.start(e):<span class="local-variable">this</span>.set(e);}});Fx.Move=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.Morph,<span class="key">options</span>:{<span class="key">relativeTo</span>:document.body,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>,<span class="key">edge</span>:<span class="predefined-constant">false</span>,<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>}},<span class="function">start</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.parent(<span class="local-variable">this</span>.element.position(<span class="predefined">$merge</span>(<span class="local-variable">this</span>.options,a,{<span class="key">returnPos</span>:<span class="predefined-constant">true</span>})));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L331">
      <a href="#L331">331</a>
    </th>
    <td class="line-code">
      <pre>}});Element.Properties.move={<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b){b.cancel();}<span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">move:options</span><span class="delimiter">&quot;</span></span>,<span class="predefined">$extend</span>({<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>},a));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L332">
      <a href="#L332">332</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">move:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>,a);}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Fx.Move(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">move:options</span><span class="delimiter">&quot;</span></span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L333">
      <a href="#L333">333</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>);}};Element.implement({<span class="function">move</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>).start(a);<span class="keyword">return</span> <span class="local-variable">this</span>;}});Fx.Reveal=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.Morph,<span class="key">options</span>:{<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="key">styles</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>],<span class="key">transitionOpacity</span>:!Browser.Engine.trident4,<span class="key">mode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>,<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>,<span class="key">hideInputs</span>:Browser.Engine.trident?<span class="string"><span class="delimiter">&quot;</span><span class="content">select, input, textarea, object, embed</span><span class="delimiter">&quot;</span></span>:<span class="predefined-constant">false</span>},<span class="function">dissolve</span>:<span class="keyword">function</span>(){<span class="keyword">try</span>{<span class="keyword">if</span>(!<span class="local-variable">this</span>.hiding&amp;&amp;!<span class="local-variable">this</span>.showing){<span class="keyword">if</span>(<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.hiding=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L334">
      <a href="#L334">334</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.showing=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.hidden=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.cssText=<span class="local-variable">this</span>.element.style.cssText;<span class="keyword">var</span> d=<span class="local-variable">this</span>.element.getComputedSize({<span class="key">styles</span>:<span class="local-variable">this</span>.options.styles,<span class="key">mode</span>:<span class="local-variable">this</span>.options.mode});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L335">
      <a href="#L335">335</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.transitionOpacity){d.opacity=<span class="integer">1</span>;}<span class="keyword">var</span> b={};<span class="predefined">$each</span>(d,<span class="keyword">function</span>(f,e){b[e]=[f,<span class="integer">0</span>];},<span class="local-variable">this</span>);<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">overflow</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L336">
      <a href="#L336">336</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=<span class="local-variable">this</span>.options.hideInputs?<span class="local-variable">this</span>.element.getElements(<span class="local-variable">this</span>.options.hideInputs):<span class="predefined-constant">null</span>;<span class="local-variable">this</span>.<span class="predefined">$chain</span>.unshift(<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.hidden){<span class="local-variable">this</span>.hiding=<span class="predefined-constant">false</span>;<span class="predefined">$each</span>(d,<span class="keyword">function</span>(f,e){d[e]=f;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L337">
      <a href="#L337">337</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="local-variable">this</span>.element.style.cssText=<span class="local-variable">this</span>.cssText;<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(a){a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visibility</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>);}}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L338">
      <a href="#L338">338</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.callChain();}.bind(<span class="local-variable">this</span>));<span class="keyword">if</span>(a){a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visibility</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>);}<span class="local-variable">this</span>.start(b);}<span class="keyword">else</span>{<span class="local-variable">this</span>.callChain.delay(<span class="integer">10</span>,<span class="local-variable">this</span>);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L339">
      <a href="#L339">339</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.options.link==<span class="string"><span class="delimiter">&quot;</span><span class="content">chain</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.chain(<span class="local-variable">this</span>.dissolve.bind(<span class="local-variable">this</span>));}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.options.link==<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>&amp;&amp;!<span class="local-variable">this</span>.hiding){<span class="local-variable">this</span>.cancel();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L340">
      <a href="#L340">340</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.dissolve();}}}}<span class="keyword">catch</span>(c){<span class="local-variable">this</span>.hiding=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.callChain.delay(<span class="integer">10</span>,<span class="local-variable">this</span>);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L341">
      <a href="#L341">341</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">reveal</span>:<span class="keyword">function</span>(){<span class="keyword">try</span>{<span class="keyword">if</span>(!<span class="local-variable">this</span>.showing&amp;&amp;!<span class="local-variable">this</span>.hiding){<span class="keyword">if</span>(<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visiblity</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>)==<span class="integer">0</span>){<span class="local-variable">this</span>.showing=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L342">
      <a href="#L342">342</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.hiding=<span class="local-variable">this</span>.hidden=<span class="predefined-constant">false</span>;<span class="keyword">var</span> d;<span class="local-variable">this</span>.cssText=<span class="local-variable">this</span>.element.style.cssText;<span class="local-variable">this</span>.element.measure(<span class="keyword">function</span>(){d=<span class="local-variable">this</span>.element.getComputedSize({<span class="key">styles</span>:<span class="local-variable">this</span>.options.styles,<span class="key">mode</span>:<span class="local-variable">this</span>.options.mode});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L343">
      <a href="#L343">343</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>));<span class="predefined">$each</span>(d,<span class="keyword">function</span>(f,e){d[e]=f;});<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.heightOverride)){d.height=<span class="local-variable">this</span>.options.heightOverride.toInt();}<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.widthOverride)){d.width=<span class="local-variable">this</span>.options.widthOverride.toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L344">
      <a href="#L344">344</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.transitionOpacity){<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="integer">0</span>);d.opacity=<span class="integer">1</span>;}<span class="keyword">var</span> b={<span class="key">height</span>:<span class="integer">0</span>,<span class="key">display</span>:<span class="local-variable">this</span>.options.display};<span class="predefined">$each</span>(d,<span class="keyword">function</span>(f,e){b[e]=<span class="integer">0</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L345">
      <a href="#L345">345</a>
    </th>
    <td class="line-code">
      <pre>});<span class="local-variable">this</span>.element.setStyles(<span class="predefined">$merge</span>(b,{<span class="key">overflow</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>}));<span class="keyword">var</span> a=<span class="local-variable">this</span>.options.hideInputs?<span class="local-variable">this</span>.element.getElements(<span class="local-variable">this</span>.options.hideInputs):<span class="predefined-constant">null</span>;<span class="keyword">if</span>(a){a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visibility</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L346">
      <a href="#L346">346</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.start(d);<span class="local-variable">this</span>.<span class="predefined">$chain</span>.unshift(<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.style.cssText=<span class="local-variable">this</span>.cssText;<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.display);<span class="keyword">if</span>(!<span class="local-variable">this</span>.hidden){<span class="local-variable">this</span>.showing=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L347">
      <a href="#L347">347</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(a){a.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visibility</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>);}<span class="local-variable">this</span>.callChain();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}.bind(<span class="local-variable">this</span>));}<span class="keyword">else</span>{<span class="local-variable">this</span>.callChain();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L348">
      <a href="#L348">348</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.options.link==<span class="string"><span class="delimiter">&quot;</span><span class="content">chain</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.chain(<span class="local-variable">this</span>.reveal.bind(<span class="local-variable">this</span>));}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.options.link==<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>&amp;&amp;!<span class="local-variable">this</span>.showing){<span class="local-variable">this</span>.cancel();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L349">
      <a href="#L349">349</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.reveal();}}}}<span class="keyword">catch</span>(c){<span class="local-variable">this</span>.element.setStyles({<span class="key">display</span>:<span class="local-variable">this</span>.options.display,<span class="key">visiblity</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>,<span class="key">opacity</span>:<span class="integer">1</span>});<span class="local-variable">this</span>.showing=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.callChain.delay(<span class="integer">10</span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L350">
      <a href="#L350">350</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">toggle</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visiblity</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>)==<span class="integer">0</span>){<span class="local-variable">this</span>.reveal();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L351">
      <a href="#L351">351</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="local-variable">this</span>.dissolve();}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">cancel</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.parent.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="local-variable">this</span>.element.style.cssText=<span class="local-variable">this</span>.cssText;<span class="local-variable">this</span>.hidding=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.showing=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L352">
      <a href="#L352">352</a>
    </th>
    <td class="line-code">
      <pre>}});Element.Properties.reveal={<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b){b.cancel();}<span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal:options</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L353">
      <a href="#L353">353</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,a);}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Fx.Reveal(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal:options</span><span class="delimiter">&quot;</span></span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L354">
      <a href="#L354">354</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>);}};Element.Properties.dissolve=Element.Properties.reveal;Element.implement({<span class="function">reveal</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,a).reveal();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L355">
      <a href="#L355">355</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">dissolve</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,a).dissolve();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">nix</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.link(<span class="local-variable">arguments</span>,{<span class="key">destroy</span>:Boolean.type,<span class="key">options</span>:Object.type});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L356">
      <a href="#L356">356</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,a.options).dissolve().chain(<span class="keyword">function</span>(){<span class="local-variable">this</span>[a.destroy?<span class="string"><span class="delimiter">&quot;</span><span class="content">destroy</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dispose</span><span class="delimiter">&quot;</span></span>]();}.bind(<span class="local-variable">this</span>));<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">wink</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=Array.link(<span class="local-variable">arguments</span>,{<span class="key">duration</span>:Number.type,<span class="key">options</span>:Object.type});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L357">
      <a href="#L357">357</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal</span><span class="delimiter">&quot;</span></span>,b.options);a.reveal().chain(<span class="keyword">function</span>(){(<span class="keyword">function</span>(){a.dissolve();}).delay(b.duration||<span class="integer">2000</span>);});}});Fx.Scroll=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx,<span class="key">options</span>:{<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>},<span class="key">wheelStops</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.element=<span class="local-variable">this</span>.subject=document.id(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L358">
      <a href="#L358">358</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.parent(a);<span class="keyword">var</span> d=<span class="local-variable">this</span>.cancel.bind(<span class="local-variable">this</span>,<span class="predefined-constant">false</span>);<span class="keyword">if</span>(<span class="predefined">$type</span>(<span class="local-variable">this</span>.element)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.element=document.id(<span class="local-variable">this</span>.element.getDocument().body);}<span class="keyword">var</span> c=<span class="local-variable">this</span>.element;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L359">
      <a href="#L359">359</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.wheelStops){<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){c.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousewheel</span><span class="delimiter">&quot;</span></span>,d);},<span class="predefined-constant">true</span>);<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){c.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousewheel</span><span class="delimiter">&quot;</span></span>,d);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L360">
      <a href="#L360">360</a>
    </th>
    <td class="line-code">
      <pre>},<span class="predefined-constant">true</span>);}},<span class="function">set</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.flatten(<span class="local-variable">arguments</span>);<span class="keyword">if</span>(Browser.Engine.gecko){a=[Math.round(a[<span class="integer">0</span>]),Math.round(a[<span class="integer">1</span>])];}<span class="local-variable">this</span>.element.scrollTo(a[<span class="integer">0</span>],a[<span class="integer">1</span>]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L361">
      <a href="#L361">361</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">compute</span>:<span class="keyword">function</span>(c,b,a){<span class="keyword">return</span>[<span class="integer">0</span>,<span class="integer">1</span>].map(<span class="keyword">function</span>(d){<span class="keyword">return</span> Fx.compute(c[d],b[d],a);});},<span class="function">start</span>:<span class="keyword">function</span>(c,g){<span class="keyword">if</span>(!<span class="local-variable">this</span>.check(c,g)){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="keyword">var</span> e=<span class="local-variable">this</span>.element.getScrollSize(),b=<span class="local-variable">this</span>.element.getScroll(),d={<span class="key">x</span>:c,<span class="key">y</span>:g};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L362">
      <a href="#L362">362</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">for</span>(<span class="keyword">var</span> f <span class="keyword">in</span> d){<span class="keyword">var</span> a=e[f];<span class="keyword">if</span>(<span class="predefined">$chk</span>(d[f])){d[f]=(<span class="predefined">$type</span>(d[f])==<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>)?d[f]:a;}<span class="keyword">else</span>{d[f]=b[f];}d[f]+=<span class="local-variable">this</span>.options.offset[f];}<span class="keyword">return</span> <span class="local-variable">this</span>.parent([b.x,b.y],[d.x,d.y]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L363">
      <a href="#L363">363</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">toTop</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="predefined-constant">false</span>,<span class="integer">0</span>);},<span class="function">toLeft</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="integer">0</span>,<span class="predefined-constant">false</span>);},<span class="function">toRight</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">false</span>);},<span class="function">toBottom</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="predefined-constant">false</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L364">
      <a href="#L364">364</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">toElement</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> a=document.id(b).getPosition(<span class="local-variable">this</span>.element);<span class="keyword">return</span> <span class="local-variable">this</span>.start(a.x,a.y);},<span class="function">scrollIntoView</span>:<span class="keyword">function</span>(c,e,d){e=e?<span class="predefined">$splat</span>(e):[<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L365">
      <a href="#L365">365</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> h={};c=document.id(c);<span class="keyword">var</span> f=c.getPosition(<span class="local-variable">this</span>.element);<span class="keyword">var</span> i=c.getSize();<span class="keyword">var</span> g=<span class="local-variable">this</span>.element.getScroll();<span class="keyword">var</span> a=<span class="local-variable">this</span>.element.getSize();<span class="keyword">var</span> b={<span class="key">x</span>:f.x+i.x,<span class="key">y</span>:f.y+i.y};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L366">
      <a href="#L366">366</a>
    </th>
    <td class="line-code">
      <pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(j){<span class="keyword">if</span>(e.contains(j)){<span class="keyword">if</span>(b[j]&gt;g[j]+a[j]){h[j]=b[j]-a[j];}<span class="keyword">if</span>(f[j]&lt;g[j]){h[j]=f[j];}}<span class="keyword">if</span>(h[j]==<span class="predefined-constant">null</span>){h[j]=g[j];}<span class="keyword">if</span>(d&amp;&amp;d[j]){h[j]=h[j]+d[j];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L367">
      <a href="#L367">367</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="local-variable">this</span>);<span class="keyword">if</span>(h.x!=g.x||h.y!=g.y){<span class="local-variable">this</span>.start(h.x,h.y);}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">scrollToCenter</span>:<span class="keyword">function</span>(c,e,d){e=e?<span class="predefined">$splat</span>(e):[<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>];c=<span class="predefined">$</span>(c);<span class="keyword">var</span> h={},f=c.getPosition(<span class="local-variable">this</span>.element),i=c.getSize(),g=<span class="local-variable">this</span>.element.getScroll(),a=<span class="local-variable">this</span>.element.getSize(),b={<span class="key">x</span>:f.x+i.x,<span class="key">y</span>:f.y+i.y};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L368">
      <a href="#L368">368</a>
    </th>
    <td class="line-code">
      <pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(j){<span class="keyword">if</span>(e.contains(j)){h[j]=f[j]-(a[j]-i[j])/<span class="integer">2</span>;}<span class="keyword">if</span>(h[j]==<span class="predefined-constant">null</span>){h[j]=g[j];}<span class="keyword">if</span>(d&amp;&amp;d[j]){h[j]=h[j]+d[j];}},<span class="local-variable">this</span>);<span class="keyword">if</span>(h.x!=g.x||h.y!=g.y){<span class="local-variable">this</span>.start(h.x,h.y);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L369">
      <a href="#L369">369</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;}});Fx.Slide=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx,<span class="key">options</span>:{<span class="key">mode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>,<span class="key">hideOverflow</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){<span class="local-variable">this</span>.open=(<span class="local-variable">this</span>.wrapper[<span class="string"><span class="delimiter">&quot;</span><span class="content">offset</span><span class="delimiter">&quot;</span></span>+<span class="local-variable">this</span>.layout.capitalize()]!=<span class="integer">0</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L370">
      <a href="#L370">370</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.open&amp;&amp;Browser.Engine.webkit419){<span class="local-variable">this</span>.element.dispose().inject(<span class="local-variable">this</span>.wrapper);}},<span class="predefined-constant">true</span>);<span class="local-variable">this</span>.element=<span class="local-variable">this</span>.subject=document.id(b);<span class="local-variable">this</span>.parent(a);<span class="keyword">var</span> d=<span class="local-variable">this</span>.element.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">wrapper</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L371">
      <a href="#L371">371</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> c=<span class="local-variable">this</span>.element.getStyles(<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">overflow</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.hideOverflow){c=<span class="predefined">$extend</span>(c,{<span class="key">overflow</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>});}<span class="local-variable">this</span>.wrapper=d||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key">styles</span>:c}).wraps(<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L372">
      <a href="#L372">372</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">wrapper</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.wrapper).setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>,<span class="integer">0</span>);<span class="local-variable">this</span>.now=[];<span class="local-variable">this</span>.open=<span class="predefined-constant">true</span>;},<span class="function">vertical</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.margin=<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.layout=<span class="string"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L373">
      <a href="#L373">373</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.offset=<span class="local-variable">this</span>.element.offsetHeight;},<span class="function">horizontal</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.margin=<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-left</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.layout=<span class="string"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.offset=<span class="local-variable">this</span>.element.offsetWidth;},<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.element.setStyle(<span class="local-variable">this</span>.margin,a[<span class="integer">0</span>]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L374">
      <a href="#L374">374</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.wrapper.setStyle(<span class="local-variable">this</span>.layout,a[<span class="integer">1</span>]);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">compute</span>:<span class="keyword">function</span>(c,b,a){<span class="keyword">return</span>[<span class="integer">0</span>,<span class="integer">1</span>].map(<span class="keyword">function</span>(d){<span class="keyword">return</span> Fx.compute(c[d],b[d],a);});},<span class="function">start</span>:<span class="keyword">function</span>(b,e){<span class="keyword">if</span>(!<span class="local-variable">this</span>.check(b,e)){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L375">
      <a href="#L375">375</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>[e||<span class="local-variable">this</span>.options.mode]();<span class="keyword">var</span> d=<span class="local-variable">this</span>.element.getStyle(<span class="local-variable">this</span>.margin).toInt();<span class="keyword">var</span> c=<span class="local-variable">this</span>.wrapper.getStyle(<span class="local-variable">this</span>.layout).toInt();<span class="keyword">var</span> a=[[d,c],[<span class="integer">0</span>,<span class="local-variable">this</span>.offset]];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L376">
      <a href="#L376">376</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> g=[[d,c],[-<span class="local-variable">this</span>.offset,<span class="integer">0</span>]];<span class="keyword">var</span> f;<span class="keyword">switch</span>(b){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">in</span><span class="delimiter">&quot;</span></span>:f=a;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">out</span><span class="delimiter">&quot;</span></span>:f=g;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">toggle</span><span class="delimiter">&quot;</span></span>:f=(c==<span class="integer">0</span>)?a:g;}<span class="keyword">return</span> <span class="local-variable">this</span>.parent(f[<span class="integer">0</span>],f[<span class="integer">1</span>]);},<span class="function">slideIn</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="string"><span class="delimiter">&quot;</span><span class="content">in</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L377">
      <a href="#L377">377</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">slideOut</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="string"><span class="delimiter">&quot;</span><span class="content">out</span><span class="delimiter">&quot;</span></span>,a);},<span class="function">hide</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>[a||<span class="local-variable">this</span>.options.mode]();<span class="local-variable">this</span>.open=<span class="predefined-constant">false</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.set([-<span class="local-variable">this</span>.offset,<span class="integer">0</span>]);},<span class="function">show</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>[a||<span class="local-variable">this</span>.options.mode]();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L378">
      <a href="#L378">378</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.open=<span class="predefined-constant">true</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.set([<span class="integer">0</span>,<span class="local-variable">this</span>.offset]);},<span class="function">toggle</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.start(<span class="string"><span class="delimiter">&quot;</span><span class="content">toggle</span><span class="delimiter">&quot;</span></span>,a);}});Element.Properties.slide={<span class="function">set</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> a=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L379">
      <a href="#L379">379</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a){a.cancel();}<span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:options</span><span class="delimiter">&quot;</span></span>,<span class="predefined">$extend</span>({<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>},b));},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L380">
      <a href="#L380">380</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Fx.Slide(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:options</span><span class="delimiter">&quot;</span></span>)));}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>);}};Element.implement({<span class="function">slide</span>:<span class="keyword">function</span>(d,e){d=d||<span class="string"><span class="delimiter">&quot;</span><span class="content">toggle</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L381">
      <a href="#L381">381</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide</span><span class="delimiter">&quot;</span></span>),a;<span class="keyword">switch</span>(d){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>:b.hide(e);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>:b.show(e);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">toggle</span><span class="delimiter">&quot;</span></span>:<span class="keyword">var</span> c=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:flag</span><span class="delimiter">&quot;</span></span>,b.open);b[c?<span class="string"><span class="delimiter">&quot;</span><span class="content">slideOut</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">slideIn</span><span class="delimiter">&quot;</span></span>](e);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L382">
      <a href="#L382">382</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:flag</span><span class="delimiter">&quot;</span></span>,!c);a=<span class="predefined-constant">true</span>;<span class="keyword">break</span>;<span class="keyword">default</span>:b.start(d,e);}<span class="keyword">if</span>(!a){<span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">slide:flag</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> <span class="local-variable">this</span>;}});<span class="keyword">var</span> SmoothScroll=Fx.SmoothScroll=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.Scroll,<span class="function">initialize</span>:<span class="keyword">function</span>(b,c){c=c||document;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L383">
      <a href="#L383">383</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.doc=c.getDocument();<span class="keyword">var</span> d=c.getWindow();<span class="local-variable">this</span>.parent(<span class="local-variable">this</span>.doc,b);<span class="local-variable">this</span>.links=<span class="predefined">$$</span>(<span class="local-variable">this</span>.options.links||<span class="local-variable">this</span>.doc.links);<span class="keyword">var</span> a=d.location.href.match(<span class="regexp"><span class="delimiter">/</span><span class="content">^[^#]*</span><span class="delimiter">/</span></span>)[<span class="integer">0</span>]+<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L384">
      <a href="#L384">384</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.links.each(<span class="keyword">function</span>(f){<span class="keyword">if</span>(f.href.indexOf(a)!=<span class="integer">0</span>){<span class="keyword">return</span>;}<span class="keyword">var</span> e=f.href.substr(a.length);<span class="keyword">if</span>(e){<span class="local-variable">this</span>.useLink(f,e);}},<span class="local-variable">this</span>);<span class="keyword">if</span>(!Browser.Engine.webkit419){<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){d.location.hash=<span class="local-variable">this</span>.anchor;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L385">
      <a href="#L385">385</a>
    </th>
    <td class="line-code">
      <pre>},<span class="predefined-constant">true</span>);}},<span class="function">useLink</span>:<span class="keyword">function</span>(c,a){<span class="keyword">var</span> b;c.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(d){<span class="keyword">if</span>(b!==<span class="predefined-constant">false</span>&amp;&amp;!b){b=document.id(a)||<span class="local-variable">this</span>.doc.getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">a[name=</span><span class="delimiter">&quot;</span></span>+a+<span class="string"><span class="delimiter">&quot;</span><span class="content">]</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">if</span>(b){d.preventDefault();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L386">
      <a href="#L386">386</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.anchor=a;<span class="local-variable">this</span>.toElement(b).chain(<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">scrolledTo</span><span class="delimiter">&quot;</span></span>,[c,b]);}.bind(<span class="local-variable">this</span>));c.blur();}}.bind(<span class="local-variable">this</span>));}});Fx.Sort=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Fx.Elements,<span class="key">options</span>:{<span class="key">mode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.parent(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L387">
      <a href="#L387">387</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.elements.each(<span class="keyword">function</span>(c){<span class="keyword">if</span>(c.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">static</span><span class="delimiter">&quot;</span></span>){c.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span>);}});<span class="local-variable">this</span>.setDefaultOrder();},<span class="function">setDefaultOrder</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.currentOrder=<span class="local-variable">this</span>.elements.map(<span class="keyword">function</span>(b,a){<span class="keyword">return</span> a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L388">
      <a href="#L388">388</a>
    </th>
    <td class="line-code">
      <pre>});},<span class="function">sort</span>:<span class="keyword">function</span>(e){<span class="keyword">if</span>(<span class="predefined">$type</span>(e)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}<span class="keyword">var</span> i=<span class="integer">0</span>,a=<span class="integer">0</span>,c={},h={},d=<span class="local-variable">this</span>.options.mode==<span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>;<span class="keyword">var</span> f=<span class="local-variable">this</span>.elements.map(<span class="keyword">function</span>(m,j){<span class="keyword">var</span> l=m.getComputedSize({<span class="key">styles</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>]});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L389">
      <a href="#L389">389</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> n;<span class="keyword">if</span>(d){n={<span class="key">top</span>:i,<span class="key">margin</span>:l[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>],<span class="key">height</span>:l.totalHeight};i+=n.height-l[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-top</span><span class="delimiter">&quot;</span></span>];}<span class="keyword">else</span>{n={<span class="key">left</span>:a,<span class="key">margin</span>:l[<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-left</span><span class="delimiter">&quot;</span></span>],<span class="key">width</span>:l.totalWidth};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L390">
      <a href="#L390">390</a>
    </th>
    <td class="line-code">
      <pre>a+=n.width;}<span class="keyword">var</span> k=d?<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>;h[j]={};<span class="keyword">var</span> o=m.getStyle(k).toInt();h[j][k]=o||<span class="integer">0</span>;<span class="keyword">return</span> n;},<span class="local-variable">this</span>);<span class="local-variable">this</span>.set(h);e=e.map(<span class="keyword">function</span>(j){<span class="keyword">return</span> j.toInt();});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L391">
      <a href="#L391">391</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(e.length!=<span class="local-variable">this</span>.elements.length){<span class="local-variable">this</span>.currentOrder.each(<span class="keyword">function</span>(j){<span class="keyword">if</span>(!e.contains(j)){e.push(j);}});<span class="keyword">if</span>(e.length&gt;<span class="local-variable">this</span>.elements.length){e.splice(<span class="local-variable">this</span>.elements.length-<span class="integer">1</span>,e.length-<span class="local-variable">this</span>.elements.length);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L392">
      <a href="#L392">392</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">var</span> b=i=a=<span class="integer">0</span>;e.each(<span class="keyword">function</span>(l,j){<span class="keyword">var</span> k={};<span class="keyword">if</span>(d){k.top=i-f[l].top-b;i+=f[l].height;}<span class="keyword">else</span>{k.left=a-f[l].left;a+=f[l].width;}b=b+f[l].margin;c[l]=k;},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L393">
      <a href="#L393">393</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> g={};<span class="predefined">$A</span>(e).sort().each(<span class="keyword">function</span>(j){g[j]=c[j];});<span class="local-variable">this</span>.start(g);<span class="local-variable">this</span>.currentOrder=e;<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">rearrangeDOM</span>:<span class="keyword">function</span>(a){a=a||<span class="local-variable">this</span>.currentOrder;<span class="keyword">var</span> b=<span class="local-variable">this</span>.elements[<span class="integer">0</span>].getParent();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L394">
      <a href="#L394">394</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> c=[];<span class="local-variable">this</span>.elements.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="integer">0</span>);a.each(<span class="keyword">function</span>(d){c.push(<span class="local-variable">this</span>.elements[d].inject(b).setStyles({<span class="key">top</span>:<span class="integer">0</span>,<span class="key">left</span>:<span class="integer">0</span>}));},<span class="local-variable">this</span>);<span class="local-variable">this</span>.elements.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="integer">1</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L395">
      <a href="#L395">395</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.elements=<span class="predefined">$$</span>(c);<span class="local-variable">this</span>.setDefaultOrder();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getDefaultOrder</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.elements.map(<span class="keyword">function</span>(b,a){<span class="keyword">return</span> a;});},<span class="function">forward</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.sort(<span class="local-variable">this</span>.getDefaultOrder());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L396">
      <a href="#L396">396</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">backward</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.sort(<span class="local-variable">this</span>.getDefaultOrder().reverse());},<span class="function">reverse</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.sort(<span class="local-variable">this</span>.currentOrder.reverse());},<span class="function">sortByElements</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.sort(a.map(<span class="keyword">function</span>(b){<span class="keyword">return</span> <span class="local-variable">this</span>.elements.indexOf(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L397">
      <a href="#L397">397</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>));},<span class="function">swap</span>:<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(<span class="predefined">$type</span>(c)==<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){c=<span class="local-variable">this</span>.elements.indexOf(c);}<span class="keyword">if</span>(<span class="predefined">$type</span>(b)==<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){b=<span class="local-variable">this</span>.elements.indexOf(b);}<span class="keyword">var</span> a=<span class="predefined">$A</span>(<span class="local-variable">this</span>.currentOrder);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L398">
      <a href="#L398">398</a>
    </th>
    <td class="line-code">
      <pre>a[<span class="local-variable">this</span>.currentOrder.indexOf(c)]=b;a[<span class="local-variable">this</span>.currentOrder.indexOf(b)]=c;<span class="keyword">return</span> <span class="local-variable">this</span>.sort(a);}});<span class="keyword">var</span> Drag=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Events,Options],<span class="key">options</span>:{<span class="key">snap</span>:<span class="integer">6</span>,<span class="key">unit</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">px</span><span class="delimiter">&quot;</span></span>,<span class="key">grid</span>:<span class="predefined-constant">false</span>,<span class="key">style</span>:<span class="predefined-constant">true</span>,<span class="key">limit</span>:<span class="predefined-constant">false</span>,<span class="key">handle</span>:<span class="predefined-constant">false</span>,<span class="key">invert</span>:<span class="predefined-constant">false</span>,<span class="key">preventDefault</span>:<span class="predefined-constant">false</span>,<span class="key">stopPropagation</span>:<span class="predefined-constant">false</span>,<span class="key">modifiers</span>:{<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>}},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">element</span>:<span class="predefined">$defined</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L399">
      <a href="#L399">399</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element=document.id(b.element);<span class="local-variable">this</span>.document=<span class="local-variable">this</span>.element.getDocument();<span class="local-variable">this</span>.setOptions(b.options||{});<span class="keyword">var</span> a=<span class="predefined">$type</span>(<span class="local-variable">this</span>.options.handle);<span class="local-variable">this</span>.handles=((a==<span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>||a==<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>)?<span class="predefined">$$</span>(<span class="local-variable">this</span>.options.handle):document.id(<span class="local-variable">this</span>.options.handle))||<span class="local-variable">this</span>.element;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L400">
      <a href="#L400">400</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.mouse={<span class="key">now</span>:{},<span class="key">pos</span>:{}};<span class="local-variable">this</span>.value={<span class="key">start</span>:{},<span class="key">now</span>:{}};<span class="local-variable">this</span>.selection=(Browser.Engine.trident)?<span class="string"><span class="delimiter">&quot;</span><span class="content">selectstart</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.bound={<span class="key">start</span>:<span class="local-variable">this</span>.start.bind(<span class="local-variable">this</span>),<span class="key">check</span>:<span class="local-variable">this</span>.check.bind(<span class="local-variable">this</span>),<span class="key">drag</span>:<span class="local-variable">this</span>.drag.bind(<span class="local-variable">this</span>),<span class="key">stop</span>:<span class="local-variable">this</span>.stop.bind(<span class="local-variable">this</span>),<span class="key">cancel</span>:<span class="local-variable">this</span>.cancel.bind(<span class="local-variable">this</span>),<span class="key">eventStop</span>:<span class="predefined">$lambda</span>(<span class="predefined-constant">false</span>)};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L401">
      <a href="#L401">401</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.attach();},<span class="function">attach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.handles.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.start);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.handles.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.start);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L402">
      <a href="#L402">402</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">start</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(c.rightClick){<span class="keyword">return</span>;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.preventDefault){c.preventDefault();}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.stopPropagation){c.stopPropagation();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L403">
      <a href="#L403">403</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.mouse.start=c.page;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">beforeStart</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);<span class="keyword">var</span> a=<span class="local-variable">this</span>.options.limit;<span class="local-variable">this</span>.limit={<span class="key">x</span>:[],<span class="key">y</span>:[]};<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> <span class="local-variable">this</span>.options.modifiers){<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.modifiers[d]){<span class="keyword">continue</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L404">
      <a href="#L404">404</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.style){<span class="local-variable">this</span>.value.now[d]=<span class="local-variable">this</span>.element.getStyle(<span class="local-variable">this</span>.options.modifiers[d]).toInt();}<span class="keyword">else</span>{<span class="local-variable">this</span>.value.now[d]=<span class="local-variable">this</span>.element[<span class="local-variable">this</span>.options.modifiers[d]];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L405">
      <a href="#L405">405</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.invert){<span class="local-variable">this</span>.value.now[d]*=-<span class="integer">1</span>;}<span class="local-variable">this</span>.mouse.pos[d]=c.page[d]-<span class="local-variable">this</span>.value.now[d];<span class="keyword">if</span>(a&amp;&amp;a[d]){<span class="keyword">for</span>(<span class="keyword">var</span> b=<span class="integer">2</span>;b--;b){<span class="keyword">if</span>(<span class="predefined">$chk</span>(a[d][b])){<span class="local-variable">this</span>.limit[d][b]=<span class="predefined">$lambda</span>(a[d][b])();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L406">
      <a href="#L406">406</a>
    </th>
    <td class="line-code">
      <pre>}}}}<span class="keyword">if</span>(<span class="predefined">$type</span>(<span class="local-variable">this</span>.options.grid)==<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.options.grid={<span class="key">x</span>:<span class="local-variable">this</span>.options.grid,<span class="key">y</span>:<span class="local-variable">this</span>.options.grid};}<span class="local-variable">this</span>.document.addEvents({<span class="key">mousemove</span>:<span class="local-variable">this</span>.bound.check,<span class="key">mouseup</span>:<span class="local-variable">this</span>.bound.cancel});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L407">
      <a href="#L407">407</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.document.addEvent(<span class="local-variable">this</span>.selection,<span class="local-variable">this</span>.bound.eventStop);},<span class="function">check</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.preventDefault){a.preventDefault();}<span class="keyword">var</span> b=Math.round(Math.sqrt(Math.pow(a.page.x-<span class="local-variable">this</span>.mouse.start.x,<span class="integer">2</span>)+Math.pow(a.page.y-<span class="local-variable">this</span>.mouse.start.y,<span class="integer">2</span>)));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L408">
      <a href="#L408">408</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(b&gt;<span class="local-variable">this</span>.options.snap){<span class="local-variable">this</span>.cancel();<span class="local-variable">this</span>.document.addEvents({<span class="key">mousemove</span>:<span class="local-variable">this</span>.bound.drag,<span class="key">mouseup</span>:<span class="local-variable">this</span>.bound.stop});<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,a]).fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">snap</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L409">
      <a href="#L409">409</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">drag</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.preventDefault){a.preventDefault();}<span class="local-variable">this</span>.mouse.now=a.page;<span class="keyword">for</span>(<span class="keyword">var</span> b <span class="keyword">in</span> <span class="local-variable">this</span>.options.modifiers){<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.modifiers[b]){<span class="keyword">continue</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L410">
      <a href="#L410">410</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.value.now[b]=<span class="local-variable">this</span>.mouse.now[b]-<span class="local-variable">this</span>.mouse.pos[b];<span class="keyword">if</span>(<span class="local-variable">this</span>.options.invert){<span class="local-variable">this</span>.value.now[b]*=-<span class="integer">1</span>;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.limit&amp;&amp;<span class="local-variable">this</span>.limit[b]){<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.limit[b][<span class="integer">1</span>])&amp;&amp;(<span class="local-variable">this</span>.value.now[b]&gt;<span class="local-variable">this</span>.limit[b][<span class="integer">1</span>])){<span class="local-variable">this</span>.value.now[b]=<span class="local-variable">this</span>.limit[b][<span class="integer">1</span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L411">
      <a href="#L411">411</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.limit[b][<span class="integer">0</span>])&amp;&amp;(<span class="local-variable">this</span>.value.now[b]&lt;<span class="local-variable">this</span>.limit[b][<span class="integer">0</span>])){<span class="local-variable">this</span>.value.now[b]=<span class="local-variable">this</span>.limit[b][<span class="integer">0</span>];}}}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.grid[b]){<span class="local-variable">this</span>.value.now[b]-=((<span class="local-variable">this</span>.value.now[b]-(<span class="local-variable">this</span>.limit[b][<span class="integer">0</span>]||<span class="integer">0</span>))%<span class="local-variable">this</span>.options.grid[b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L412">
      <a href="#L412">412</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.style){<span class="local-variable">this</span>.element.setStyle(<span class="local-variable">this</span>.options.modifiers[b],<span class="local-variable">this</span>.value.now[b]+<span class="local-variable">this</span>.options.unit);}<span class="keyword">else</span>{<span class="local-variable">this</span>.element[<span class="local-variable">this</span>.options.modifiers[b]]=<span class="local-variable">this</span>.value.now[b];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L413">
      <a href="#L413">413</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">drag</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,a]);},<span class="function">cancel</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.document.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousemove</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.check);<span class="local-variable">this</span>.document.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mouseup</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.cancel);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L414">
      <a href="#L414">414</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(a){<span class="local-variable">this</span>.document.removeEvent(<span class="local-variable">this</span>.selection,<span class="local-variable">this</span>.bound.eventStop);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);}},<span class="function">stop</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.document.removeEvent(<span class="local-variable">this</span>.selection,<span class="local-variable">this</span>.bound.eventStop);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L415">
      <a href="#L415">415</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.document.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousemove</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.drag);<span class="local-variable">this</span>.document.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mouseup</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.stop);<span class="keyword">if</span>(a){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,a]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L416">
      <a href="#L416">416</a>
    </th>
    <td class="line-code">
      <pre>}}});Element.implement({<span class="function">makeResizable</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">new</span> Drag(<span class="local-variable">this</span>,<span class="predefined">$merge</span>({<span class="key">modifiers</span>:{<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>}},a));<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">resizer</span><span class="delimiter">&quot;</span></span>,b);<span class="keyword">return</span> b.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">drag</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L417">
      <a href="#L417">417</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>));}});Drag.Move=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Drag,<span class="key">options</span>:{<span class="key">droppables</span>:[],<span class="key">container</span>:<span class="predefined-constant">false</span>,<span class="key">precalculate</span>:<span class="predefined-constant">false</span>,<span class="key">includeMargins</span>:<span class="predefined-constant">true</span>,<span class="key">checkDroppables</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.parent(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L418">
      <a href="#L418">418</a>
    </th>
    <td class="line-code">
      <pre>b=<span class="local-variable">this</span>.element;<span class="local-variable">this</span>.droppables=<span class="predefined">$$</span>(<span class="local-variable">this</span>.options.droppables);<span class="local-variable">this</span>.container=document.id(<span class="local-variable">this</span>.options.container);<span class="keyword">if</span>(<span class="local-variable">this</span>.container&amp;&amp;<span class="predefined">$type</span>(<span class="local-variable">this</span>.container)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.container=document.id(<span class="local-variable">this</span>.container.getDocument().body);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L419">
      <a href="#L419">419</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> c=b.getStyles(<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(c.left==<span class="string"><span class="delimiter">&quot;</span><span class="content">auto</span><span class="delimiter">&quot;</span></span>||c.top==<span class="string"><span class="delimiter">&quot;</span><span class="content">auto</span><span class="delimiter">&quot;</span></span>){b.setPosition(b.getPosition(b.getOffsetParent()));}<span class="keyword">if</span>(c.position==<span class="string"><span class="delimiter">&quot;</span><span class="content">static</span><span class="delimiter">&quot;</span></span>){b.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L420">
      <a href="#L420">420</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.checkDroppables,<span class="predefined-constant">true</span>);<span class="local-variable">this</span>.overed=<span class="predefined-constant">null</span>;},<span class="function">start</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.container){<span class="local-variable">this</span>.options.limit=<span class="local-variable">this</span>.calculateLimit();}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.precalculate){<span class="local-variable">this</span>.positions=<span class="local-variable">this</span>.droppables.map(<span class="keyword">function</span>(b){<span class="keyword">return</span> b.getCoordinates();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L421">
      <a href="#L421">421</a>
    </th>
    <td class="line-code">
      <pre>});}<span class="local-variable">this</span>.parent(a);},<span class="function">calculateLimit</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> d=<span class="local-variable">this</span>.element.getOffsetParent(),g=<span class="local-variable">this</span>.container.getCoordinates(d),f={},c={},b={},i={},k={};[<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(o){f[o]=<span class="local-variable">this</span>.container.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">border-</span><span class="delimiter">&quot;</span></span>+o).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L422">
      <a href="#L422">422</a>
    </th>
    <td class="line-code">
      <pre>b[o]=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">border-</span><span class="delimiter">&quot;</span></span>+o).toInt();c[o]=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-</span><span class="delimiter">&quot;</span></span>+o).toInt();i[o]=<span class="local-variable">this</span>.container.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">margin-</span><span class="delimiter">&quot;</span></span>+o).toInt();k[o]=d.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">padding-</span><span class="delimiter">&quot;</span></span>+o).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L423">
      <a href="#L423">423</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="keyword">var</span> e=<span class="local-variable">this</span>.element.offsetWidth+c.left+c.right,n=<span class="local-variable">this</span>.element.offsetHeight+c.top+c.bottom,h=<span class="integer">0</span>,j=<span class="integer">0</span>,m=g.right-f.right-e,a=g.bottom-f.bottom-n;<span class="keyword">if</span>(<span class="local-variable">this</span>.options.includeMargins){h+=c.left;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L424">
      <a href="#L424">424</a>
    </th>
    <td class="line-code">
      <pre>j+=c.top;}<span class="keyword">else</span>{m+=c.right;a+=c.bottom;}<span class="keyword">if</span>(<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span>){<span class="keyword">var</span> l=<span class="local-variable">this</span>.element.getCoordinates(d);l.left-=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L425">
      <a href="#L425">425</a>
    </th>
    <td class="line-code">
      <pre>l.top-=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>).toInt();h+=f.left-l.left;j+=f.top-l.top;m+=c.left-l.left;a+=c.top-l.top;<span class="keyword">if</span>(<span class="local-variable">this</span>.container!=d){h+=i.left+k.left;j+=(Browser.Engine.trident4?<span class="integer">0</span>:i.top)+k.top;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L426">
      <a href="#L426">426</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">else</span>{h-=c.left;j-=c.top;<span class="keyword">if</span>(<span class="local-variable">this</span>.container==d){m-=f.left;a-=f.top;}<span class="keyword">else</span>{h+=g.left+f.left;j+=g.top+f.top;}}<span class="keyword">return</span>{<span class="key">x</span>:[h,m],<span class="key">y</span>:[j,a]};},<span class="function">checkAgainst</span>:<span class="keyword">function</span>(c,b){c=(<span class="local-variable">this</span>.positions)?<span class="local-variable">this</span>.positions[b]:c.getCoordinates();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L427">
      <a href="#L427">427</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=<span class="local-variable">this</span>.mouse.now;<span class="keyword">return</span>(a.x&gt;c.left&amp;&amp;a.x&lt;c.right&amp;&amp;a.y&lt;c.bottom&amp;&amp;a.y&gt;c.top);},<span class="function">checkDroppables</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.droppables.filter(<span class="local-variable">this</span>.checkAgainst,<span class="local-variable">this</span>).getLast();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L428">
      <a href="#L428">428</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.overed!=a){<span class="keyword">if</span>(<span class="local-variable">this</span>.overed){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">leave</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,<span class="local-variable">this</span>.overed]);}<span class="keyword">if</span>(a){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">enter</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,a]);}<span class="local-variable">this</span>.overed=a;}},<span class="function">drag</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.parent(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L429">
      <a href="#L429">429</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.checkDroppables&amp;&amp;<span class="local-variable">this</span>.droppables.length){<span class="local-variable">this</span>.checkDroppables();}},<span class="function">stop</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.checkDroppables();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">drop</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,<span class="local-variable">this</span>.overed,a]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L430">
      <a href="#L430">430</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.overed=<span class="predefined-constant">null</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.parent(a);}});Element.implement({<span class="function">makeDraggable</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">new</span> Drag.Move(<span class="local-variable">this</span>,a);<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">dragger</span><span class="delimiter">&quot;</span></span>,b);<span class="keyword">return</span> b;}});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L431">
      <a href="#L431">431</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> Slider=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Events,Options],<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">clickedElement</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">draggedKnob</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">scrolledElement</span><span class="delimiter">&quot;</span></span>],<span class="key">options</span>:{<span class="function">onTick</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.snap){a=<span class="local-variable">this</span>.toPosition(<span class="local-variable">this</span>.step);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L432">
      <a href="#L432">432</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.knob.setStyle(<span class="local-variable">this</span>.property,a);},<span class="key">initialStep</span>:<span class="integer">0</span>,<span class="key">snap</span>:<span class="predefined-constant">false</span>,<span class="key">offset</span>:<span class="integer">0</span>,<span class="key">range</span>:<span class="predefined-constant">false</span>,<span class="key">wheel</span>:<span class="predefined-constant">false</span>,<span class="key">steps</span>:<span class="integer">100</span>,<span class="key">mode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">horizontal</span><span class="delimiter">&quot;</span></span>},<span class="function">initialize</span>:<span class="keyword">function</span>(f,a,e){<span class="local-variable">this</span>.setOptions(e);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L433">
      <a href="#L433">433</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element=document.id(f);<span class="local-variable">this</span>.knob=document.id(a);<span class="local-variable">this</span>.previousChange=<span class="local-variable">this</span>.previousEnd=<span class="local-variable">this</span>.step=-<span class="integer">1</span>;<span class="keyword">var</span> g,b={},d={<span class="key">x</span>:<span class="predefined-constant">false</span>,<span class="key">y</span>:<span class="predefined-constant">false</span>};<span class="keyword">switch</span>(<span class="local-variable">this</span>.options.mode){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">vertical</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.axis=<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L434">
      <a href="#L434">434</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.property=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>;g=<span class="string"><span class="delimiter">&quot;</span><span class="content">offsetHeight</span><span class="delimiter">&quot;</span></span>;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">horizontal</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.axis=<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.property=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>;g=<span class="string"><span class="delimiter">&quot;</span><span class="content">offsetWidth</span><span class="delimiter">&quot;</span></span>;}<span class="local-variable">this</span>.full=<span class="local-variable">this</span>.element.measure(<span class="keyword">function</span>(){<span class="local-variable">this</span>.half=<span class="local-variable">this</span>.knob[g]/<span class="integer">2</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L435">
      <a href="#L435">435</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.element[g]-<span class="local-variable">this</span>.knob[g]+(<span class="local-variable">this</span>.options.offset*<span class="integer">2</span>);}.bind(<span class="local-variable">this</span>));<span class="local-variable">this</span>.min=<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.range[<span class="integer">0</span>])?<span class="local-variable">this</span>.options.range[<span class="integer">0</span>]:<span class="integer">0</span>;<span class="local-variable">this</span>.max=<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.range[<span class="integer">1</span>])?<span class="local-variable">this</span>.options.range[<span class="integer">1</span>]:<span class="local-variable">this</span>.options.steps;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L436">
      <a href="#L436">436</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.range=<span class="local-variable">this</span>.max-<span class="local-variable">this</span>.min;<span class="local-variable">this</span>.steps=<span class="local-variable">this</span>.options.steps||<span class="local-variable">this</span>.full;<span class="local-variable">this</span>.stepSize=Math.abs(<span class="local-variable">this</span>.range)/<span class="local-variable">this</span>.steps;<span class="local-variable">this</span>.stepWidth=<span class="local-variable">this</span>.stepSize*<span class="local-variable">this</span>.full/Math.abs(<span class="local-variable">this</span>.range);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L437">
      <a href="#L437">437</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.knob.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span>).setStyle(<span class="local-variable">this</span>.property,<span class="local-variable">this</span>.options.initialStep?<span class="local-variable">this</span>.toPosition(<span class="local-variable">this</span>.options.initialStep):-<span class="local-variable">this</span>.options.offset);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L438">
      <a href="#L438">438</a>
    </th>
    <td class="line-code">
      <pre>d[<span class="local-variable">this</span>.axis]=<span class="local-variable">this</span>.property;b[<span class="local-variable">this</span>.axis]=[-<span class="local-variable">this</span>.options.offset,<span class="local-variable">this</span>.full-<span class="local-variable">this</span>.options.offset];<span class="keyword">var</span> c={<span class="key">snap</span>:<span class="integer">0</span>,<span class="key">limit</span>:b,<span class="key">modifiers</span>:d,<span class="key">onDrag</span>:<span class="local-variable">this</span>.draggedKnob,<span class="key">onStart</span>:<span class="local-variable">this</span>.draggedKnob,<span class="key">onBeforeStart</span>:(<span class="keyword">function</span>(){<span class="local-variable">this</span>.isDragging=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L439">
      <a href="#L439">439</a>
    </th>
    <td class="line-code">
      <pre>}).bind(<span class="local-variable">this</span>),<span class="function">onCancel</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.isDragging=<span class="predefined-constant">false</span>;}.bind(<span class="local-variable">this</span>),<span class="function">onComplete</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.isDragging=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.draggedKnob();<span class="local-variable">this</span>.end();}.bind(<span class="local-variable">this</span>)};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L440">
      <a href="#L440">440</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.snap){c.grid=Math.ceil(<span class="local-variable">this</span>.stepWidth);c.limit[<span class="local-variable">this</span>.axis][<span class="integer">1</span>]=<span class="local-variable">this</span>.full;}<span class="local-variable">this</span>.drag=<span class="keyword">new</span> Drag(<span class="local-variable">this</span>.knob,c);<span class="local-variable">this</span>.attach();},<span class="function">attach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.clickedElement);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L441">
      <a href="#L441">441</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.wheel){<span class="local-variable">this</span>.element.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousewheel</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.scrolledElement);}<span class="local-variable">this</span>.drag.attach();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.clickedElement);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L442">
      <a href="#L442">442</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousewheel</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.scrolledElement);<span class="local-variable">this</span>.drag.detach();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!((<span class="local-variable">this</span>.range&gt;<span class="integer">0</span>)^(a&lt;<span class="local-variable">this</span>.min))){a=<span class="local-variable">this</span>.min;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L443">
      <a href="#L443">443</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!((<span class="local-variable">this</span>.range&gt;<span class="integer">0</span>)^(a&gt;<span class="local-variable">this</span>.max))){a=<span class="local-variable">this</span>.max;}<span class="local-variable">this</span>.step=Math.round(a);<span class="local-variable">this</span>.checkStep();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">tick</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.toPosition(<span class="local-variable">this</span>.step));<span class="local-variable">this</span>.end();<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L444">
      <a href="#L444">444</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">clickedElement</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(<span class="local-variable">this</span>.isDragging||c.target==<span class="local-variable">this</span>.knob){<span class="keyword">return</span>;}<span class="keyword">var</span> b=<span class="local-variable">this</span>.range&lt;<span class="integer">0</span>?-<span class="integer">1</span>:<span class="integer">1</span>;<span class="keyword">var</span> a=c.page[<span class="local-variable">this</span>.axis]-<span class="local-variable">this</span>.element.getPosition()[<span class="local-variable">this</span>.axis]-<span class="local-variable">this</span>.half;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L445">
      <a href="#L445">445</a>
    </th>
    <td class="line-code">
      <pre>a=a.limit(-<span class="local-variable">this</span>.options.offset,<span class="local-variable">this</span>.full-<span class="local-variable">this</span>.options.offset);<span class="local-variable">this</span>.step=Math.round(<span class="local-variable">this</span>.min+b*<span class="local-variable">this</span>.toStep(a));<span class="local-variable">this</span>.checkStep();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">tick</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L446">
      <a href="#L446">446</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.end();},<span class="function">scrolledElement</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=(<span class="local-variable">this</span>.options.mode==<span class="string"><span class="delimiter">&quot;</span><span class="content">horizontal</span><span class="delimiter">&quot;</span></span>)?(a.wheel&lt;<span class="integer">0</span>):(a.wheel&gt;<span class="integer">0</span>);<span class="local-variable">this</span>.set(b?<span class="local-variable">this</span>.step-<span class="local-variable">this</span>.stepSize:<span class="local-variable">this</span>.step+<span class="local-variable">this</span>.stepSize);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L447">
      <a href="#L447">447</a>
    </th>
    <td class="line-code">
      <pre>a.stop();},<span class="function">draggedKnob</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">this</span>.range&lt;<span class="integer">0</span>?-<span class="integer">1</span>:<span class="integer">1</span>;<span class="keyword">var</span> a=<span class="local-variable">this</span>.drag.value.now[<span class="local-variable">this</span>.axis];a=a.limit(-<span class="local-variable">this</span>.options.offset,<span class="local-variable">this</span>.full-<span class="local-variable">this</span>.options.offset);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L448">
      <a href="#L448">448</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.step=Math.round(<span class="local-variable">this</span>.min+b*<span class="local-variable">this</span>.toStep(a));<span class="local-variable">this</span>.checkStep();},<span class="function">checkStep</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.previousChange!=<span class="local-variable">this</span>.step){<span class="local-variable">this</span>.previousChange=<span class="local-variable">this</span>.step;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L449">
      <a href="#L449">449</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.step);}},<span class="function">end</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.previousEnd!==<span class="local-variable">this</span>.step){<span class="local-variable">this</span>.previousEnd=<span class="local-variable">this</span>.step;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.step+<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L450">
      <a href="#L450">450</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">toStep</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=(a+<span class="local-variable">this</span>.options.offset)*<span class="local-variable">this</span>.stepSize/<span class="local-variable">this</span>.full*<span class="local-variable">this</span>.steps;<span class="keyword">return</span> <span class="local-variable">this</span>.options.steps?Math.round(b-=b%<span class="local-variable">this</span>.stepSize):b;},<span class="function">toPosition</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span>(<span class="local-variable">this</span>.full*Math.abs(<span class="local-variable">this</span>.min-a))/(<span class="local-variable">this</span>.steps*<span class="local-variable">this</span>.stepSize)-<span class="local-variable">this</span>.options.offset;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L451">
      <a href="#L451">451</a>
    </th>
    <td class="line-code">
      <pre>}});<span class="keyword">var</span> Sortables=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Events,Options],<span class="key">options</span>:{<span class="key">snap</span>:<span class="integer">4</span>,<span class="key">opacity</span>:<span class="integer">1</span>,<span class="key">clone</span>:<span class="predefined-constant">false</span>,<span class="key">revert</span>:<span class="predefined-constant">false</span>,<span class="key">handle</span>:<span class="predefined-constant">false</span>,<span class="key">constrain</span>:<span class="predefined-constant">false</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(a,b){<span class="local-variable">this</span>.setOptions(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L452">
      <a href="#L452">452</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.elements=[];<span class="local-variable">this</span>.lists=[];<span class="local-variable">this</span>.idle=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.addLists(<span class="predefined">$$</span>(document.id(a)||a));<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.clone){<span class="local-variable">this</span>.options.revert=<span class="predefined-constant">false</span>;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.revert){<span class="local-variable">this</span>.effect=<span class="keyword">new</span> Fx.Morph(<span class="predefined-constant">null</span>,<span class="predefined">$merge</span>({<span class="key">duration</span>:<span class="integer">250</span>,<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>},<span class="local-variable">this</span>.options.revert));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L453">
      <a href="#L453">453</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">attach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.addLists(<span class="local-variable">this</span>.lists);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.lists=<span class="local-variable">this</span>.removeLists(<span class="local-variable">this</span>.lists);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">addItems</span>:<span class="keyword">function</span>(){Array.flatten(<span class="local-variable">arguments</span>).each(<span class="keyword">function</span>(a){<span class="local-variable">this</span>.elements.push(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L454">
      <a href="#L454">454</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=a.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">sortables:start</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.start.bindWithEvent(<span class="local-variable">this</span>,a));(<span class="local-variable">this</span>.options.handle?a.getElement(<span class="local-variable">this</span>.options.handle)||a:a).addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L455">
      <a href="#L455">455</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">addLists</span>:<span class="keyword">function</span>(){Array.flatten(<span class="local-variable">arguments</span>).each(<span class="keyword">function</span>(a){<span class="local-variable">this</span>.lists.push(a);<span class="local-variable">this</span>.addItems(a.getChildren());},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L456">
      <a href="#L456">456</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">removeItems</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="predefined">$$</span>(Array.flatten(<span class="local-variable">arguments</span>).map(<span class="keyword">function</span>(a){<span class="local-variable">this</span>.elements.erase(a);<span class="keyword">var</span> b=a.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">sortables:start</span><span class="delimiter">&quot;</span></span>);(<span class="local-variable">this</span>.options.handle?a.getElement(<span class="local-variable">this</span>.options.handle)||a:a).removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousedown</span><span class="delimiter">&quot;</span></span>,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L457">
      <a href="#L457">457</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> a;},<span class="local-variable">this</span>));},<span class="function">removeLists</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="predefined">$$</span>(Array.flatten(<span class="local-variable">arguments</span>).map(<span class="keyword">function</span>(a){<span class="local-variable">this</span>.lists.erase(a);<span class="local-variable">this</span>.removeItems(a.getChildren());<span class="keyword">return</span> a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L458">
      <a href="#L458">458</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>));},<span class="function">getClone</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.clone){<span class="keyword">return</span> <span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>).inject(document.body);}<span class="keyword">if</span>(<span class="predefined">$type</span>(<span class="local-variable">this</span>.options.clone)==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="local-variable">this</span>.options.clone.call(<span class="local-variable">this</span>,b,a,<span class="local-variable">this</span>.list);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L459">
      <a href="#L459">459</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> a.clone(<span class="predefined-constant">true</span>).setStyles({<span class="key">margin</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">0px</span><span class="delimiter">&quot;</span></span>,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">visibility</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>,<span class="key">width</span>:a.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>)}).inject(<span class="local-variable">this</span>.list).setPosition(a.getPosition(a.getOffsetParent()));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L460">
      <a href="#L460">460</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">getDroppables</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.list.getChildren();<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.constrain){a=<span class="local-variable">this</span>.lists.concat(a).erase(<span class="local-variable">this</span>.list);}<span class="keyword">return</span> a.erase(<span class="local-variable">this</span>.clone).erase(<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L461">
      <a href="#L461">461</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">insert</span>:<span class="keyword">function</span>(c,b){<span class="keyword">var</span> a=<span class="string"><span class="delimiter">&quot;</span><span class="content">inside</span><span class="delimiter">&quot;</span></span>;<span class="keyword">if</span>(<span class="local-variable">this</span>.lists.contains(b)){<span class="local-variable">this</span>.list=b;<span class="local-variable">this</span>.drag.droppables=<span class="local-variable">this</span>.getDroppables();}<span class="keyword">else</span>{a=<span class="local-variable">this</span>.element.getAllPrevious().contains(b)?<span class="string"><span class="delimiter">&quot;</span><span class="content">before</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">after</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L462">
      <a href="#L462">462</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.element.inject(b,a);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">sort</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,<span class="local-variable">this</span>.clone]);},<span class="function">start</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(!<span class="local-variable">this</span>.idle){<span class="keyword">return</span>;}<span class="local-variable">this</span>.idle=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.element=a;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L463">
      <a href="#L463">463</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.opacity=a.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.list=a.getParent();<span class="local-variable">this</span>.clone=<span class="local-variable">this</span>.getClone(b,a);<span class="local-variable">this</span>.drag=<span class="keyword">new</span> Drag.Move(<span class="local-variable">this</span>.clone,{<span class="key">snap</span>:<span class="local-variable">this</span>.options.snap,<span class="key">container</span>:<span class="local-variable">this</span>.options.constrain&amp;&amp;<span class="local-variable">this</span>.element.getParent(),<span class="key">droppables</span>:<span class="local-variable">this</span>.getDroppables(),<span class="function">onSnap</span>:<span class="keyword">function</span>(){b.stop();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L464">
      <a href="#L464">464</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.clone.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">visibility</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">visible</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.opacity||<span class="integer">0</span>);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.element,<span class="local-variable">this</span>.clone]);}.bind(<span class="local-variable">this</span>),<span class="key">onEnter</span>:<span class="local-variable">this</span>.insert.bind(<span class="local-variable">this</span>),<span class="key">onCancel</span>:<span class="local-variable">this</span>.reset.bind(<span class="local-variable">this</span>),<span class="key">onComplete</span>:<span class="local-variable">this</span>.end.bind(<span class="local-variable">this</span>)});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L465">
      <a href="#L465">465</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.clone.inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">before</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.drag.start(b);},<span class="function">end</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.drag.detach();<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.opacity);<span class="keyword">if</span>(<span class="local-variable">this</span>.effect){<span class="keyword">var</span> a=<span class="local-variable">this</span>.element.getStyles(<span class="string"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L466">
      <a href="#L466">466</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.clone.computePosition(<span class="local-variable">this</span>.element.getPosition(<span class="local-variable">this</span>.clone.offsetParent));<span class="local-variable">this</span>.effect.element=<span class="local-variable">this</span>.clone;<span class="local-variable">this</span>.effect.start({<span class="key">top</span>:b.top,<span class="key">left</span>:b.left,<span class="key">width</span>:a.width,<span class="key">height</span>:a.height,<span class="key">opacity</span>:<span class="float">0.25</span>}).chain(<span class="local-variable">this</span>.reset.bind(<span class="local-variable">this</span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L467">
      <a href="#L467">467</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="local-variable">this</span>.reset();}},<span class="function">reset</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.idle=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.clone.destroy();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.element);},<span class="function">serialize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> c=Array.link(<span class="local-variable">arguments</span>,{<span class="key">modifier</span>:Function.type,<span class="key">index</span>:<span class="predefined">$defined</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L468">
      <a href="#L468">468</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.lists.map(<span class="keyword">function</span>(d){<span class="keyword">return</span> d.getChildren().map(c.modifier||<span class="keyword">function</span>(e){<span class="keyword">return</span> e.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>);},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);<span class="keyword">var</span> a=c.index;<span class="keyword">if</span>(<span class="local-variable">this</span>.lists.length==<span class="integer">1</span>){a=<span class="integer">0</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L469">
      <a href="#L469">469</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="predefined">$chk</span>(a)&amp;&amp;a&gt;=<span class="integer">0</span>&amp;&amp;a&lt;<span class="local-variable">this</span>.lists.length?b[a]:b;}});Request.JSONP=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Chain,Events,Options,Log],<span class="key">options</span>:{<span class="key">url</span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,<span class="key">data</span>:{},<span class="key">retries</span>:<span class="integer">0</span>,<span class="key">timeout</span>:<span class="integer">0</span>,<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">ignore</span><span class="delimiter">&quot;</span></span>,<span class="key">callbackKey</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">callback</span><span class="delimiter">&quot;</span></span>,<span class="key">injectScript</span>:document.head},<span class="function">initialize</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.setOptions(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L470">
      <a href="#L470">470</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.log){<span class="local-variable">this</span>.enableLog();}<span class="local-variable">this</span>.running=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.requests=<span class="integer">0</span>;<span class="local-variable">this</span>.triesRemaining=[];},<span class="function">check</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="local-variable">this</span>.running){<span class="keyword">return</span> <span class="predefined-constant">true</span>;}<span class="keyword">switch</span>(<span class="local-variable">this</span>.options.link){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.cancel();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L471">
      <a href="#L471">471</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="predefined-constant">true</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">chain</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.chain(<span class="local-variable">this</span>.caller.bind(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>));<span class="keyword">return</span> <span class="predefined-constant">false</span>;}<span class="keyword">return</span> <span class="predefined-constant">false</span>;},<span class="function">send</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(!<span class="predefined">$chk</span>(<span class="local-variable">arguments</span>[<span class="integer">1</span>])&amp;&amp;!<span class="local-variable">this</span>.check(c)){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L472">
      <a href="#L472">472</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> e=<span class="predefined">$type</span>(c),a=<span class="local-variable">this</span>.options,b=<span class="predefined">$chk</span>(<span class="local-variable">arguments</span>[<span class="integer">1</span>])?<span class="local-variable">arguments</span>[<span class="integer">1</span>]:<span class="local-variable">this</span>.requests++;<span class="keyword">if</span>(e==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>||e==<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){c={<span class="key">data</span>:c};}c=<span class="predefined">$extend</span>({<span class="key">data</span>:a.data,<span class="key">url</span>:a.url},c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L473">
      <a href="#L473">473</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="predefined">$chk</span>(<span class="local-variable">this</span>.triesRemaining[b])){<span class="local-variable">this</span>.triesRemaining[b]=<span class="local-variable">this</span>.options.retries;}<span class="keyword">var</span> d=<span class="local-variable">this</span>.triesRemaining[b];(<span class="keyword">function</span>(){<span class="keyword">var</span> f=<span class="local-variable">this</span>.getScript(c);<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">JSONP retrieving script with url: </span><span class="delimiter">&quot;</span></span>+f.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">src</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L474">
      <a href="#L474">474</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>,f);<span class="local-variable">this</span>.running=<span class="predefined-constant">true</span>;(<span class="keyword">function</span>(){<span class="keyword">if</span>(d){<span class="local-variable">this</span>.triesRemaining[b]=d-<span class="integer">1</span>;<span class="keyword">if</span>(f){f.destroy();<span class="local-variable">this</span>.send(c,b).fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">retry</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.triesRemaining[b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L475">
      <a href="#L475">475</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">else</span>{<span class="keyword">if</span>(f&amp;&amp;<span class="local-variable">this</span>.options.timeout){f.destroy();<span class="local-variable">this</span>.cancel().fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>);}}}).delay(<span class="local-variable">this</span>.options.timeout,<span class="local-variable">this</span>);}).delay(Browser.Engine.trident?<span class="integer">50</span>:<span class="integer">0</span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L476">
      <a href="#L476">476</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">cancel</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="local-variable">this</span>.running){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.running=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getScript</span>:<span class="keyword">function</span>(c){<span class="keyword">var</span> b=Request.JSONP.counter,d;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L477">
      <a href="#L477">477</a>
    </th>
    <td class="line-code">
      <pre>Request.JSONP.counter++;<span class="keyword">switch</span>(<span class="predefined">$type</span>(c.data)){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>:d=document.id(c.data).toQueryString();<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>:<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">hash</span><span class="delimiter">&quot;</span></span>:d=Hash.toQueryString(c.data);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L478">
      <a href="#L478">478</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> e=c.url+(c.url.test(<span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="content">?</span><span class="delimiter">&quot;</span></span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>)+(c.callbackKey||<span class="local-variable">this</span>.options.callbackKey)+<span class="string"><span class="delimiter">&quot;</span><span class="content">=Request.JSONP.request_map.request_</span><span class="delimiter">&quot;</span></span>+b+(d?<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;</span><span class="delimiter">&quot;</span></span>+d:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(e.length&gt;<span class="integer">2083</span>){<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">JSONP </span><span class="delimiter">&quot;</span></span>+e+<span class="string"><span class="delimiter">&quot;</span><span class="content"> will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L479">
      <a href="#L479">479</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> a=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">script</span><span class="delimiter">&quot;</span></span>,{<span class="key">type</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span>,<span class="key">src</span>:e});Request.JSONP.request_map[<span class="string"><span class="delimiter">&quot;</span><span class="content">request_</span><span class="delimiter">&quot;</span></span>+b]=<span class="keyword">function</span>(f){<span class="local-variable">this</span>.success(f,a);}.bind(<span class="local-variable">this</span>);<span class="keyword">return</span> a.inject(<span class="local-variable">this</span>.options.injectScript);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L480">
      <a href="#L480">480</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">success</span>:<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(a){a.destroy();}<span class="local-variable">this</span>.running=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">JSONP successfully retrieved: </span><span class="delimiter">&quot;</span></span>,b);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,[b]).fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,[b]).callChain();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L481">
      <a href="#L481">481</a>
    </th>
    <td class="line-code">
      <pre>}});Request.JSONP.counter=<span class="integer">0</span>;Request.JSONP.request_map={};Request.Queue=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events],<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">attach</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">exception</span><span class="delimiter">&quot;</span></span>],<span class="key">options</span>:{<span class="key">stopOnFailure</span>:<span class="predefined-constant">true</span>,<span class="key">autoAdvance</span>:<span class="predefined-constant">true</span>,<span class="key">concurrent</span>:<span class="integer">1</span>,<span class="key">requests</span>:{}},<span class="function">initialize</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a){<span class="keyword">var</span> b=a.requests;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L482">
      <a href="#L482">482</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">delete</span> a.requests;}<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.requests=<span class="keyword">new</span> Hash;<span class="local-variable">this</span>.queue=[];<span class="local-variable">this</span>.reqBinders={};<span class="keyword">if</span>(b){<span class="local-variable">this</span>.addRequests(b);}},<span class="function">addRequest</span>:<span class="keyword">function</span>(a,b){<span class="local-variable">this</span>.requests.set(a,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L483">
      <a href="#L483">483</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.attach(a,b);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">addRequests</span>:<span class="keyword">function</span>(a){<span class="predefined">$each</span>(a,<span class="keyword">function</span>(c,b){<span class="local-variable">this</span>.addRequest(b,c);},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getName</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.requests.keyOf(a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L484">
      <a href="#L484">484</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">attach</span>:<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(b._groupSend){<span class="keyword">return</span> <span class="local-variable">this</span>;}[<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">exception</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(c){<span class="keyword">if</span>(!<span class="local-variable">this</span>.reqBinders[a]){<span class="local-variable">this</span>.reqBinders[a]={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L485">
      <a href="#L485">485</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.reqBinders[a][c]=<span class="keyword">function</span>(){<span class="local-variable">this</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">on</span><span class="delimiter">&quot;</span></span>+c.capitalize()].apply(<span class="local-variable">this</span>,[a,b].extend(<span class="local-variable">arguments</span>));}.bind(<span class="local-variable">this</span>);b.addEvent(c,<span class="local-variable">this</span>.reqBinders[a][c]);},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L486">
      <a href="#L486">486</a>
    </th>
    <td class="line-code">
      <pre>b._groupSend=b.send;b.<span class="function">send</span>=<span class="keyword">function</span>(c){<span class="local-variable">this</span>.send(a,c);<span class="keyword">return</span> b;}.bind(<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">removeRequest</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> a=<span class="predefined">$type</span>(b)==<span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>?<span class="local-variable">this</span>.getName(b):b;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L487">
      <a href="#L487">487</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!a&amp;&amp;<span class="predefined">$type</span>(a)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span> <span class="local-variable">this</span>;}b=<span class="local-variable">this</span>.requests.get(a);<span class="keyword">if</span>(!b){<span class="keyword">return</span> <span class="local-variable">this</span>;}[<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">exception</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(c){b.removeEvent(c,<span class="local-variable">this</span>.reqBinders[a][c]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L488">
      <a href="#L488">488</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);b.send=b._groupSend;<span class="keyword">delete</span> b._groupSend;<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">getRunning</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.requests.filter(<span class="keyword">function</span>(a){<span class="keyword">return</span> a.running;});},<span class="function">isRunning</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> !!(<span class="local-variable">this</span>.getRunning().getKeys().length);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L489">
      <a href="#L489">489</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">send</span>:<span class="keyword">function</span>(b,a){<span class="keyword">var</span> <span class="function">c</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.requests.get(b)._groupSend(a);<span class="local-variable">this</span>.queue.erase(c);}.bind(<span class="local-variable">this</span>);c.name=b;<span class="keyword">if</span>(<span class="local-variable">this</span>.getRunning().getKeys().length&gt;=<span class="local-variable">this</span>.options.concurrent||(<span class="local-variable">this</span>.error&amp;&amp;<span class="local-variable">this</span>.options.stopOnFailure)){<span class="local-variable">this</span>.queue.push(c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L490">
      <a href="#L490">490</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{c();}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">hasNext</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span>(!a)?!!<span class="local-variable">this</span>.queue.length:!!<span class="local-variable">this</span>.queue.filter(<span class="keyword">function</span>(b){<span class="keyword">return</span> b.name==a;}).length;},<span class="function">resume</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.error=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L491">
      <a href="#L491">491</a>
    </th>
    <td class="line-code">
      <pre>(<span class="local-variable">this</span>.options.concurrent-<span class="local-variable">this</span>.getRunning().getKeys().length).times(<span class="local-variable">this</span>.runNext,<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">runNext</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!<span class="local-variable">this</span>.queue.length){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L492">
      <a href="#L492">492</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!a){<span class="local-variable">this</span>.queue[<span class="integer">0</span>]();}<span class="keyword">else</span>{<span class="keyword">var</span> b;<span class="local-variable">this</span>.queue.each(<span class="keyword">function</span>(c){<span class="keyword">if</span>(!b&amp;&amp;c.name==a){b=<span class="predefined-constant">true</span>;c();}});}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">runAll</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.queue.each(<span class="keyword">function</span>(a){a();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L493">
      <a href="#L493">493</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">clear</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!a){<span class="local-variable">this</span>.queue.empty();}<span class="keyword">else</span>{<span class="local-variable">this</span>.queue=<span class="local-variable">this</span>.queue.map(<span class="keyword">function</span>(b){<span class="keyword">if</span>(b.name!=a){<span class="keyword">return</span> b;}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="predefined-constant">false</span>;}}).filter(<span class="keyword">function</span>(b){<span class="keyword">return</span> b;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L494">
      <a href="#L494">494</a>
    </th>
    <td class="line-code">
      <pre>});}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">cancel</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.requests.get(a).cancel();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">onRequest</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);},<span class="function">onComplete</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L495">
      <a href="#L495">495</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.queue.length){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span>);}},<span class="function">onCancel</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.autoAdvance&amp;&amp;!<span class="local-variable">this</span>.error){<span class="local-variable">this</span>.runNext();}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">cancel</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L496">
      <a href="#L496">496</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">onSuccess</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.autoAdvance&amp;&amp;!<span class="local-variable">this</span>.error){<span class="local-variable">this</span>.runNext();}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);},<span class="function">onFailure</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.error=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L497">
      <a href="#L497">497</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.options.stopOnFailure&amp;&amp;<span class="local-variable">this</span>.options.autoAdvance){<span class="local-variable">this</span>.runNext();}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">failure</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);},<span class="function">onException</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.error=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L498">
      <a href="#L498">498</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.options.stopOnFailure&amp;&amp;<span class="local-variable">this</span>.options.autoAdvance){<span class="local-variable">this</span>.runNext();}<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">exception</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">arguments</span>);}});Request.implement({<span class="key">options</span>:{<span class="key">initialDelay</span>:<span class="integer">5000</span>,<span class="key">delay</span>:<span class="integer">5000</span>,<span class="key">limit</span>:<span class="integer">60000</span>},<span class="function">startTimer</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="local-variable">this</span>.running){<span class="local-variable">this</span>.send({<span class="key">data</span>:b});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L499">
      <a href="#L499">499</a>
    </th>
    <td class="line-code">
      <pre>}};<span class="local-variable">this</span>.timer=a.delay(<span class="local-variable">this</span>.options.initialDelay,<span class="local-variable">this</span>);<span class="local-variable">this</span>.lastDelay=<span class="local-variable">this</span>.options.initialDelay;<span class="local-variable">this</span>.<span class="function">completeCheck</span>=<span class="keyword">function</span>(c){<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);<span class="local-variable">this</span>.lastDelay=(c)?<span class="local-variable">this</span>.options.delay:(<span class="local-variable">this</span>.lastDelay+<span class="local-variable">this</span>.options.delay).min(<span class="local-variable">this</span>.options.limit);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L500">
      <a href="#L500">500</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.timer=a.delay(<span class="local-variable">this</span>.lastDelay,<span class="local-variable">this</span>);};<span class="keyword">return</span> <span class="local-variable">this</span>.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.completeCheck);},<span class="function">stopTimer</span>:<span class="keyword">function</span>(){<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);<span class="keyword">return</span> <span class="local-variable">this</span>.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.completeCheck);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L501">
      <a href="#L501">501</a>
    </th>
    <td class="line-code">
      <pre>}});<span class="keyword">var</span> Asset={<span class="function">javascript</span>:<span class="keyword">function</span>(f,d){d=<span class="predefined">$extend</span>({<span class="key">onload</span>:<span class="predefined">$empty</span>,<span class="key">document</span>:document,<span class="key">check</span>:<span class="predefined">$lambda</span>(<span class="predefined-constant">true</span>)},d);<span class="keyword">var</span> b=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">script</span><span class="delimiter">&quot;</span></span>,{<span class="key">src</span>:f,<span class="key">type</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L502">
      <a href="#L502">502</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> e=d.onload.bind(b),a=d.check,g=d.document;<span class="keyword">delete</span> d.onload;<span class="keyword">delete</span> d.check;<span class="keyword">delete</span> d.document;b.addEvents({<span class="key">load</span>:e,<span class="function">readystatechange</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>([<span class="string"><span class="delimiter">&quot;</span><span class="content">loaded</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">complete</span><span class="delimiter">&quot;</span></span>].contains(<span class="local-variable">this</span>.readyState)){e();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L503">
      <a href="#L503">503</a>
    </th>
    <td class="line-code">
      <pre>}}}).set(d);<span class="keyword">if</span>(Browser.Engine.webkit419){<span class="keyword">var</span> c=(<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="predefined">$try</span>(a)){<span class="keyword">return</span>;}<span class="predefined">$clear</span>(c);e();}).periodical(<span class="integer">50</span>);}<span class="keyword">return</span> b.inject(g.head);},<span class="function">css</span>:<span class="keyword">function</span>(b,a){<span class="keyword">return</span> <span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">link</span><span class="delimiter">&quot;</span></span>,<span class="predefined">$merge</span>({<span class="key">rel</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span>,<span class="key">media</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">screen</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">text/css</span><span class="delimiter">&quot;</span></span>,<span class="key">href</span>:b},a)).inject(document.head);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L504">
      <a href="#L504">504</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">image</span>:<span class="keyword">function</span>(c,b){b=<span class="predefined">$merge</span>({<span class="key">onload</span>:<span class="predefined">$empty</span>,<span class="key">onabort</span>:<span class="predefined">$empty</span>,<span class="key">onerror</span>:<span class="predefined">$empty</span>},b);<span class="keyword">var</span> d=<span class="keyword">new</span> Image();<span class="keyword">var</span> a=document.id(d)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">img</span><span class="delimiter">&quot;</span></span>);[<span class="string"><span class="delimiter">&quot;</span><span class="content">load</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">abort</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">error</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(e){<span class="keyword">var</span> f=<span class="string"><span class="delimiter">&quot;</span><span class="content">on</span><span class="delimiter">&quot;</span></span>+e;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L505">
      <a href="#L505">505</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> g=b[f];<span class="keyword">delete</span> b[f];d[f]=<span class="keyword">function</span>(){<span class="keyword">if</span>(!d){<span class="keyword">return</span>;}<span class="keyword">if</span>(!a.parentNode){a.width=d.width;a.height=d.height;}d=d.onload=d.onabort=d.onerror=<span class="predefined-constant">null</span>;g.delay(<span class="integer">1</span>,a,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L506">
      <a href="#L506">506</a>
    </th>
    <td class="line-code">
      <pre>a.fireEvent(e,a,<span class="integer">1</span>);};});d.src=a.src=c;<span class="keyword">if</span>(d&amp;&amp;d.complete){d.onload.delay(<span class="integer">1</span>);}<span class="keyword">return</span> a.set(b);},<span class="function">images</span>:<span class="keyword">function</span>(d,c){c=<span class="predefined">$merge</span>({<span class="key">onComplete</span>:<span class="predefined">$empty</span>,<span class="key">onProgress</span>:<span class="predefined">$empty</span>,<span class="key">onError</span>:<span class="predefined">$empty</span>,<span class="key">properties</span>:{}},c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L507">
      <a href="#L507">507</a>
    </th>
    <td class="line-code">
      <pre>d=<span class="predefined">$splat</span>(d);<span class="keyword">var</span> a=[];<span class="keyword">var</span> b=<span class="integer">0</span>;<span class="keyword">return</span> <span class="keyword">new</span> Elements(d.map(<span class="keyword">function</span>(e){<span class="keyword">return</span> Asset.image(e,<span class="predefined">$extend</span>(c.properties,{<span class="function">onload</span>:<span class="keyword">function</span>(){c.onProgress.call(<span class="local-variable">this</span>,b,d.indexOf(e));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L508">
      <a href="#L508">508</a>
    </th>
    <td class="line-code">
      <pre>b++;<span class="keyword">if</span>(b==d.length){c.onComplete();}},<span class="function">onerror</span>:<span class="keyword">function</span>(){c.onError.call(<span class="local-variable">this</span>,b,d.indexOf(e));b++;<span class="keyword">if</span>(b==d.length){c.onComplete();}}}));}));}};<span class="keyword">var</span> Color=<span class="keyword">new</span> Native({<span class="function">initialize</span>:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(<span class="local-variable">arguments</span>.length&gt;=<span class="integer">3</span>){c=<span class="string"><span class="delimiter">&quot;</span><span class="content">rgb</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L509">
      <a href="#L509">509</a>
    </th>
    <td class="line-code">
      <pre>b=Array.slice(<span class="local-variable">arguments</span>,<span class="integer">0</span>,<span class="integer">3</span>);}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="keyword">typeof</span> b==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){<span class="keyword">if</span>(b.match(<span class="regexp"><span class="delimiter">/</span><span class="content">rgb</span><span class="delimiter">/</span></span>)){b=b.rgbToHex().hexToRgb(<span class="predefined-constant">true</span>);}<span class="keyword">else</span>{<span class="keyword">if</span>(b.match(<span class="regexp"><span class="delimiter">/</span><span class="content">hsb</span><span class="delimiter">/</span></span>)){b=b.hsbToRgb();}<span class="keyword">else</span>{b=b.hexToRgb(<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L510">
      <a href="#L510">510</a>
    </th>
    <td class="line-code">
      <pre>}}}}c=c||<span class="string"><span class="delimiter">&quot;</span><span class="content">rgb</span><span class="delimiter">&quot;</span></span>;<span class="keyword">switch</span>(c){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">hsb</span><span class="delimiter">&quot;</span></span>:<span class="keyword">var</span> a=b;b=b.hsbToRgb();b.hsb=a;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">hex</span><span class="delimiter">&quot;</span></span>:b=b.hexToRgb(<span class="predefined-constant">true</span>);<span class="keyword">break</span>;}b.rgb=b.slice(<span class="integer">0</span>,<span class="integer">3</span>);b.hsb=b.hsb||b.rgbToHsb();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L511">
      <a href="#L511">511</a>
    </th>
    <td class="line-code">
      <pre>b.hex=b.rgbToHex();<span class="keyword">return</span> <span class="predefined">$extend</span>(b,<span class="local-variable">this</span>);}});Color.implement({<span class="function">mix</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.slice(<span class="local-variable">arguments</span>);<span class="keyword">var</span> c=(<span class="predefined">$type</span>(a.getLast())==<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>)?a.pop():<span class="integer">50</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L512">
      <a href="#L512">512</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=<span class="local-variable">this</span>.slice();a.each(<span class="keyword">function</span>(d){d=<span class="keyword">new</span> Color(d);<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="integer">0</span>;e&lt;<span class="integer">3</span>;e++){b[e]=Math.round((b[e]/<span class="integer">100</span>*(<span class="integer">100</span>-c))+(d[e]/<span class="integer">100</span>*c));}});<span class="keyword">return</span> <span class="keyword">new</span> Color(b,<span class="string"><span class="delimiter">&quot;</span><span class="content">rgb</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L513">
      <a href="#L513">513</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">invert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">new</span> Color(<span class="local-variable">this</span>.map(<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="integer">255</span>-a;}));},<span class="function">setHue</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">new</span> Color([a,<span class="local-variable">this</span>.hsb[<span class="integer">1</span>],<span class="local-variable">this</span>.hsb[<span class="integer">2</span>]],<span class="string"><span class="delimiter">&quot;</span><span class="content">hsb</span><span class="delimiter">&quot;</span></span>);},<span class="function">setSaturation</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">new</span> Color([<span class="local-variable">this</span>.hsb[<span class="integer">0</span>],a,<span class="local-variable">this</span>.hsb[<span class="integer">2</span>]],<span class="string"><span class="delimiter">&quot;</span><span class="content">hsb</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L514">
      <a href="#L514">514</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">setBrightness</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">new</span> Color([<span class="local-variable">this</span>.hsb[<span class="integer">0</span>],<span class="local-variable">this</span>.hsb[<span class="integer">1</span>],a],<span class="string"><span class="delimiter">&quot;</span><span class="content">hsb</span><span class="delimiter">&quot;</span></span>);}});<span class="keyword">var</span> <span class="predefined">$RGB</span>=<span class="keyword">function</span>(d,c,a){<span class="keyword">return</span> <span class="keyword">new</span> Color([d,c,a],<span class="string"><span class="delimiter">&quot;</span><span class="content">rgb</span><span class="delimiter">&quot;</span></span>);};<span class="keyword">var</span> <span class="predefined">$HSB</span>=<span class="keyword">function</span>(d,c,a){<span class="keyword">return</span> <span class="keyword">new</span> Color([d,c,a],<span class="string"><span class="delimiter">&quot;</span><span class="content">hsb</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L515">
      <a href="#L515">515</a>
    </th>
    <td class="line-code">
      <pre>};<span class="keyword">var</span> <span class="predefined">$HEX</span>=<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">new</span> Color(a,<span class="string"><span class="delimiter">&quot;</span><span class="content">hex</span><span class="delimiter">&quot;</span></span>);};Array.implement({<span class="function">rgbToHsb</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">this</span>[<span class="integer">0</span>],c=<span class="local-variable">this</span>[<span class="integer">1</span>],j=<span class="local-variable">this</span>[<span class="integer">2</span>],g=<span class="integer">0</span>;<span class="keyword">var</span> i=Math.max(b,c,j),e=Math.min(b,c,j);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L516">
      <a href="#L516">516</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> k=i-e;<span class="keyword">var</span> h=i/<span class="integer">255</span>,f=(i!=<span class="integer">0</span>)?k/i:<span class="integer">0</span>;<span class="keyword">if</span>(f!=<span class="integer">0</span>){<span class="keyword">var</span> d=(i-b)/k;<span class="keyword">var</span> a=(i-c)/k;<span class="keyword">var</span> l=(i-j)/k;<span class="keyword">if</span>(b==i){g=l-a;}<span class="keyword">else</span>{<span class="keyword">if</span>(c==i){g=<span class="integer">2</span>+d-l;}<span class="keyword">else</span>{g=<span class="integer">4</span>+a-d;}}g/=<span class="integer">6</span>;<span class="keyword">if</span>(g&lt;<span class="integer">0</span>){g++;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L517">
      <a href="#L517">517</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span>[Math.round(g*<span class="integer">360</span>),Math.round(f*<span class="integer">100</span>),Math.round(h*<span class="integer">100</span>)];},<span class="function">hsbToRgb</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> c=Math.round(<span class="local-variable">this</span>[<span class="integer">2</span>]/<span class="integer">100</span>*<span class="integer">255</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>[<span class="integer">1</span>]==<span class="integer">0</span>){<span class="keyword">return</span>[c,c,c];}<span class="keyword">else</span>{<span class="keyword">var</span> a=<span class="local-variable">this</span>[<span class="integer">0</span>]%<span class="integer">360</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L518">
      <a href="#L518">518</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> e=a%<span class="integer">60</span>;<span class="keyword">var</span> g=Math.round((<span class="local-variable">this</span>[<span class="integer">2</span>]*(<span class="integer">100</span>-<span class="local-variable">this</span>[<span class="integer">1</span>]))/<span class="integer">10000</span>*<span class="integer">255</span>);<span class="keyword">var</span> d=Math.round((<span class="local-variable">this</span>[<span class="integer">2</span>]*(<span class="integer">6000</span>-<span class="local-variable">this</span>[<span class="integer">1</span>]*e))/<span class="integer">600000</span>*<span class="integer">255</span>);<span class="keyword">var</span> b=Math.round((<span class="local-variable">this</span>[<span class="integer">2</span>]*(<span class="integer">6000</span>-<span class="local-variable">this</span>[<span class="integer">1</span>]*(<span class="integer">60</span>-e)))/<span class="integer">600000</span>*<span class="integer">255</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L519">
      <a href="#L519">519</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">switch</span>(Math.floor(a/<span class="integer">60</span>)){<span class="keyword">case</span> <span class="integer">0</span>:<span class="keyword">return</span>[c,b,g];<span class="keyword">case</span> <span class="integer">1</span>:<span class="keyword">return</span>[d,c,g];<span class="keyword">case</span> <span class="integer">2</span>:<span class="keyword">return</span>[g,c,b];<span class="keyword">case</span> <span class="integer">3</span>:<span class="keyword">return</span>[g,d,c];<span class="keyword">case</span> <span class="integer">4</span>:<span class="keyword">return</span>[b,g,c];<span class="keyword">case</span> <span class="integer">5</span>:<span class="keyword">return</span>[c,g,d];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L520">
      <a href="#L520">520</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="keyword">return</span> <span class="predefined-constant">false</span>;}});String.implement({<span class="function">rgbToHsb</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.match(<span class="regexp"><span class="delimiter">/</span><span class="char">\d</span><span class="content">{1,3}</span><span class="delimiter">/</span><span class="modifier">g</span></span>);<span class="keyword">return</span>(a)?a.rgbToHsb():<span class="predefined-constant">null</span>;},<span class="function">hsbToRgb</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.match(<span class="regexp"><span class="delimiter">/</span><span class="char">\d</span><span class="content">{1,3}</span><span class="delimiter">/</span><span class="modifier">g</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L521">
      <a href="#L521">521</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span>(a)?a.hsbToRgb():<span class="predefined-constant">null</span>;}});<span class="keyword">var</span> Group=<span class="keyword">new</span> Class({<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.instances=Array.flatten(<span class="local-variable">arguments</span>);<span class="local-variable">this</span>.events={};<span class="local-variable">this</span>.checker={};},<span class="function">addEvent</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.checker[b]=<span class="local-variable">this</span>.checker[b]||{};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L522">
      <a href="#L522">522</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.events[b]=<span class="local-variable">this</span>.events[b]||[];<span class="keyword">if</span>(<span class="local-variable">this</span>.events[b].contains(a)){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}<span class="keyword">else</span>{<span class="local-variable">this</span>.events[b].push(a);}<span class="local-variable">this</span>.instances.each(<span class="keyword">function</span>(c,d){c.addEvent(b,<span class="local-variable">this</span>.check.bind(<span class="local-variable">this</span>,[b,c,d]));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L523">
      <a href="#L523">523</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">check</span>:<span class="keyword">function</span>(c,a,b){<span class="local-variable">this</span>.checker[c][b]=<span class="predefined-constant">true</span>;<span class="keyword">var</span> d=<span class="local-variable">this</span>.instances.every(<span class="keyword">function</span>(f,e){<span class="keyword">return</span> <span class="local-variable">this</span>.checker[c][e]||<span class="predefined-constant">false</span>;},<span class="local-variable">this</span>);<span class="keyword">if</span>(!d){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L524">
      <a href="#L524">524</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.checker[c]={};<span class="local-variable">this</span>.events[c].each(<span class="keyword">function</span>(e){e.call(<span class="local-variable">this</span>,<span class="local-variable">this</span>.instances,a);},<span class="local-variable">this</span>);}});Hash.Cookie=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Cookie,<span class="key">options</span>:{<span class="key">autoSave</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.parent(b,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L525">
      <a href="#L525">525</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.load();},<span class="function">save</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=JSON.encode(<span class="local-variable">this</span>.hash);<span class="keyword">if</span>(!a||a.length&gt;<span class="integer">4096</span>){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}<span class="keyword">if</span>(a==<span class="string"><span class="delimiter">&quot;</span><span class="content">{}</span><span class="delimiter">&quot;</span></span>){<span class="local-variable">this</span>.dispose();}<span class="keyword">else</span>{<span class="local-variable">this</span>.write(a);}<span class="keyword">return</span> <span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L526">
      <a href="#L526">526</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">load</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.hash=<span class="keyword">new</span> Hash(JSON.decode(<span class="local-variable">this</span>.read(),<span class="predefined-constant">true</span>));<span class="keyword">return</span> <span class="local-variable">this</span>;}});Hash.each(Hash.prototype,<span class="keyword">function</span>(b,a){<span class="keyword">if</span>(<span class="keyword">typeof</span> b==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>){Hash.Cookie.implement(a,<span class="keyword">function</span>(){<span class="keyword">var</span> c=b.apply(<span class="local-variable">this</span>.hash,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L527">
      <a href="#L527">527</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.autoSave){<span class="local-variable">this</span>.save();}<span class="keyword">return</span> c;});}});<span class="keyword">var</span> IframeShim=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events,Class.Occlude],<span class="key">options</span>:{<span class="key">className</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">iframeShim</span><span class="delimiter">&quot;</span></span>,<span class="key">src</span>:<span class="string"><span class="delimiter">'</span><span class="content">javascript:false;document.write(&quot;&quot;);</span><span class="delimiter">'</span></span>,<span class="key">display</span>:<span class="predefined-constant">false</span>,<span class="key">zIndex</span>:<span class="predefined-constant">null</span>,<span class="key">margin</span>:<span class="integer">0</span>,<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>},<span class="key">browsers</span>:(Browser.Engine.trident4||(Browser.Engine.gecko&amp;&amp;!Browser.Engine.gecko19&amp;&amp;Browser.Platform.mac))},<span class="key">property</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">IframeShim</span><span class="delimiter">&quot;</span></span>,<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.element=document.id(b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L528">
      <a href="#L528">528</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occlude()){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.makeShim();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">makeShim</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.options.browsers){<span class="keyword">var</span> c=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">zIndex</span><span class="delimiter">&quot;</span></span>).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L529">
      <a href="#L529">529</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!c){c=<span class="integer">1</span>;<span class="keyword">var</span> b=<span class="local-variable">this</span>.element.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(b==<span class="string"><span class="delimiter">&quot;</span><span class="content">static</span><span class="delimiter">&quot;</span></span>||!b){<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span>);}<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">zIndex</span><span class="delimiter">&quot;</span></span>,c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L530">
      <a href="#L530">530</a>
    </th>
    <td class="line-code">
      <pre>}c=(<span class="predefined">$chk</span>(<span class="local-variable">this</span>.options.zIndex)&amp;&amp;c&gt;<span class="local-variable">this</span>.options.zIndex)?<span class="local-variable">this</span>.options.zIndex:c-<span class="integer">1</span>;<span class="keyword">if</span>(c&lt;<span class="integer">0</span>){c=<span class="integer">1</span>;}<span class="local-variable">this</span>.shim=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">iframe</span><span class="delimiter">&quot;</span></span>,{<span class="key">src</span>:<span class="local-variable">this</span>.options.src,<span class="key">scrolling</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">no</span><span class="delimiter">&quot;</span></span>,<span class="key">frameborder</span>:<span class="integer">0</span>,<span class="key">styles</span>:{<span class="key">zIndex</span>:c,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">border</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>,<span class="key">filter</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)</span><span class="delimiter">&quot;</span></span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.options.className}).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">IframeShim</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L531">
      <a href="#L531">531</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> a=(<span class="keyword">function</span>(){<span class="local-variable">this</span>.shim.inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">after</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>[<span class="local-variable">this</span>.options.display?<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>]();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>);}).bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(IframeShim.ready){window.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">load</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L532">
      <a href="#L532">532</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{a();}}<span class="keyword">else</span>{<span class="local-variable">this</span>.position=<span class="local-variable">this</span>.hide=<span class="local-variable">this</span>.show=<span class="local-variable">this</span>.dispose=<span class="predefined">$lambda</span>(<span class="local-variable">this</span>);}},<span class="function">position</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(!IframeShim.ready||!<span class="local-variable">this</span>.shim){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="keyword">var</span> a=<span class="local-variable">this</span>.element.measure(<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getSize();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L533">
      <a href="#L533">533</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">if</span>(<span class="local-variable">this</span>.options.margin!=<span class="predefined-constant">undefined</span>){a.x=a.x-(<span class="local-variable">this</span>.options.margin*<span class="integer">2</span>);a.y=a.y-(<span class="local-variable">this</span>.options.margin*<span class="integer">2</span>);<span class="local-variable">this</span>.options.offset.x+=<span class="local-variable">this</span>.options.margin;<span class="local-variable">this</span>.options.offset.y+=<span class="local-variable">this</span>.options.margin;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L534">
      <a href="#L534">534</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.shim.set({<span class="key">width</span>:a.x,<span class="key">height</span>:a.y}).position({<span class="key">relativeTo</span>:<span class="local-variable">this</span>.element,<span class="key">offset</span>:<span class="local-variable">this</span>.options.offset});<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">hide</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.shim){<span class="local-variable">this</span>.shim.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L535">
      <a href="#L535">535</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">show</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.shim){<span class="local-variable">this</span>.shim.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">return</span> <span class="local-variable">this</span>.position();},<span class="function">dispose</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.shim){<span class="local-variable">this</span>.shim.dispose();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L536">
      <a href="#L536">536</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">destroy</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.shim){<span class="local-variable">this</span>.shim.destroy();}<span class="keyword">return</span> <span class="local-variable">this</span>;}});window.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">load</span><span class="delimiter">&quot;</span></span>,<span class="keyword">function</span>(){IframeShim.ready=<span class="predefined-constant">true</span>;});<span class="keyword">var</span> HtmlTable=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events,Class.Occlude],<span class="key">options</span>:{<span class="key">properties</span>:{<span class="key">cellpadding</span>:<span class="integer">0</span>,<span class="key">cellspacing</span>:<span class="integer">0</span>,<span class="key">border</span>:<span class="integer">0</span>},<span class="key">rows</span>:[],<span class="key">headers</span>:[],<span class="key">footers</span>:[]},<span class="key">property</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlTable</span><span class="delimiter">&quot;</span></span>,<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">table</span>:Element.type});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L537">
      <a href="#L537">537</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.setOptions(a.options);<span class="local-variable">this</span>.element=a.table||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">table</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.properties);<span class="keyword">if</span>(<span class="local-variable">this</span>.occlude()){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.build();},<span class="function">build</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlTable</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L538">
      <a href="#L538">538</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.body=document.id(<span class="local-variable">this</span>.element.tBodies[<span class="integer">0</span>])||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">tbody</span><span class="delimiter">&quot;</span></span>).inject(<span class="local-variable">this</span>.element);<span class="predefined">$$</span>(<span class="local-variable">this</span>.body.rows);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.headers.length){<span class="local-variable">this</span>.setHeaders(<span class="local-variable">this</span>.options.headers);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L539">
      <a href="#L539">539</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="local-variable">this</span>.thead=document.id(<span class="local-variable">this</span>.element.tHead);}<span class="keyword">if</span>(<span class="local-variable">this</span>.thead){<span class="local-variable">this</span>.head=document.id(<span class="local-variable">this</span>.thead.rows[<span class="integer">0</span>]);}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.footers.length){<span class="local-variable">this</span>.setFooters(<span class="local-variable">this</span>.options.footers);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L540">
      <a href="#L540">540</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.tfoot=document.id(<span class="local-variable">this</span>.element.tFoot);<span class="keyword">if</span>(<span class="local-variable">this</span>.tfoot){<span class="local-variable">this</span>.foot=document.id(<span class="local-variable">this</span>.thead.rows[<span class="integer">0</span>]);}<span class="local-variable">this</span>.options.rows.each(<span class="keyword">function</span>(a){<span class="local-variable">this</span>.push(a);},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L541">
      <a href="#L541">541</a>
    </th>
    <td class="line-code">
      <pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">adopt</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">wraps</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">grab</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">replaces</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">dispose</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(a){<span class="local-variable">this</span>[a]=<span class="local-variable">this</span>.element[a].bind(<span class="local-variable">this</span>.element);},<span class="local-variable">this</span>);},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.element;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L542">
      <a href="#L542">542</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">empty</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.body.empty();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">setHeaders</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.thead=(document.id(<span class="local-variable">this</span>.element.tHead)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">thead</span><span class="delimiter">&quot;</span></span>).inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>)).empty();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L543">
      <a href="#L543">543</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.push(a,<span class="local-variable">this</span>.thead,<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.head=document.id(<span class="local-variable">this</span>.thead.rows[<span class="integer">0</span>]);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">setFooters</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.tfoot=(document.id(<span class="local-variable">this</span>.element.tFoot)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">tfoot</span><span class="delimiter">&quot;</span></span>).inject(<span class="local-variable">this</span>.element,<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>)).empty();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L544">
      <a href="#L544">544</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.push(a,<span class="local-variable">this</span>.tfoot);<span class="local-variable">this</span>.foot=document.id(<span class="local-variable">this</span>.thead.rows[<span class="integer">0</span>]);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">push</span>:<span class="keyword">function</span>(d,c,a){<span class="keyword">var</span> b=d.map(<span class="keyword">function</span>(g){<span class="keyword">var</span> h=<span class="keyword">new</span> Element(a||<span class="string"><span class="delimiter">&quot;</span><span class="content">td</span><span class="delimiter">&quot;</span></span>,g.properties),f=g.content||g||<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,e=document.id(f);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L545">
      <a href="#L545">545</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(e){h.adopt(e);}<span class="keyword">else</span>{h.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span>,f);}<span class="keyword">return</span> h;});<span class="keyword">return</span>{<span class="key">tr</span>:<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">tr</span><span class="delimiter">&quot;</span></span>).inject(c||<span class="local-variable">this</span>.body).adopt(b),<span class="key">tds</span>:b};}});HtmlTable=Class.refactor(HtmlTable,{<span class="key">options</span>:{<span class="key">classZebra</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-tr-odd</span><span class="delimiter">&quot;</span></span>,<span class="key">zebra</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L546">
      <a href="#L546">546</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occluded){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.zebra){<span class="local-variable">this</span>.updateZebras();}},<span class="function">updateZebras</span>:<span class="keyword">function</span>(){Array.each(<span class="local-variable">this</span>.body.rows,<span class="local-variable">this</span>.zebra,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L547">
      <a href="#L547">547</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">zebra</span>:<span class="keyword">function</span>(b,a){<span class="keyword">return</span> b[((a%<span class="integer">2</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">remove</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">add</span><span class="delimiter">&quot;</span></span>)+<span class="string"><span class="delimiter">&quot;</span><span class="content">Class</span><span class="delimiter">&quot;</span></span>](<span class="local-variable">this</span>.options.classZebra);},<span class="function">push</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.zebra){<span class="local-variable">this</span>.updateZebras();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L548">
      <a href="#L548">548</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> a;}});HtmlTable=Class.refactor(HtmlTable,{<span class="key">options</span>:{<span class="key">sortIndex</span>:<span class="integer">0</span>,<span class="key">sortReverse</span>:<span class="predefined-constant">false</span>,<span class="key">parsers</span>:[],<span class="key">defaultParser</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,<span class="key">classSortable</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-sortable</span><span class="delimiter">&quot;</span></span>,<span class="key">classHeadSort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-th-sort</span><span class="delimiter">&quot;</span></span>,<span class="key">classHeadSortRev</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-th-sort-rev</span><span class="delimiter">&quot;</span></span>,<span class="key">classNoSort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-th-nosort</span><span class="delimiter">&quot;</span></span>,<span class="key">classGroupHead</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-tr-group-head</span><span class="delimiter">&quot;</span></span>,<span class="key">classGroup</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-tr-group</span><span class="delimiter">&quot;</span></span>,<span class="key">classCellSort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-td-sort</span><span class="delimiter">&quot;</span></span>,<span class="key">classSortSpan</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-th-sort-span</span><span class="delimiter">&quot;</span></span>,<span class="key">sortable</span>:<span class="predefined-constant">false</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L549">
      <a href="#L549">549</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occluded){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.sorted={<span class="key">index</span>:<span class="predefined-constant">null</span>,<span class="key">dir</span>:<span class="integer">1</span>};<span class="local-variable">this</span>.bound={<span class="key">headClick</span>:<span class="local-variable">this</span>.headClick.bind(<span class="local-variable">this</span>)};<span class="local-variable">this</span>.sortSpans=<span class="keyword">new</span> Elements();<span class="keyword">if</span>(<span class="local-variable">this</span>.options.sortable){<span class="local-variable">this</span>.enableSort();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L550">
      <a href="#L550">550</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.sortIndex!=<span class="predefined-constant">null</span>){<span class="local-variable">this</span>.sort(<span class="local-variable">this</span>.options.sortIndex,<span class="local-variable">this</span>.options.sortReverse);}}},<span class="function">attachSorts</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.element[<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">addEvent</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">removeEvent</span><span class="delimiter">&quot;</span></span>](<span class="string"><span class="delimiter">&quot;</span><span class="content">click:relay(th)</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.headClick);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L551">
      <a href="#L551">551</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">setHeaders</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.sortEnabled){<span class="local-variable">this</span>.detectParsers();}},<span class="function">detectParsers</span>:<span class="keyword">function</span>(c){<span class="keyword">if</span>(!<span class="local-variable">this</span>.head){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L552">
      <a href="#L552">552</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> a=<span class="local-variable">this</span>.options.parsers,b=<span class="local-variable">this</span>.body.rows;<span class="local-variable">this</span>.parsers=<span class="predefined">$$</span>(<span class="local-variable">this</span>.head.cells).map(<span class="keyword">function</span>(d,e){<span class="keyword">if</span>(!c&amp;&amp;(d.hasClass(<span class="local-variable">this</span>.options.classNoSort)||d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">htmltable-sort</span><span class="delimiter">&quot;</span></span>))){<span class="keyword">return</span> d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">htmltable-sort</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L553">
      <a href="#L553">553</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> g=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">span</span><span class="delimiter">&quot;</span></span>,{<span class="key">html</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;#160;</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.options.classSortSpan}).inject(d,<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.sortSpans.push(g);<span class="keyword">var</span> h=a[e],f;<span class="keyword">switch</span>(<span class="predefined">$type</span>(h)){<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>:h={<span class="key">convert</span>:h};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L554">
      <a href="#L554">554</a>
    </th>
    <td class="line-code">
      <pre>f=<span class="predefined-constant">true</span>;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>:h=h;f=<span class="predefined-constant">true</span>;<span class="keyword">break</span>;}<span class="keyword">if</span>(!f){HtmlTable.Parsers.some(<span class="keyword">function</span>(n){<span class="keyword">var</span> l=n.match;<span class="keyword">if</span>(!l){<span class="keyword">return</span> <span class="predefined-constant">false</span>;}<span class="keyword">if</span>(Browser.Engine.trident){<span class="keyword">return</span> <span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L555">
      <a href="#L555">555</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">for</span>(<span class="keyword">var</span> m=<span class="integer">0</span>,k=b.length;m&lt;k;m++){<span class="keyword">var</span> o=b[m].cells[e].get(<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span>).clean();<span class="keyword">if</span>(o&amp;&amp;l.test(o)){h=n;<span class="keyword">return</span> <span class="predefined-constant">true</span>;}}});}<span class="keyword">if</span>(!h){h=<span class="local-variable">this</span>.options.defaultParser;}d.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">htmltable-parser</span><span class="delimiter">&quot;</span></span>,h);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L556">
      <a href="#L556">556</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> h;},<span class="local-variable">this</span>);},<span class="function">headClick</span>:<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(!<span class="local-variable">this</span>.head){<span class="keyword">return</span>;}<span class="keyword">var</span> a=Array.indexOf(<span class="local-variable">this</span>.head.cells,b);<span class="local-variable">this</span>.sort(a);<span class="keyword">return</span> <span class="predefined-constant">false</span>;},<span class="function">sort</span>:<span class="keyword">function</span>(f,h,m){<span class="keyword">if</span>(!<span class="local-variable">this</span>.head){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L557">
      <a href="#L557">557</a>
    </th>
    <td class="line-code">
      <pre>}m=!!(m);<span class="keyword">var</span> l=<span class="local-variable">this</span>.options.classCellSort;<span class="keyword">var</span> o=<span class="local-variable">this</span>.options.classGroup,t=<span class="local-variable">this</span>.options.classGroupHead;<span class="keyword">if</span>(!m){<span class="keyword">if</span>(f!=<span class="predefined-constant">null</span>){<span class="keyword">if</span>(<span class="local-variable">this</span>.sorted.index==f){<span class="local-variable">this</span>.sorted.reverse=!(<span class="local-variable">this</span>.sorted.reverse);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L558">
      <a href="#L558">558</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.sorted.index!=<span class="predefined-constant">null</span>){<span class="local-variable">this</span>.sorted.reverse=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.head.cells[<span class="local-variable">this</span>.sorted.index].removeClass(<span class="local-variable">this</span>.options.classHeadSort).removeClass(<span class="local-variable">this</span>.options.classHeadSortRev);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L559">
      <a href="#L559">559</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{<span class="local-variable">this</span>.sorted.reverse=<span class="predefined-constant">true</span>;}<span class="local-variable">this</span>.sorted.index=f;}}<span class="keyword">else</span>{f=<span class="local-variable">this</span>.sorted.index;}<span class="keyword">if</span>(h!=<span class="predefined-constant">null</span>){<span class="local-variable">this</span>.sorted.reverse=h;}<span class="keyword">var</span> d=document.id(<span class="local-variable">this</span>.head.cells[f]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L560">
      <a href="#L560">560</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(d){d.addClass(<span class="local-variable">this</span>.options.classHeadSort);<span class="keyword">if</span>(<span class="local-variable">this</span>.sorted.reverse){d.addClass(<span class="local-variable">this</span>.options.classHeadSortRev);}<span class="keyword">else</span>{d.removeClass(<span class="local-variable">this</span>.options.classHeadSortRev);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L561">
      <a href="#L561">561</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="local-variable">this</span>.body.getElements(<span class="string"><span class="delimiter">&quot;</span><span class="content">td</span><span class="delimiter">&quot;</span></span>).removeClass(<span class="local-variable">this</span>.options.classCellSort);}<span class="keyword">var</span> c=<span class="local-variable">this</span>.parsers[f];<span class="keyword">if</span>(<span class="predefined">$type</span>(c)==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){c=HtmlTable.Parsers.get(c);}<span class="keyword">if</span>(!c){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L562">
      <a href="#L562">562</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!Browser.Engine.trident){<span class="keyword">var</span> b=<span class="local-variable">this</span>.body.getParent();<span class="local-variable">this</span>.body.dispose();}<span class="keyword">var</span> s=Array.map(<span class="local-variable">this</span>.body.rows,<span class="keyword">function</span>(v,j){<span class="keyword">var</span> u=c.convert.call(document.id(v.cells[f]));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L563">
      <a href="#L563">563</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span>{<span class="key">position</span>:j,<span class="key">value</span>:u,<span class="function">toString</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> u.toString();}};},<span class="local-variable">this</span>);s.reverse(<span class="predefined-constant">true</span>);s.sort(<span class="keyword">function</span>(j,i){<span class="keyword">if</span>(j.value===i.value){<span class="keyword">return</span> <span class="integer">0</span>;}<span class="keyword">return</span> j.value&gt;i.value?<span class="integer">1</span>:-<span class="integer">1</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L564">
      <a href="#L564">564</a>
    </th>
    <td class="line-code">
      <pre>});<span class="keyword">if</span>(!<span class="local-variable">this</span>.sorted.reverse){s.reverse(<span class="predefined-constant">true</span>);}<span class="keyword">var</span> p=s.length,k=<span class="local-variable">this</span>.body;<span class="keyword">var</span> n,r,a,g;<span class="keyword">while</span>(p){<span class="keyword">var</span> q=s[--p];r=q.position;<span class="keyword">var</span> e=k.rows[r];<span class="keyword">if</span>(e.disabled){<span class="keyword">continue</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L565">
      <a href="#L565">565</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!m){<span class="keyword">if</span>(g===q.value){e.removeClass(t).addClass(o);}<span class="keyword">else</span>{g=q.value;e.removeClass(o).addClass(t);}<span class="keyword">if</span>(<span class="local-variable">this</span>.zebra){<span class="local-variable">this</span>.zebra(e,p);}e.cells[f].addClass(l);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L566">
      <a href="#L566">566</a>
    </th>
    <td class="line-code">
      <pre>}k.appendChild(e);<span class="keyword">for</span>(n=<span class="integer">0</span>;n&lt;p;n++){<span class="keyword">if</span>(s[n].position&gt;r){s[n].position--;}}}s=<span class="predefined-constant">null</span>;<span class="keyword">if</span>(b){b.grab(k);}<span class="keyword">return</span> <span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">sort</span><span class="delimiter">&quot;</span></span>,[k,f]);},<span class="function">reSort</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.sortEnabled){<span class="local-variable">this</span>.sort.call(<span class="local-variable">this</span>,<span class="local-variable">this</span>.sorted.index,<span class="local-variable">this</span>.sorted.reverse);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L567">
      <a href="#L567">567</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">enableSort</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.addClass(<span class="local-variable">this</span>.options.classSortable);<span class="local-variable">this</span>.attachSorts(<span class="predefined-constant">true</span>);<span class="local-variable">this</span>.detectParsers();<span class="local-variable">this</span>.sortEnabled=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L568">
      <a href="#L568">568</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">disableSort</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.remove(<span class="local-variable">this</span>.options.classSortable);<span class="local-variable">this</span>.attachSorts(<span class="predefined-constant">false</span>);<span class="local-variable">this</span>.sortSpans.each(<span class="keyword">function</span>(a){a.destroy();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L569">
      <a href="#L569">569</a>
    </th>
    <td class="line-code">
      <pre>});<span class="local-variable">this</span>.sortSpans.empty();<span class="local-variable">this</span>.sortEnabled=<span class="predefined-constant">false</span>;<span class="keyword">return</span> <span class="local-variable">this</span>;}});HtmlTable.Parsers=<span class="keyword">new</span> Hash({<span class="key">date</span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="char">\d</span><span class="content">{2}[-</span><span class="content">\/</span><span class="content"> ]</span><span class="char">\d</span><span class="content">{2}[-</span><span class="content">\/</span><span class="content"> ]</span><span class="char">\d</span><span class="content">{2,4}$</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> Date.parse(<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>).format(<span class="string"><span class="delimiter">&quot;</span><span class="content">db</span><span class="delimiter">&quot;</span></span>));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L570">
      <a href="#L570">570</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">type</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">input-checked</span><span class="delimiter">&quot;</span></span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content"> type=&quot;(radio|checkbox)&quot; </span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>).checked;}},<span class="key"><span class="delimiter">&quot;</span><span class="content">input-value</span><span class="delimiter">&quot;</span></span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">&lt;input</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.getElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>).value;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L571">
      <a href="#L571">571</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="key">number</span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="char">\d</span><span class="content">+[^</span><span class="char">\d</span><span class="content">.,]*$</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>).toInt();},<span class="key">number</span>:<span class="predefined-constant">true</span>},<span class="key">numberLax</span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^[^</span><span class="char">\d</span><span class="content">]+</span><span class="char">\d</span><span class="content">+$</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">[^-?^0-9]</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).toInt();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L572">
      <a href="#L572">572</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">number</span>:<span class="predefined-constant">true</span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">float</span><span class="delimiter">&quot;</span></span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^[</span><span class="char">\d</span><span class="content">]+</span><span class="content">\.</span><span class="content">[</span><span class="char">\d</span><span class="content">]+</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">[^-?^</span><span class="char">\d</span><span class="content">.]</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).toFloat();},<span class="key">number</span>:<span class="predefined-constant">true</span>},<span class="key">floatLax</span>:{<span class="key">match</span>:<span class="regexp"><span class="delimiter">/</span><span class="content">^[^</span><span class="char">\d</span><span class="content">]+[</span><span class="char">\d</span><span class="content">]+</span><span class="content">\.</span><span class="content">[</span><span class="char">\d</span><span class="content">]+$</span><span class="delimiter">/</span></span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>).replace(<span class="regexp"><span class="delimiter">/</span><span class="content">[^-?^</span><span class="char">\d</span><span class="content">.]</span><span class="delimiter">/</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L573">
      <a href="#L573">573</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">number</span>:<span class="predefined-constant">true</span>},<span class="key">string</span>:{<span class="key">match</span>:<span class="predefined-constant">null</span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>);}},<span class="key">title</span>:{<span class="key">match</span>:<span class="predefined-constant">null</span>,<span class="function">convert</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.title;}}});HtmlTable=Class.refactor(HtmlTable,{<span class="key">options</span>:{<span class="key">useKeyboard</span>:<span class="predefined-constant">true</span>,<span class="key">classRowSelected</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-tr-selected</span><span class="delimiter">&quot;</span></span>,<span class="key">classRowHovered</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-tr-hovered</span><span class="delimiter">&quot;</span></span>,<span class="key">classSelectable</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">table-selectable</span><span class="delimiter">&quot;</span></span>,<span class="key">allowMultiSelect</span>:<span class="predefined-constant">true</span>,<span class="key">selectable</span>:<span class="predefined-constant">false</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L574">
      <a href="#L574">574</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.occluded){<span class="keyword">return</span> <span class="local-variable">this</span>.occluded;}<span class="local-variable">this</span>.selectedRows=<span class="keyword">new</span> Elements();<span class="local-variable">this</span>.bound={<span class="key">mouseleave</span>:<span class="local-variable">this</span>.mouseleave.bind(<span class="local-variable">this</span>),<span class="key">focusRow</span>:<span class="local-variable">this</span>.focusRow.bind(<span class="local-variable">this</span>)};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L575">
      <a href="#L575">575</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.selectable){<span class="local-variable">this</span>.enableSelect();}},<span class="function">enableSelect</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.selectEnabled=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.attachSelects();<span class="local-variable">this</span>.element.addClass(<span class="local-variable">this</span>.options.classSelectable);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L576">
      <a href="#L576">576</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">disableSelect</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.selectEnabled=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.attach(<span class="predefined-constant">false</span>);<span class="local-variable">this</span>.element.removeClass(<span class="local-variable">this</span>.options.classSelectable);},<span class="function">attachSelects</span>:<span class="keyword">function</span>(a){a=<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L577">
      <a href="#L577">577</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> b=a?<span class="string"><span class="delimiter">&quot;</span><span class="content">addEvents</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">removeEvents</span><span class="delimiter">&quot;</span></span>;<span class="local-variable">this</span>.element[b]({<span class="key">mouseleave</span>:<span class="local-variable">this</span>.bound.mouseleave});<span class="local-variable">this</span>.body[b]({<span class="key"><span class="delimiter">&quot;</span><span class="content">click:relay(tr)</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.bound.focusRow});<span class="keyword">if</span>(<span class="local-variable">this</span>.options.useKeyboard||<span class="local-variable">this</span>.keyboard){<span class="keyword">if</span>(!<span class="local-variable">this</span>.keyboard){<span class="local-variable">this</span>.keyboard=<span class="keyword">new</span> Keyboard({<span class="key">events</span>:{<span class="function">down</span>:<span class="keyword">function</span>(c){c.preventDefault();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L578">
      <a href="#L578">578</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.shiftFocus(<span class="integer">1</span>);}.bind(<span class="local-variable">this</span>),<span class="function">up</span>:<span class="keyword">function</span>(c){c.preventDefault();<span class="local-variable">this</span>.shiftFocus(-<span class="integer">1</span>);}.bind(<span class="local-variable">this</span>),<span class="function">enter</span>:<span class="keyword">function</span>(c){c.preventDefault();<span class="keyword">if</span>(<span class="local-variable">this</span>.hover){<span class="local-variable">this</span>.focusRow(<span class="local-variable">this</span>.hover);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L579">
      <a href="#L579">579</a>
    </th>
    <td class="line-code">
      <pre>}}.bind(<span class="local-variable">this</span>)},<span class="key">active</span>:<span class="predefined-constant">true</span>});}<span class="local-variable">this</span>.keyboard[a?<span class="string"><span class="delimiter">&quot;</span><span class="content">activate</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">deactivate</span><span class="delimiter">&quot;</span></span>]();}<span class="local-variable">this</span>.updateSelects();},<span class="function">mouseleave</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.hover){<span class="local-variable">this</span>.leaveRow(<span class="local-variable">this</span>.hover);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L580">
      <a href="#L580">580</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">focus</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.keyboard){<span class="local-variable">this</span>.keyboard.activate();}},<span class="function">blur</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.keyboard){<span class="local-variable">this</span>.keyboard.deactivate();}},<span class="function">push</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="local-variable">this</span>.previous.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L581">
      <a href="#L581">581</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.updateSelects();<span class="keyword">return</span> a;},<span class="function">updateSelects</span>:<span class="keyword">function</span>(){Array.each(<span class="local-variable">this</span>.body.rows,<span class="keyword">function</span>(a){<span class="keyword">var</span> b=a.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">binders</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>((b&amp;&amp;<span class="local-variable">this</span>.selectEnabled)||(!b&amp;&amp;!<span class="local-variable">this</span>.selectEnabled)){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L582">
      <a href="#L582">582</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!b){b={<span class="key">mouseenter</span>:<span class="local-variable">this</span>.enterRow.bind(<span class="local-variable">this</span>,[a]),<span class="key">mouseleave</span>:<span class="local-variable">this</span>.leaveRow.bind(<span class="local-variable">this</span>,[a])};a.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">binders</span><span class="delimiter">&quot;</span></span>,b).addEvents(b);}<span class="keyword">else</span>{a.removeEvents(b);}},<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L583">
      <a href="#L583">583</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">enterRow</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.hover){<span class="local-variable">this</span>.hover=<span class="local-variable">this</span>.leaveRow(<span class="local-variable">this</span>.hover);}<span class="local-variable">this</span>.hover=a.addClass(<span class="local-variable">this</span>.options.classRowHovered);},<span class="function">shiftFocus</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(!<span class="local-variable">this</span>.hover){<span class="keyword">return</span> <span class="local-variable">this</span>.enterRow(<span class="local-variable">this</span>.body.rows[<span class="integer">0</span>]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L584">
      <a href="#L584">584</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">var</span> b=Array.indexOf(<span class="local-variable">this</span>.body.rows,<span class="local-variable">this</span>.hover)+a;<span class="keyword">if</span>(b&lt;<span class="integer">0</span>){b=<span class="integer">0</span>;}<span class="keyword">if</span>(b&gt;=<span class="local-variable">this</span>.body.rows.length){b=<span class="local-variable">this</span>.body.rows.length-<span class="integer">1</span>;}<span class="keyword">if</span>(<span class="local-variable">this</span>.hover==<span class="local-variable">this</span>.body.rows[b]){<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L585">
      <a href="#L585">585</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.enterRow(<span class="local-variable">this</span>.body.rows[b]);},<span class="function">leaveRow</span>:<span class="keyword">function</span>(a){a.removeClass(<span class="local-variable">this</span>.options.classRowHovered);},<span class="function">focusRow</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">arguments</span>[<span class="integer">1</span>]||<span class="local-variable">arguments</span>[<span class="integer">0</span>];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L586">
      <a href="#L586">586</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.body.getChildren().contains(b)){<span class="keyword">return</span>;}<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(c){<span class="local-variable">this</span>.selectedRows.erase(c);c.removeClass(<span class="local-variable">this</span>.options.classRowSelected);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">rowUnfocus</span><span class="delimiter">&quot;</span></span>,[c,<span class="local-variable">this</span>.selectedRows]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L587">
      <a href="#L587">587</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.allowMultiSelect){<span class="local-variable">this</span>.selectedRows.each(a);}<span class="keyword">if</span>(!<span class="local-variable">this</span>.selectedRows.contains(b)){<span class="local-variable">this</span>.selectedRows.push(b);b.addClass(<span class="local-variable">this</span>.options.classRowSelected);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L588">
      <a href="#L588">588</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">rowFocus</span><span class="delimiter">&quot;</span></span>,[b,<span class="local-variable">this</span>.selectedRows]);}<span class="keyword">else</span>{a(b);}<span class="keyword">return</span> <span class="predefined-constant">false</span>;},<span class="function">selectAll</span>:<span class="keyword">function</span>(a){a=<span class="predefined">$pick</span>(a,<span class="predefined-constant">true</span>);<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.allowMultiSelect&amp;&amp;a){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L589">
      <a href="#L589">589</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(!a){<span class="local-variable">this</span>.selectedRows.removeClass(<span class="local-variable">this</span>.options.classRowSelected).empty();}<span class="keyword">else</span>{<span class="local-variable">this</span>.selectedRows.combine(<span class="local-variable">this</span>.body.rows).addClass(<span class="local-variable">this</span>.options.classRowSelected);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L590">
      <a href="#L590">590</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">selectNone</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.selectAll(<span class="predefined-constant">false</span>);}});(<span class="keyword">function</span>(){<span class="keyword">var</span> a={};<span class="keyword">var</span> b=[<span class="string"><span class="delimiter">&quot;</span><span class="content">shift</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">control</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">alt</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">meta</span><span class="delimiter">&quot;</span></span>];<span class="keyword">var</span> d=<span class="regexp"><span class="delimiter">/</span><span class="content">^(?:shift|control|ctrl|alt|meta)$</span><span class="delimiter">/</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L591">
      <a href="#L591">591</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">var</span> <span class="function">e</span>=<span class="keyword">function</span>(i,h){i=i.toLowerCase().replace(<span class="regexp"><span class="delimiter">/</span><span class="content">^(keyup|keydown):</span><span class="delimiter">/</span></span>,<span class="keyword">function</span>(l,k){h=k;<span class="keyword">return</span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;});<span class="keyword">if</span>(!a[i]){<span class="keyword">var</span> g=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,j={};i.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>).each(<span class="keyword">function</span>(k){<span class="keyword">if</span>(d.test(k)){j[k]=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L592">
      <a href="#L592">592</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">else</span>{g=k;}});j.control=j.control||j.ctrl;<span class="keyword">var</span> f=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;b.each(<span class="keyword">function</span>(k){<span class="keyword">if</span>(j[k]){f+=k+<span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>;}});a[i]=f+g;}<span class="keyword">return</span> h+<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+a[i];};<span class="local-variable">this</span>.Keyboard=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Events,<span class="key">Implements</span>:[Options,Log],<span class="key">options</span>:{<span class="key">defaultEventType</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">keydown</span><span class="delimiter">&quot;</span></span>,<span class="key">active</span>:<span class="predefined-constant">false</span>,<span class="key">events</span>:{}},<span class="function">initialize</span>:<span class="keyword">function</span>(f){<span class="local-variable">this</span>.setOptions(f);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L593">
      <a href="#L593">593</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(Keyboard.manager){Keyboard.manager.manage(<span class="local-variable">this</span>);}<span class="local-variable">this</span>.setup();},<span class="function">setup</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.addEvents(<span class="local-variable">this</span>.options.events);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.active){<span class="local-variable">this</span>.activate();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L594">
      <a href="#L594">594</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">handle</span>:<span class="keyword">function</span>(h,g){<span class="keyword">if</span>(!<span class="local-variable">this</span>.active||h.preventKeyboardPropagation){<span class="keyword">return</span>;}<span class="keyword">var</span> f=!!<span class="local-variable">this</span>.manager;<span class="keyword">if</span>(f&amp;&amp;<span class="local-variable">this</span>.activeKB){<span class="local-variable">this</span>.activeKB.handle(h,g);<span class="keyword">if</span>(h.preventKeyboardPropagation){<span class="keyword">return</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L595">
      <a href="#L595">595</a>
    </th>
    <td class="line-code">
      <pre>}}<span class="local-variable">this</span>.fireEvent(g,h);<span class="keyword">if</span>(!f&amp;&amp;<span class="local-variable">this</span>.activeKB){<span class="local-variable">this</span>.activeKB.handle(h,g);}},<span class="function">addEvent</span>:<span class="keyword">function</span>(h,g,f){<span class="keyword">return</span> <span class="local-variable">this</span>.parent(e(h,<span class="local-variable">this</span>.options.defaultEventType),g,f);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L596">
      <a href="#L596">596</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">removeEvent</span>:<span class="keyword">function</span>(g,f){<span class="keyword">return</span> <span class="local-variable">this</span>.parent(e(g,<span class="local-variable">this</span>.options.defaultEventType),f);},<span class="function">activate</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.active=<span class="predefined-constant">true</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.enable();},<span class="function">deactivate</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.active=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L597">
      <a href="#L597">597</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">deactivate</span><span class="delimiter">&quot;</span></span>);},<span class="function">toggleActive</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>[<span class="local-variable">this</span>.active?<span class="string"><span class="delimiter">&quot;</span><span class="content">deactivate</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">activate</span><span class="delimiter">&quot;</span></span>]();},<span class="function">enable</span>:<span class="keyword">function</span>(f){<span class="keyword">if</span>(f){<span class="keyword">if</span>(f!=<span class="local-variable">this</span>.activeKB){<span class="local-variable">this</span>.previous=<span class="local-variable">this</span>.activeKB;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L598">
      <a href="#L598">598</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.activeKB=f.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">activate</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.manager){<span class="local-variable">this</span>.manager.enable(<span class="local-variable">this</span>);}}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">relenquish</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.previous){<span class="local-variable">this</span>.enable(<span class="local-variable">this</span>.previous);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L599">
      <a href="#L599">599</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">manage</span>:<span class="keyword">function</span>(f){<span class="keyword">if</span>(f.manager){f.manager.drop(f);}<span class="local-variable">this</span>.instances.push(f);f.manager=<span class="local-variable">this</span>;<span class="keyword">if</span>(!<span class="local-variable">this</span>.activeKB){<span class="local-variable">this</span>.enable(f);}<span class="keyword">else</span>{<span class="local-variable">this</span>._disable(f);}},<span class="function">_disable</span>:<span class="keyword">function</span>(f){<span class="keyword">if</span>(<span class="local-variable">this</span>.activeKB==f){<span class="local-variable">this</span>.activeKB=<span class="predefined-constant">null</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L600">
      <a href="#L600">600</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">drop</span>:<span class="keyword">function</span>(f){<span class="local-variable">this</span>._disable(f);<span class="local-variable">this</span>.instances.erase(f);},<span class="key">instances</span>:[],<span class="function">trace</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.enableLog();<span class="keyword">var</span> f=<span class="local-variable">this</span>;<span class="local-variable">this</span>.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">the following items have focus: </span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L601">
      <a href="#L601">601</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">while</span>(f){<span class="local-variable">this</span>.log(document.id(f.widget)||f.widget||f,<span class="string"><span class="delimiter">&quot;</span><span class="content">active: </span><span class="delimiter">&quot;</span></span>+<span class="local-variable">this</span>.active);f=f.activeKB;}}});Keyboard.<span class="function">stop</span>=<span class="keyword">function</span>(f){f.preventKeyboardPropagation=<span class="predefined-constant">true</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L602">
      <a href="#L602">602</a>
    </th>
    <td class="line-code">
      <pre>};Keyboard.manager=<span class="keyword">new</span> <span class="local-variable">this</span>.Keyboard({<span class="key">active</span>:<span class="predefined-constant">true</span>});Keyboard.<span class="function">trace</span>=<span class="keyword">function</span>(){Keyboard.manager.trace();};<span class="keyword">var</span> <span class="function">c</span>=<span class="keyword">function</span>(g){<span class="keyword">var</span> f=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;b.each(<span class="keyword">function</span>(h){<span class="keyword">if</span>(g[h]){f+=h+<span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L603">
      <a href="#L603">603</a>
    </th>
    <td class="line-code">
      <pre>}});Keyboard.manager.handle(g,g.type+<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>+f+g.key);};document.addEvents({<span class="key">keyup</span>:c,<span class="key">keydown</span>:c});Event.Keys.extend({<span class="key">pageup</span>:<span class="integer">33</span>,<span class="key">pagedown</span>:<span class="integer">34</span>,<span class="key">end</span>:<span class="integer">35</span>,<span class="key">home</span>:<span class="integer">36</span>,<span class="key">capslock</span>:<span class="integer">20</span>,<span class="key">numlock</span>:<span class="integer">144</span>,<span class="key">scrolllock</span>:<span class="integer">145</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L604">
      <a href="#L604">604</a>
    </th>
    <td class="line-code">
      <pre>})();<span class="keyword">var</span> Mask=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Options,Events],<span class="key">Binds</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>],<span class="key">options</span>:{<span class="key">style</span>:{},<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>,<span class="key">maskMargins</span>:<span class="predefined-constant">false</span>,<span class="key">useIframeShim</span>:<span class="predefined-constant">true</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.target=document.id(b)||document.body;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L605">
      <a href="#L605">605</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.target.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>);<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.render();<span class="local-variable">this</span>.inject();},<span class="function">render</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.options[<span class="string"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>],<span class="key">id</span>:<span class="local-variable">this</span>.options.id||<span class="string"><span class="delimiter">&quot;</span><span class="content">mask-</span><span class="delimiter">&quot;</span></span>+<span class="predefined">$time</span>(),<span class="key">styles</span>:<span class="predefined">$merge</span>(<span class="local-variable">this</span>.options.style,{<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>}),<span class="key">events</span>:{<span class="function">click</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L606">
      <a href="#L606">606</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.hideOnClick){<span class="local-variable">this</span>.hide();}}.bind(<span class="local-variable">this</span>)}});<span class="local-variable">this</span>.hidden=<span class="predefined-constant">true</span>;},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.element;},<span class="function">inject</span>:<span class="keyword">function</span>(b,a){a=a||<span class="local-variable">this</span>.options.inject?<span class="local-variable">this</span>.options.inject.where:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.target==document.body?<span class="string"><span class="delimiter">&quot;</span><span class="content">inside</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">after</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L607">
      <a href="#L607">607</a>
    </th>
    <td class="line-code">
      <pre>b=b||<span class="local-variable">this</span>.options.inject?<span class="local-variable">this</span>.options.inject.target:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>||<span class="local-variable">this</span>.target;<span class="local-variable">this</span>.element.inject(b,a);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.useIframeShim){<span class="local-variable">this</span>.shim=<span class="keyword">new</span> IframeShim(<span class="local-variable">this</span>.element);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L608">
      <a href="#L608">608</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.addEvents({<span class="key">show</span>:<span class="local-variable">this</span>.shim.show.bind(<span class="local-variable">this</span>.shim),<span class="key">hide</span>:<span class="local-variable">this</span>.shim.hide.bind(<span class="local-variable">this</span>.shim),<span class="key">destroy</span>:<span class="local-variable">this</span>.shim.destroy.bind(<span class="local-variable">this</span>.shim)});}},<span class="function">position</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.resize(<span class="local-variable">this</span>.options.width,<span class="local-variable">this</span>.options.height);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L609">
      <a href="#L609">609</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.element.position({<span class="key">relativeTo</span>:<span class="local-variable">this</span>.target,<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">topLeft</span><span class="delimiter">&quot;</span></span>,<span class="key">ignoreMargins</span>:!<span class="local-variable">this</span>.options.maskMargins,<span class="key">ignoreScroll</span>:<span class="local-variable">this</span>.target==document.body});<span class="keyword">return</span> <span class="local-variable">this</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L610">
      <a href="#L610">610</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">resize</span>:<span class="keyword">function</span>(a,e){<span class="keyword">var</span> b={<span class="key">styles</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">padding</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">border</span><span class="delimiter">&quot;</span></span>]};<span class="keyword">if</span>(<span class="local-variable">this</span>.options.maskMargins){b.styles.push(<span class="string"><span class="delimiter">&quot;</span><span class="content">margin</span><span class="delimiter">&quot;</span></span>);}<span class="keyword">var</span> d=<span class="local-variable">this</span>.target.getComputedSize(b);<span class="keyword">if</span>(<span class="local-variable">this</span>.target==document.body){<span class="keyword">var</span> c=window.getSize();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L611">
      <a href="#L611">611</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(d.totalHeight&lt;c.y){d.totalHeight=c.y;}<span class="keyword">if</span>(d.totalWidth&lt;c.x){d.totalWidth=c.x;}}<span class="local-variable">this</span>.element.setStyles({<span class="key">width</span>:<span class="predefined">$pick</span>(a,d.totalWidth,d.x),<span class="key">height</span>:<span class="predefined">$pick</span>(e,d.totalHeight,d.y)});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L612">
      <a href="#L612">612</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">show</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(!<span class="local-variable">this</span>.hidden){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.target.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.resize);<span class="keyword">if</span>(<span class="local-variable">this</span>.target!=document.body){document.id(document.body).addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.resize);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L613">
      <a href="#L613">613</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.position();<span class="local-variable">this</span>.showMask.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">showMask</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.hidden=<span class="predefined-constant">false</span>;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L614">
      <a href="#L614">614</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">hide</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.hidden){<span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.target.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.resize);<span class="local-variable">this</span>.hideMask.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.destroyOnHide){<span class="keyword">return</span> <span class="local-variable">this</span>.destroy();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L615">
      <a href="#L615">615</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">hideMask</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.hidden=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>);},<span class="function">toggle</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>[<span class="local-variable">this</span>.hidden?<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>]();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L616">
      <a href="#L616">616</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">destroy</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.hide();<span class="local-variable">this</span>.element.destroy();<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">destroy</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.target.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>);}});Element.Properties.mask={<span class="function">set</span>:<span class="keyword">function</span>(b){<span class="keyword">var</span> a=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L617">
      <a href="#L617">617</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask:options</span><span class="delimiter">&quot;</span></span>,b);},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>).destroy();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L618">
      <a href="#L618">618</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>,a);}<span class="local-variable">this</span>.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>,<span class="keyword">new</span> Mask(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask:options</span><span class="delimiter">&quot;</span></span>)));}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L619">
      <a href="#L619">619</a>
    </th>
    <td class="line-code">
      <pre>}};Element.implement({<span class="function">mask</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>,a).show();<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">unmask</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">mask</span><span class="delimiter">&quot;</span></span>).hide();<span class="keyword">return</span> <span class="local-variable">this</span>;}});<span class="keyword">var</span> Scroller=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Events,Options],<span class="key">options</span>:{<span class="key">area</span>:<span class="integer">20</span>,<span class="key">velocity</span>:<span class="integer">1</span>,<span class="function">onChange</span>:<span class="keyword">function</span>(a,b){<span class="local-variable">this</span>.element.scrollTo(a,b);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L620">
      <a href="#L620">620</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">fps</span>:<span class="integer">50</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(b,a){<span class="local-variable">this</span>.setOptions(a);<span class="local-variable">this</span>.element=document.id(b);<span class="local-variable">this</span>.listener=(<span class="predefined">$type</span>(<span class="local-variable">this</span>.element)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>)?document.id(<span class="local-variable">this</span>.element.getDocument().body):<span class="local-variable">this</span>.element;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L621">
      <a href="#L621">621</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.timer=<span class="predefined-constant">null</span>;<span class="local-variable">this</span>.bound={<span class="key">attach</span>:<span class="local-variable">this</span>.attach.bind(<span class="local-variable">this</span>),<span class="key">detach</span>:<span class="local-variable">this</span>.detach.bind(<span class="local-variable">this</span>),<span class="key">getCoords</span>:<span class="local-variable">this</span>.getCoords.bind(<span class="local-variable">this</span>)};},<span class="function">start</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.listener.addEvents({<span class="key">mouseover</span>:<span class="local-variable">this</span>.bound.attach,<span class="key">mouseout</span>:<span class="local-variable">this</span>.bound.detach});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L622">
      <a href="#L622">622</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">stop</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.listener.removeEvents({<span class="key">mouseover</span>:<span class="local-variable">this</span>.bound.attach,<span class="key">mouseout</span>:<span class="local-variable">this</span>.bound.detach});<span class="local-variable">this</span>.detach();<span class="local-variable">this</span>.timer=<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);},<span class="function">attach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.listener.addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousemove</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.getCoords);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L623">
      <a href="#L623">623</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">detach</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.listener.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mousemove</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.bound.getCoords);<span class="local-variable">this</span>.timer=<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);},<span class="function">getCoords</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.page=(<span class="local-variable">this</span>.listener.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">tag</span><span class="delimiter">&quot;</span></span>)==<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span>)?a.client:a.page;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L624">
      <a href="#L624">624</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!<span class="local-variable">this</span>.timer){<span class="local-variable">this</span>.timer=<span class="local-variable">this</span>.scroll.periodical(Math.round(<span class="integer">1000</span>/<span class="local-variable">this</span>.options.fps),<span class="local-variable">this</span>);}},<span class="function">scroll</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="local-variable">this</span>.element.getSize(),a=<span class="local-variable">this</span>.element.getScroll(),f=<span class="local-variable">this</span>.element.getOffsets(),c=<span class="local-variable">this</span>.element.getScrollSize(),e={<span class="key">x</span>:<span class="integer">0</span>,<span class="key">y</span>:<span class="integer">0</span>};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L625">
      <a href="#L625">625</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> <span class="local-variable">this</span>.page){<span class="keyword">if</span>(<span class="local-variable">this</span>.page[d]&lt;(<span class="local-variable">this</span>.options.area+f[d])&amp;&amp;a[d]!=<span class="integer">0</span>){e[d]=(<span class="local-variable">this</span>.page[d]-<span class="local-variable">this</span>.options.area-f[d])*<span class="local-variable">this</span>.options.velocity;}<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="local-variable">this</span>.page[d]+<span class="local-variable">this</span>.options.area&gt;(b[d]+f[d])&amp;&amp;a[d]+b[d]!=c[d]){e[d]=(<span class="local-variable">this</span>.page[d]-b[d]+<span class="local-variable">this</span>.options.area-f[d])*<span class="local-variable">this</span>.options.velocity;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L626">
      <a href="#L626">626</a>
    </th>
    <td class="line-code">
      <pre>}}}<span class="keyword">if</span>(e.y||e.x){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span>,[a.x+e.x,a.y+e.y]);}}});(<span class="keyword">function</span>(){<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(c,b){<span class="keyword">return</span>(c)?(<span class="predefined">$type</span>(c)==<span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>?c(b):b.get(c)):<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;};<span class="local-variable">this</span>.Tips=<span class="keyword">new</span> Class({<span class="key">Implements</span>:[Events,Options],<span class="key">options</span>:{<span class="function">onShow</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.tip.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L627">
      <a href="#L627">627</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">onHide</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.tip.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);},<span class="key">title</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,<span class="function">text</span>:<span class="keyword">function</span>(b){<span class="keyword">return</span> b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>)||b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>);},<span class="key">showDelay</span>:<span class="integer">100</span>,<span class="key">hideDelay</span>:<span class="integer">100</span>,<span class="key">className</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">tip-wrap</span><span class="delimiter">&quot;</span></span>,<span class="key">offset</span>:{<span class="key">x</span>:<span class="integer">16</span>,<span class="key">y</span>:<span class="integer">16</span>},<span class="key">fixed</span>:<span class="predefined-constant">false</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> b=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">elements</span>:<span class="predefined">$defined</span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L628">
      <a href="#L628">628</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.setOptions(b.options);document.id(<span class="local-variable">this</span>);<span class="keyword">if</span>(b.elements){<span class="local-variable">this</span>.attach(b.elements);}},<span class="function">toElement</span>:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="local-variable">this</span>.tip){<span class="keyword">return</span> <span class="local-variable">this</span>.tip;}<span class="local-variable">this</span>.container=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">tip</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L629">
      <a href="#L629">629</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>.tip=<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="local-variable">this</span>.options.className,<span class="key">styles</span>:{<span class="key">position</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">absolute</span><span class="delimiter">&quot;</span></span>,<span class="key">top</span>:<span class="integer">0</span>,<span class="key">left</span>:<span class="integer">0</span>}}).adopt(<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">tip-top</span><span class="delimiter">&quot;</span></span>}),<span class="local-variable">this</span>.container,<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">tip-bottom</span><span class="delimiter">&quot;</span></span>})).inject(document.body);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L630">
      <a href="#L630">630</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">attach</span>:<span class="keyword">function</span>(b){<span class="predefined">$$</span>(b).each(<span class="keyword">function</span>(d){<span class="keyword">var</span> f=a(<span class="local-variable">this</span>.options.title,d),e=a(<span class="local-variable">this</span>.options.text,d);d.erase(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:native</span><span class="delimiter">&quot;</span></span>,f).retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:title</span><span class="delimiter">&quot;</span></span>,f);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L631">
      <a href="#L631">631</a>
    </th>
    <td class="line-code">
      <pre>d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:text</span><span class="delimiter">&quot;</span></span>,e);<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">attach</span><span class="delimiter">&quot;</span></span>,[d]);<span class="keyword">var</span> c=[<span class="string"><span class="delimiter">&quot;</span><span class="content">enter</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">leave</span><span class="delimiter">&quot;</span></span>];<span class="keyword">if</span>(!<span class="local-variable">this</span>.options.fixed){c.push(<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>);}c.each(<span class="keyword">function</span>(h){<span class="keyword">var</span> g=d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:</span><span class="delimiter">&quot;</span></span>+h);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L632">
      <a href="#L632">632</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(!g){g=<span class="local-variable">this</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>+h.capitalize()].bindWithEvent(<span class="local-variable">this</span>,d);}d.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:</span><span class="delimiter">&quot;</span></span>+h,g).addEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mouse</span><span class="delimiter">&quot;</span></span>+h,g);},<span class="local-variable">this</span>);},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">detach</span>:<span class="keyword">function</span>(b){<span class="predefined">$$</span>(b).each(<span class="keyword">function</span>(d){[<span class="string"><span class="delimiter">&quot;</span><span class="content">enter</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">leave</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">move</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(e){d.removeEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mouse</span><span class="delimiter">&quot;</span></span>+e,d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:</span><span class="delimiter">&quot;</span></span>+e)).eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:</span><span class="delimiter">&quot;</span></span>+e);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L633">
      <a href="#L633">633</a>
    </th>
    <td class="line-code">
      <pre>});<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">detach</span><span class="delimiter">&quot;</span></span>,[d]);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.title==<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>){<span class="keyword">var</span> c=d.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:native</span><span class="delimiter">&quot;</span></span>);<span class="keyword">if</span>(c){d.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,c);}}},<span class="local-variable">this</span>);<span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">elementEnter</span>:<span class="keyword">function</span>(c,b){<span class="local-variable">this</span>.container.empty();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L634">
      <a href="#L634">634</a>
    </th>
    <td class="line-code">
      <pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(e){<span class="keyword">var</span> d=b.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:</span><span class="delimiter">&quot;</span></span>+e);<span class="keyword">if</span>(d){<span class="local-variable">this</span>.fill(<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">tip-</span><span class="delimiter">&quot;</span></span>+e}).inject(<span class="local-variable">this</span>.container),d);}},<span class="local-variable">this</span>);<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L635">
      <a href="#L635">635</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.timer=<span class="local-variable">this</span>.show.delay(<span class="local-variable">this</span>.options.showDelay,<span class="local-variable">this</span>,b);<span class="local-variable">this</span>.position((<span class="local-variable">this</span>.options.fixed)?{<span class="key">page</span>:b.getPosition()}:c);},<span class="function">elementLeave</span>:<span class="keyword">function</span>(c,b){<span class="predefined">$clear</span>(<span class="local-variable">this</span>.timer);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L636">
      <a href="#L636">636</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.timer=<span class="local-variable">this</span>.hide.delay(<span class="local-variable">this</span>.options.hideDelay,<span class="local-variable">this</span>,b);<span class="local-variable">this</span>.fireForParent(c,b);},<span class="function">fireForParent</span>:<span class="keyword">function</span>(c,b){<span class="keyword">if</span>(!b||<span class="predefined">$type</span>(b)!=<span class="string"><span class="delimiter">&quot;</span><span class="content">element</span><span class="delimiter">&quot;</span></span>){<span class="keyword">return</span>;}parentNode=b.getParent();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L637">
      <a href="#L637">637</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(parentNode==document.body){<span class="keyword">return</span>;}<span class="keyword">if</span>(parentNode.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">tip:enter</span><span class="delimiter">&quot;</span></span>)){parentNode.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">mouseenter</span><span class="delimiter">&quot;</span></span>,c);}<span class="keyword">else</span>{<span class="local-variable">this</span>.fireForParent(parentNode,c);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L638">
      <a href="#L638">638</a>
    </th>
    <td class="line-code">
      <pre>}},<span class="function">elementMove</span>:<span class="keyword">function</span>(c,b){<span class="local-variable">this</span>.position(c);},<span class="function">position</span>:<span class="keyword">function</span>(e){<span class="keyword">var</span> c=window.getSize(),b=window.getScroll(),f={<span class="key">x</span>:<span class="local-variable">this</span>.tip.offsetWidth,<span class="key">y</span>:<span class="local-variable">this</span>.tip.offsetHeight},d={<span class="key">x</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>,<span class="key">y</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>},g={};
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L639">
      <a href="#L639">639</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">for</span>(<span class="keyword">var</span> h <span class="keyword">in</span> d){g[d[h]]=e.page[h]+<span class="local-variable">this</span>.options.offset[h];<span class="keyword">if</span>((g[d[h]]+f[h]-b[h])&gt;c[h]){g[d[h]]=e.page[h]-<span class="local-variable">this</span>.options.offset[h]-f[h];}}<span class="local-variable">this</span>.tip.setStyles(g);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L640">
      <a href="#L640">640</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">fill</span>:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(<span class="keyword">typeof</span> c==<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>){b.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span>,c);}<span class="keyword">else</span>{b.adopt(c);}},<span class="function">show</span>:<span class="keyword">function</span>(b){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.tip,b]);},<span class="function">hide</span>:<span class="keyword">function</span>(b){<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>,[<span class="local-variable">this</span>.tip,b]);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L641">
      <a href="#L641">641</a>
    </th>
    <td class="line-code">
      <pre>}});})();<span class="keyword">var</span> Spinner=<span class="keyword">new</span> Class({<span class="key">Extends</span>:Mask,<span class="key">options</span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,<span class="key">containerPosition</span>:{},<span class="key">content</span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner-content</span><span class="delimiter">&quot;</span></span>},<span class="key">messageContainer</span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner-msg</span><span class="delimiter">&quot;</span></span>},<span class="key">img</span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner-img</span><span class="delimiter">&quot;</span></span>},<span class="key">fxOptions</span>:{<span class="key">link</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">chain</span><span class="delimiter">&quot;</span></span>}},<span class="function">initialize</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.parent.apply(<span class="local-variable">this</span>,<span class="local-variable">arguments</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L642">
      <a href="#L642">642</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.target.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>);<span class="keyword">var</span> <span class="function">a</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.active=<span class="predefined-constant">false</span>;}.bind(<span class="local-variable">this</span>);<span class="local-variable">this</span>.addEvents({<span class="key">hide</span>:a,<span class="key">show</span>:a});},<span class="function">render</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.parent();<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.id||<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner-</span><span class="delimiter">&quot;</span></span>+<span class="predefined">$time</span>());
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L643">
      <a href="#L643">643</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.content=document.id(<span class="local-variable">this</span>.options.content)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.content);<span class="local-variable">this</span>.content.inject(<span class="local-variable">this</span>.element);<span class="keyword">if</span>(<span class="local-variable">this</span>.options.message){<span class="local-variable">this</span>.msg=document.id(<span class="local-variable">this</span>.options.message)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.messageContainer).appendText(<span class="local-variable">this</span>.options.message);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L644">
      <a href="#L644">644</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.msg.inject(<span class="local-variable">this</span>.content);}<span class="keyword">if</span>(<span class="local-variable">this</span>.options.img){<span class="local-variable">this</span>.img=document.id(<span class="local-variable">this</span>.options.img)||<span class="keyword">new</span> Element(<span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.img);<span class="local-variable">this</span>.img.inject(<span class="local-variable">this</span>.content);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L645">
      <a href="#L645">645</a>
    </th>
    <td class="line-code">
      <pre>}<span class="local-variable">this</span>.element.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">tween</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.fxOptions);},<span class="function">show</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.active){<span class="keyword">return</span> <span class="local-variable">this</span>.chain(<span class="local-variable">this</span>.show.bind(<span class="local-variable">this</span>));}<span class="keyword">if</span>(!<span class="local-variable">this</span>.hidden){<span class="local-variable">this</span>.callChain.delay(<span class="integer">20</span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L646">
      <a href="#L646">646</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.active=<span class="predefined-constant">true</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.parent(a);},<span class="function">showMask</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> <span class="function">b</span>=<span class="keyword">function</span>(){<span class="local-variable">this</span>.content.position(<span class="predefined">$merge</span>({<span class="key">relativeTo</span>:<span class="local-variable">this</span>.element},<span class="local-variable">this</span>.options.containerPosition));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L647">
      <a href="#L647">647</a>
    </th>
    <td class="line-code">
      <pre>}.bind(<span class="local-variable">this</span>);<span class="keyword">if</span>(a){<span class="local-variable">this</span>.parent();b();}<span class="keyword">else</span>{<span class="local-variable">this</span>.element.setStyles({<span class="key">display</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>,<span class="key">opacity</span>:<span class="integer">0</span>}).tween(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.style.opacity||<span class="float">0.9</span>);b();<span class="local-variable">this</span>.hidden=<span class="predefined-constant">false</span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L648">
      <a href="#L648">648</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.callChain();}},<span class="function">hide</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="local-variable">this</span>.active){<span class="keyword">return</span> <span class="local-variable">this</span>.chain(<span class="local-variable">this</span>.hide.bind(<span class="local-variable">this</span>));}<span class="keyword">if</span>(<span class="local-variable">this</span>.hidden){<span class="local-variable">this</span>.callChain.delay(<span class="integer">20</span>,<span class="local-variable">this</span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L649">
      <a href="#L649">649</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;}<span class="local-variable">this</span>.active=<span class="predefined-constant">true</span>;<span class="keyword">return</span> <span class="local-variable">this</span>.parent(a);},<span class="function">hideMask</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a){<span class="keyword">return</span> <span class="local-variable">this</span>.parent();}<span class="local-variable">this</span>.element.tween(<span class="string"><span class="delimiter">&quot;</span><span class="content">opacity</span><span class="delimiter">&quot;</span></span>,<span class="integer">0</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">tween</span><span class="delimiter">&quot;</span></span>).chain(<span class="keyword">function</span>(){<span class="local-variable">this</span>.element.setStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L650">
      <a href="#L650">650</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.hidden=<span class="predefined-constant">true</span>;<span class="local-variable">this</span>.fireEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">hide</span><span class="delimiter">&quot;</span></span>);<span class="local-variable">this</span>.callChain();}.bind(<span class="local-variable">this</span>));},<span class="function">destroy</span>:<span class="keyword">function</span>(){<span class="local-variable">this</span>.content.destroy();<span class="local-variable">this</span>.parent();<span class="local-variable">this</span>.target.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L651">
      <a href="#L651">651</a>
    </th>
    <td class="line-code">
      <pre>}});Spinner.implement(<span class="keyword">new</span> Chain);<span class="keyword">if</span>(window.Request){Request=Class.refactor(Request,{<span class="key">options</span>:{<span class="key">useSpinner</span>:<span class="predefined-constant">false</span>,<span class="key">spinnerOptions</span>:{},<span class="key">spinnerTarget</span>:<span class="predefined-constant">false</span>},<span class="function">initialize</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>._send=<span class="local-variable">this</span>.send;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L652">
      <a href="#L652">652</a>
    </th>
    <td class="line-code">
      <pre><span class="local-variable">this</span>.<span class="function">send</span>=<span class="keyword">function</span>(c){<span class="keyword">if</span>(<span class="local-variable">this</span>.spinner){<span class="local-variable">this</span>.spinner.chain(<span class="local-variable">this</span>._send.bind(<span class="local-variable">this</span>,c)).show();}<span class="keyword">else</span>{<span class="local-variable">this</span>._send(c);}<span class="keyword">return</span> <span class="local-variable">this</span>;};<span class="local-variable">this</span>.previous(a);<span class="keyword">var</span> b=document.id(<span class="local-variable">this</span>.options.spinnerTarget)||document.id(<span class="local-variable">this</span>.options.update);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L653">
      <a href="#L653">653</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">if</span>(<span class="local-variable">this</span>.options.useSpinner&amp;&amp;b){<span class="local-variable">this</span>.spinner=b.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,<span class="local-variable">this</span>.options.spinnerOptions);[<span class="string"><span class="delimiter">&quot;</span><span class="content">onComplete</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">onException</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">onCancel</span><span class="delimiter">&quot;</span></span>].each(<span class="keyword">function</span>(c){<span class="local-variable">this</span>.addEvent(c,<span class="local-variable">this</span>.spinner.hide.bind(<span class="local-variable">this</span>.spinner));
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L654">
      <a href="#L654">654</a>
    </th>
    <td class="line-code">
      <pre>},<span class="local-variable">this</span>);}},<span class="function">getSpinner</span>:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="local-variable">this</span>.spinner;}});}Element.Properties.spinner={<span class="function">set</span>:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>);<span class="keyword">return</span> <span class="local-variable">this</span>.eliminate(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>).store(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner:options</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L655">
      <a href="#L655">655</a>
    </th>
    <td class="line-code">
      <pre>},<span class="function">get</span>:<span class="keyword">function</span>(a){<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>)){<span class="keyword">if</span>(<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>).destroy();}<span class="keyword">if</span>(a||!<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner:options</span><span class="delimiter">&quot;</span></span>)){<span class="local-variable">this</span>.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,a);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L656">
      <a href="#L656">656</a>
    </th>
    <td class="line-code">
      <pre>}<span class="keyword">new</span> Spinner(<span class="local-variable">this</span>,<span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner:options</span><span class="delimiter">&quot;</span></span>));}<span class="keyword">return</span> <span class="local-variable">this</span>.retrieve(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>);}};Element.implement({<span class="function">spin</span>:<span class="keyword">function</span>(a){<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,a).show();
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L657">
      <a href="#L657">657</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;},<span class="function">unspin</span>:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.link(<span class="local-variable">arguments</span>,{<span class="key">options</span>:Object.type,<span class="key">callback</span>:Function.type});<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">spinner</span><span class="delimiter">&quot;</span></span>,a.options).hide(a.callback);
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L658">
      <a href="#L658">658</a>
    </th>
    <td class="line-code">
      <pre><span class="keyword">return</span> <span class="local-variable">this</span>;}});MooTools.lang.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>,{<span class="key">months</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">January</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">February</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">March</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">April</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">May</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">June</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">July</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">August</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">September</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">October</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">November</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">December</span><span class="delimiter">&quot;</span></span>],<span class="key">days</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">Sunday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Monday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Tuesday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Wednesday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Thursday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Friday</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Saturday</span><span class="delimiter">&quot;</span></span>],<span class="key">dateOrder</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>],<span class="key">shortDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%m/%d/%Y</span><span class="delimiter">&quot;</span></span>,<span class="key">shortTime</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%I:%M%p</span><span class="delimiter">&quot;</span></span>,<span class="key">AM</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">AM</span><span class="delimiter">&quot;</span></span>,<span class="key">PM</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">PM</span><span class="delimiter">&quot;</span></span>,<span class="function">ordinal</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span>(a&gt;<span class="integer">3</span>&amp;&amp;a&lt;<span class="integer">21</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">st</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">nd</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">rd</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">th</span><span class="delimiter">&quot;</span></span>][Math.min(a%<span class="integer">10</span>,<span class="integer">4</span>)];
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L659">
      <a href="#L659">659</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">lessThanMinuteAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">less than a minute ago</span><span class="delimiter">&quot;</span></span>,<span class="key">minuteAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about a minute ago</span><span class="delimiter">&quot;</span></span>,<span class="key">minutesAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} minutes ago</span><span class="delimiter">&quot;</span></span>,<span class="key">hourAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about an hour ago</span><span class="delimiter">&quot;</span></span>,<span class="key">hoursAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about {delta} hours ago</span><span class="delimiter">&quot;</span></span>,<span class="key">dayAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 day ago</span><span class="delimiter">&quot;</span></span>,<span class="key">daysAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} days ago</span><span class="delimiter">&quot;</span></span>,<span class="key">weekAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 week ago</span><span class="delimiter">&quot;</span></span>,<span class="key">weeksAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} weeks ago</span><span class="delimiter">&quot;</span></span>,<span class="key">monthAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 month ago</span><span class="delimiter">&quot;</span></span>,<span class="key">monthsAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} months ago</span><span class="delimiter">&quot;</span></span>,<span class="key">yearAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 year ago</span><span class="delimiter">&quot;</span></span>,<span class="key">yearsAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} years ago</span><span class="delimiter">&quot;</span></span>,<span class="key">lessThanMinuteUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">less than a minute from now</span><span class="delimiter">&quot;</span></span>,<span class="key">minuteUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about a minute from now</span><span class="delimiter">&quot;</span></span>,<span class="key">minutesUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} minutes from now</span><span class="delimiter">&quot;</span></span>,<span class="key">hourUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about an hour from now</span><span class="delimiter">&quot;</span></span>,<span class="key">hoursUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">about {delta} hours from now</span><span class="delimiter">&quot;</span></span>,<span class="key">dayUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 day from now</span><span class="delimiter">&quot;</span></span>,<span class="key">daysUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} days from now</span><span class="delimiter">&quot;</span></span>,<span class="key">weekUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 week from now</span><span class="delimiter">&quot;</span></span>,<span class="key">weeksUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} weeks from now</span><span class="delimiter">&quot;</span></span>,<span class="key">monthUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 month from now</span><span class="delimiter">&quot;</span></span>,<span class="key">monthsUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} months from now</span><span class="delimiter">&quot;</span></span>,<span class="key">yearUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1 year from now</span><span class="delimiter">&quot;</span></span>,<span class="key">yearsUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">{delta} years from now</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L660">
      <a href="#L660">660</a>
    </th>
    <td class="line-code">
      <pre>MooTools.lang.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Form.Validator</span><span class="delimiter">&quot;</span></span>,{<span class="key">required</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">This field is required.</span><span class="delimiter">&quot;</span></span>,<span class="key">minLength</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter at least {minLength} characters (you entered {length} characters).</span><span class="delimiter">&quot;</span></span>,<span class="key">maxLength</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter no more than {maxLength} characters (you entered {length} characters).</span><span class="delimiter">&quot;</span></span>,<span class="key">integer</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter an integer in this field. Numbers with decimals (e.g. 1.25) are not permitted.</span><span class="delimiter">&quot;</span></span>,<span class="key">numeric</span>:<span class="string"><span class="delimiter">'</span><span class="content">Please enter only numeric values in this field (i.e. &quot;1&quot; or &quot;1.1&quot; or &quot;-1&quot; or &quot;-1.1&quot;).</span><span class="delimiter">'</span></span>,<span class="key">digits</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please use numbers and punctuation only in this field (for example, a phone number with dashes or dots is permitted).</span><span class="delimiter">&quot;</span></span>,<span class="key">alpha</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please use letters only (a-z) with in this field. No spaces or other characters are allowed.</span><span class="delimiter">&quot;</span></span>,<span class="key">alphanum</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please use only letters (a-z) or numbers (0-9) only in this field. No spaces or other characters are allowed.</span><span class="delimiter">&quot;</span></span>,<span class="key">dateSuchAs</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter a valid date such as {date}</span><span class="delimiter">&quot;</span></span>,<span class="key">dateInFormatMDY</span>:<span class="string"><span class="delimiter">'</span><span class="content">Please enter a valid date such as MM/DD/YYYY (i.e. &quot;12/31/1999&quot;)</span><span class="delimiter">'</span></span>,<span class="key">email</span>:<span class="string"><span class="delimiter">'</span><span class="content">Please enter a valid email address. For example &quot;fred@domain.com&quot;.</span><span class="delimiter">'</span></span>,<span class="key">url</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter a valid URL such as http://www.google.com.</span><span class="delimiter">&quot;</span></span>,<span class="key">currencyDollar</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter a valid $ amount. For example $100.00 .</span><span class="delimiter">&quot;</span></span>,<span class="key">oneRequired</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter something for at least one of these inputs.</span><span class="delimiter">&quot;</span></span>,<span class="key">errorPrefix</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Error: </span><span class="delimiter">&quot;</span></span>,<span class="key">warningPrefix</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Warning: </span><span class="delimiter">&quot;</span></span>,<span class="key">noSpace</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">There can be no spaces in this input.</span><span class="delimiter">&quot;</span></span>,<span class="key">reqChkByNode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">No items are selected.</span><span class="delimiter">&quot;</span></span>,<span class="key">requiredChk</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">This field is required.</span><span class="delimiter">&quot;</span></span>,<span class="key">reqChkByName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please select a {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">match</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">This field needs to match the {matchName} field</span><span class="delimiter">&quot;</span></span>,<span class="key">startDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">the start date</span><span class="delimiter">&quot;</span></span>,<span class="key">endDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">the end date</span><span class="delimiter">&quot;</span></span>,<span class="key">currendDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">the current date</span><span class="delimiter">&quot;</span></span>,<span class="key">afterDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">The date should be the same or after {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">beforeDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">The date should be the same or before {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">startMonth</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Please select a start month</span><span class="delimiter">&quot;</span></span>,<span class="key">sameMonth</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">These two dates must be in the same month - you must change one or the other.</span><span class="delimiter">&quot;</span></span>,<span class="key">creditcard</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">The credit card number entered is invalid. Please check the number and try again. {length} digits entered.</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L661">
      <a href="#L661">661</a>
    </th>
    <td class="line-code">
      <pre>MooTools.lang.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">en-GB</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>,{<span class="key">dateOrder</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>],<span class="key">shortDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%d/%m/%Y</span><span class="delimiter">&quot;</span></span>,<span class="key">shortTime</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%H:%M</span><span class="delimiter">&quot;</span></span>}).set(<span class="string"><span class="delimiter">&quot;</span><span class="content">cascade</span><span class="delimiter">&quot;</span></span>,[<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>]);MooTools.lang.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">fr-FR</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>,{<span class="key">months</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">janvier</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">f&amp;eacute;vrier</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">mars</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">avril</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">mai</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">juin</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">juillet</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">ao&amp;ucirc;t</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">septembre</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">octobre</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">novembre</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">d&amp;eacute;cembre</span><span class="delimiter">&quot;</span></span>],<span class="key">days</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">dimanche</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">lundi</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">mardi</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">mercredi</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">jeudi</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">vendredi</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">samedi</span><span class="delimiter">&quot;</span></span>],<span class="key">dateOrder</span>:[<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>],<span class="key">AM</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">AM</span><span class="delimiter">&quot;</span></span>,<span class="key">PM</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">PM</span><span class="delimiter">&quot;</span></span>,<span class="key">shortDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%d/%m/%Y</span><span class="delimiter">&quot;</span></span>,<span class="key">shortTime</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%H:%M</span><span class="delimiter">&quot;</span></span>,<span class="function">getOrdinal</span>:<span class="keyword">function</span>(a){<span class="keyword">return</span>(a&gt;<span class="integer">1</span>)?<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">er</span><span class="delimiter">&quot;</span></span>;
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L662">
      <a href="#L662">662</a>
    </th>
    <td class="line-code">
      <pre>},<span class="key">lessThanMinuteAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a moins d'une minute</span><span class="delimiter">&quot;</span></span>,<span class="key">minuteAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a une minute</span><span class="delimiter">&quot;</span></span>,<span class="key">minutesAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} minutes</span><span class="delimiter">&quot;</span></span>,<span class="key">hourAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a une heure</span><span class="delimiter">&quot;</span></span>,<span class="key">hoursAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} heures</span><span class="delimiter">&quot;</span></span>,<span class="key">dayAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a un jour</span><span class="delimiter">&quot;</span></span>,<span class="key">daysAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} jours</span><span class="delimiter">&quot;</span></span>,<span class="key">weekAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a une semaine</span><span class="delimiter">&quot;</span></span>,<span class="key">weeksAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} semaines</span><span class="delimiter">&quot;</span></span>,<span class="key">monthAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a 1 mois</span><span class="delimiter">&quot;</span></span>,<span class="key">monthsAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} mois</span><span class="delimiter">&quot;</span></span>,<span class="key">yearthAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a 1 an</span><span class="delimiter">&quot;</span></span>,<span class="key">yearsAgo</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">il y a {delta} ans</span><span class="delimiter">&quot;</span></span>,<span class="key">lessThanMinuteUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans moins d'une minute</span><span class="delimiter">&quot;</span></span>,<span class="key">minuteUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans une minute</span><span class="delimiter">&quot;</span></span>,<span class="key">minutesUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} minutes</span><span class="delimiter">&quot;</span></span>,<span class="key">hourUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans une heure</span><span class="delimiter">&quot;</span></span>,<span class="key">hoursUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} heures</span><span class="delimiter">&quot;</span></span>,<span class="key">dayUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans un jour</span><span class="delimiter">&quot;</span></span>,<span class="key">daysUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} jours</span><span class="delimiter">&quot;</span></span>,<span class="key">weekUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans 1 semaine</span><span class="delimiter">&quot;</span></span>,<span class="key">weeksUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} semaines</span><span class="delimiter">&quot;</span></span>,<span class="key">monthUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans 1 mois</span><span class="delimiter">&quot;</span></span>,<span class="key">monthsUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} mois</span><span class="delimiter">&quot;</span></span>,<span class="key">yearUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans 1 an</span><span class="delimiter">&quot;</span></span>,<span class="key">yearsUntil</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">dans {delta} ans</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

  <tr>
    <th class="line-num" id="L663">
      <a href="#L663">663</a>
    </th>
    <td class="line-code">
      <pre>MooTools.lang.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">fr-FR</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Form.Validator</span><span class="delimiter">&quot;</span></span>,{<span class="key">required</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ce champ est obligatoire.</span><span class="delimiter">&quot;</span></span>,<span class="key">minLength</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir un minimum de {minLength} caract&amp;egrave;re(s) (vous avez saisi {length} caract&amp;egrave;re(s)).</span><span class="delimiter">&quot;</span></span>,<span class="key">maxLength</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir un maximum de {maxLength} caract&amp;egrave;re(s) (vous avez saisi {length} caract&amp;egrave;re(s)).</span><span class="delimiter">&quot;</span></span>,<span class="key">integer</span>:<span class="string"><span class="delimiter">'</span><span class="content">Veuillez saisir un nombre entier dans ce champ. Les nombres d&amp;eacute;cimaux (ex : &quot;1,25&quot;) ne sont pas autoris&amp;eacute;s.</span><span class="delimiter">'</span></span>,<span class="key">numeric</span>:<span class="string"><span class="delimiter">'</span><span class="content">Veuillez saisir uniquement des chiffres dans ce champ (ex : &quot;1&quot; ou &quot;1,1&quot; ou &quot;-1&quot; ou &quot;-1,1&quot;).</span><span class="delimiter">'</span></span>,<span class="key">digits</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir uniquement des chiffres et des signes de ponctuation dans ce champ (ex : un num&amp;eacute;ro de t&amp;eacute;l&amp;eacute;phone avec des traits d'union est autoris&amp;eacute;).</span><span class="delimiter">&quot;</span></span>,<span class="key">alpha</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir uniquement des lettres (a-z) dans ce champ. Les espaces ou autres caract&amp;egrave;res ne sont pas autoris&amp;eacute;s.</span><span class="delimiter">&quot;</span></span>,<span class="key">alphanum</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir uniquement des lettres (a-z) ou des chiffres (0-9) dans ce champ. Les espaces ou autres caract&amp;egrave;res ne sont pas autoris&amp;eacute;s.</span><span class="delimiter">&quot;</span></span>,<span class="key">dateSuchAs</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir une date correcte comme {date}</span><span class="delimiter">&quot;</span></span>,<span class="key">dateInFormatMDY</span>:<span class="string"><span class="delimiter">'</span><span class="content">Veuillez saisir une date correcte, au format JJ/MM/AAAA (ex : &quot;31/11/1999&quot;).</span><span class="delimiter">'</span></span>,<span class="key">email</span>:<span class="string"><span class="delimiter">'</span><span class="content">Veuillez saisir une adresse de courrier &amp;eacute;lectronique. Par example &quot;fred@domaine.com&quot;.</span><span class="delimiter">'</span></span>,<span class="key">url</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir une URL, comme http://www.google.com.</span><span class="delimiter">&quot;</span></span>,<span class="key">currencyDollar</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez saisir une quantit&amp;eacute; correcte. Par example 100,00&amp;euro;.</span><span class="delimiter">&quot;</span></span>,<span class="key">oneRequired</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez s&amp;eacute;lectionner au moins une de ces options.</span><span class="delimiter">&quot;</span></span>,<span class="key">errorPrefix</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Erreur : </span><span class="delimiter">&quot;</span></span>,<span class="key">warningPrefix</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Attention : </span><span class="delimiter">&quot;</span></span>,<span class="key">noSpace</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ce champ n'accepte pas les espaces.</span><span class="delimiter">&quot;</span></span>,<span class="key">reqChkByNode</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Aucun &amp;eacute;l&amp;eacute;ment n'est s&amp;eacute;lectionn&amp;eacute;.</span><span class="delimiter">&quot;</span></span>,<span class="key">requiredChk</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ce champ est obligatoire.</span><span class="delimiter">&quot;</span></span>,<span class="key">reqChkByName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez s&amp;eacute;lectionner un(e) {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">match</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ce champ doit correspondre avec le champ {matchName}.</span><span class="delimiter">&quot;</span></span>,<span class="key">startDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">date de d&amp;eacute;but</span><span class="delimiter">&quot;</span></span>,<span class="key">endDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">date de fin</span><span class="delimiter">&quot;</span></span>,<span class="key">currendDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">date actuelle</span><span class="delimiter">&quot;</span></span>,<span class="key">afterDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">La date doit &amp;ecirc;tre identique ou post&amp;eacute;rieure &amp;agrave; {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">beforeDate</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">La date doit &amp;ecirc;tre identique ou ant&amp;eacute;rieure &amp;agrave; {label}.</span><span class="delimiter">&quot;</span></span>,<span class="key">startMonth</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Veuillez s&amp;eacute;lectionner un mois de d&amp;eacute;but.</span><span class="delimiter">&quot;</span></span>,<span class="key">sameMonth</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ces deux dates doivent &amp;ecirc;tre dans le m&amp;ecirc;me mois - vous devez en modifier une.</span><span class="delimiter">&quot;</span></span>});
</pre>
    </td>
  </tr>
  

</tbody>
</table>
</div>




        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>

<!-- Mirrored from redmine.ogf.org/projects/redmine-og/repository/revisions/ea70c3d57d64847353546f1d09c9dbd958672f01/entry/public/plugin_assets/redmine-openid-selector/javascripts/openid-selector/js/mootools-more.js by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Sep 2022 16:53:05 GMT -->
</html>
