<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from redmine.ogf.org/projects/redmine-og/repository/revisions/d7f091927706950b63fcfabbff36311b6c8c06ab/diff by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Sep 2022 22:40:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>/ - Diff - Redmine - Open Grid Forum</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="7RiXtn8JMoxXZTBSrtL64n0O2gGmxf69GTM4qjOvQSI="/>
<link rel='shortcut icon' href='https://redmine.ogf.org/favicon.ico?1425381960' />
<link href="https://redmine.ogf.org/themes/ogf_redmine/stylesheets/application.css?1425381960" media="all" rel="stylesheet" type="text/css" />

<script src="https://redmine.ogf.org/javascripts/prototype.js?1425381960" type="text/javascript"></script>
<script src="https://redmine.ogf.org/javascripts/effects.js?1425381960" type="text/javascript"></script>
<script src="https://redmine.ogf.org/javascripts/dragdrop.js?1425381960" type="text/javascript"></script>
<script src="https://redmine.ogf.org/javascripts/controls.js?1425381960" type="text/javascript"></script>
<script src="https://redmine.ogf.org/javascripts/application.js?1425381960" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1425381960);}
    </style>
<![endif]-->
<link href="https://redmine.ogf.org/plugin_assets/extended_fields/stylesheets/extended_fields.css?1425381960" media="screen" rel="stylesheet" type="text/css" /> <link href="https://redmine.ogf.org/plugin_assets/wiking/stylesheets/wiking.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

<link href="https://redmine.ogf.org/stylesheets/scm.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Ogf redmine controller-repositories action-diff">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="https://redmine.ogf.org/login" class="login">Login</a></li>
<li><a href="https://redmine.ogf.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="https://redmine.ogf.org/" class="home">Home</a></li>
<li><a href="https://redmine.ogf.org/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="https://redmine.ogf.org/search/index/redmine-og" method="get">
        <input name="changesets" type="hidden" value="1" />
        <label for='q'>
          <a href="https://redmine.ogf.org/search/index/redmine-og" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1><a href="https://redmine.ogf.org/projects/operations?jump=repository" class="root">Operations</a> » <a href="https://redmine.ogf.org/projects/it-og?jump=repository" class="ancestor">IT</a> » Redmine</h1>

    
    <div id="main-menu">
        <ul><li><a href="https://redmine.ogf.org/projects/redmine-og" class="overview">Overview</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/issues" class="issues">Issues</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/issues/calendar" class="calendar">Calendar</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/news" class="news">News</a></li>
<li><a href="https://redmine.ogf.org/dmsf/redmine-og" class="dmsf">Documents</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/wiki" class="wiki">Wiki</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/files" class="files">Files</a></li>
<li><a href="https://redmine.ogf.org/projects/redmine-og/repository" class="repository selected">Repository</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
  
  


    </div>

    <div id="content">
        
        <h2>Revision d7f09192 </h2>

<!-- Choose view type -->
<form action="https://redmine.ogf.org/projects/redmine-og/repository/diff" method="get">
  <input id="rev" name="rev" type="hidden" value="d7f091927706950b63fcfabbff36311b6c8c06ab" />
  
  <p>
    <label>View differences</label>
    <select id="type" name="type" onchange="if (this.value != '') {this.form.submit()}"><option value="inline" selected="selected">inline</option>
<option value="sbs">side by side</option></select>
  </p>
</form>


<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      b/Gemfile
    </th>
  </tr>
</thead>
<tbody>

<tr>
  <th class="line-num">3</th>
  <th class="line-num">3</th>
  <td class="line-code ">
    <pre>gem &quot;rails&quot;, &quot;2.3.14&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">4</th>
  <th class="line-num">4</th>
  <td class="line-code ">
    <pre>gem &quot;i18n&quot;, &quot;~&gt; 0.4.2&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">5</th>
  <th class="line-num">5</th>
  <td class="line-code ">
    <pre>gem &quot;coderay&quot;, &quot;~&gt; 1.0.0&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num"></th>
  <th class="line-num">6</th>
  <td class="line-code diff_in">
    <pre>gem &quot;fastercsv&quot;, &quot;~&gt; 1.5.0&quot;, :platforms =&gt; [:mri_18, :mingw_18, :jruby]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">6</th>
  <th class="line-num">7</th>
  <td class="line-code ">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">7</th>
  <th class="line-num">8</th>
  <td class="line-code ">
    <pre># Optional gem for LDAP authentication
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">8</th>
  <th class="line-num">9</th>
  <td class="line-code ">
    <pre>group :ldap do
</pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      /dev/null
    </th>
  </tr>
</thead>
<tbody>

<tr>
  <th class="line-num">1</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#!/usr/local/bin/ruby -w
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">2</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">3</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># = faster_csv.rb -- Faster CSV Reading and Writing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">4</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">5</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#  Created by James Edward Gray II on 2005-10-31.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">6</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#  Copyright 2005 Gray Productions. All rights reserved.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">7</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">8</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># See FasterCSV for documentation.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">9</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">10</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>if RUBY_VERSION &gt;= &quot;1.9&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">11</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  abort &lt;&lt;-VERSION_WARNING.gsub(/^\s+/, &quot;&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">12</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Please switch to Ruby 1.9's standard CSV library.  It's FasterCSV plus
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">13</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  support for Ruby 1.9's m17n encoding engine.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">14</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  VERSION_WARNING
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">15</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">16</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">17</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>require &quot;forwardable&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">18</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>require &quot;English&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">19</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>require &quot;enumerator&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">20</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>require &quot;date&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">21</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>require &quot;stringio&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">24</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># This class provides a complete interface to CSV files and data.  It offers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">25</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># tools to enable you to read and write to and from Strings or IO objects, as
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># needed.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">27</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># == Reading
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">29</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># === From a File
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">31</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">32</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># ==== A Line at a Time
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">33</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">34</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FasterCSV.foreach(&quot;path/to/file.csv&quot;) do |row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">35</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     # use row here...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">36</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">37</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">38</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># ==== All at Once
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">39</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">40</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   arr_of_arrs = FasterCSV.read(&quot;path/to/file.csv&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">41</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">42</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># === From a String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">43</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">44</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># ==== A Line at a Time
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">45</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">46</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FasterCSV.parse(&quot;CSV,data,String&quot;) do |row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">47</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     # use row here...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">48</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">49</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">50</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># ==== All at Once
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">51</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">52</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   arr_of_arrs = FasterCSV.parse(&quot;CSV,data,String&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">53</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">54</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># == Writing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">55</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">56</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># === To a File
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">57</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">58</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FasterCSV.open(&quot;path/to/file.csv&quot;, &quot;w&quot;) do |csv|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">59</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     csv &lt;&lt; [&quot;row&quot;, &quot;of&quot;, &quot;CSV&quot;, &quot;data&quot;]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">60</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     csv &lt;&lt; [&quot;another&quot;, &quot;row&quot;]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">61</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     # ...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">62</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">63</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">64</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># === To a String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">65</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">66</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   csv_string = FasterCSV.generate do |csv|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">67</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     csv &lt;&lt; [&quot;row&quot;, &quot;of&quot;, &quot;CSV&quot;, &quot;data&quot;]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">68</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     csv &lt;&lt; [&quot;another&quot;, &quot;row&quot;]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">69</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#     # ...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">70</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">71</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">72</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># == Convert a Single Line
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">73</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">74</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   csv_string = [&quot;CSV&quot;, &quot;data&quot;].to_csv   # to CSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">75</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   csv_array  = &quot;CSV,String&quot;.parse_csv   # from CSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">76</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">77</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># == Shortcut Interface
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">78</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">79</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FCSV             { |csv_out| csv_out &lt;&lt; %w{my data here} }  # to $stdout
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">80</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FCSV(csv = &quot;&quot;)   { |csv_str| csv_str &lt;&lt; %w{my data here} }  # to a String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">81</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#   FCSV($stderr)    { |csv_err| csv_err &lt;&lt; %w{my data here} }  # to $stderr
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">82</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">83</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>class FasterCSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">84</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The version of the installed library.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">85</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  VERSION = &quot;1.5.0&quot;.freeze
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">86</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">87</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">88</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A FasterCSV::Row is part Array and part Hash.  It retains an order for the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">89</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # fields and allows duplicates just as an Array would, but also allows you to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">90</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # access fields by name just as you could if they were in a Hash.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">91</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">92</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # All rows returned by FasterCSV will be constructed from this class, if
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">93</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # header row processing is activated.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">94</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">95</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  class Row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">96</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">97</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Construct a new FasterCSV::Row from +headers+ and +fields+, which are
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">98</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # expected to be Arrays.  If one Array is shorter than the other, it will be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">99</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # padded with +nil+ objects.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">100</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">101</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # The optional +header_row+ parameter can be set to +true+ to indicate, via
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">102</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # FasterCSV::Row.header_row?() and FasterCSV::Row.field_row?(), that this is
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">103</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # a header row.  Otherwise, the row is assumes to be a field row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">104</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">105</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # A FasterCSV::Row object supports the following Array methods through
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">106</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # delegation:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">107</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">108</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * empty?()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">109</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * length()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">110</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * size()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">111</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">112</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def initialize(headers, fields, header_row = false)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">113</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @header_row = header_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">114</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">115</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # handle extra headers or fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">116</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @row = if headers.size &gt; fields.size
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">117</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers.zip(fields)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">118</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">119</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        fields.zip(headers).map { |pair| pair.reverse }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">120</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">121</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">122</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">123</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Internal data format used to compare equality.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">124</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    attr_reader :row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">125</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    protected   :row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">126</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">127</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ### Array Delegation ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">128</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">129</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    extend Forwardable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">130</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def_delegators :@row, :empty?, :length, :size
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">131</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">132</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if this is a header row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">133</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">134</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @header_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">135</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">136</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">137</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if this is a field row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">138</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def field_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">139</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      not header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">140</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">141</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">142</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns the headers of this row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">143</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">144</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @row.map { |pair| pair.first }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">145</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">146</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">147</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">148</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">149</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   field( header )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">150</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   field( header, offset )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">151</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   field( index )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">152</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">153</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method will fetch the field value by +header+ or +index+.  If a field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">154</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # is not found, +nil+ is returned.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">155</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">156</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # When provided, +offset+ ensures that a header match occurrs on or later
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">157</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # than the +offset+ index.  You can use this to find duplicate headers, 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">158</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # without resorting to hard-coding exact indices.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">159</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">160</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def field(header_or_index, minimum_index = 0)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">161</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # locate the pair
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">162</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      finder = header_or_index.is_a?(Integer) ? :[] : :assoc
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">163</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      pair   = @row[minimum_index..-1].send(finder, header_or_index)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">164</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">165</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # return the field if we have a pair
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">166</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      pair.nil? ? nil : pair.last
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">167</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">168</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    alias_method :[], :field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">169</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">170</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">171</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">172</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   []=( header, value )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">173</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   []=( header, offset, value )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">174</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   []=( index, value )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">175</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">176</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Looks up the field by the semantics described in FasterCSV::Row.field()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">177</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # and assigns the +value+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">178</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">179</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Assigning past the end of the row with an index will set all pairs between
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">180</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # to &lt;tt&gt;[nil, nil]&lt;/tt&gt;.  Assigning to an unused header appends the new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">181</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # pair.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">182</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">183</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def []=(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">184</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      value = args.pop
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">185</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">186</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if args.first.is_a? Integer
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">187</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if @row[args.first].nil?  # extending past the end with index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">188</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @row[args.first] = [nil, value]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">189</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @row.map! { |pair| pair.nil? ? [nil, nil] : pair }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">190</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else                      # normal index assignment
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">191</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @row[args.first][1] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">192</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">193</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">194</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        index = index(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">195</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if index.nil?             # appending a field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">196</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          self &lt;&lt; [args.first, value]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">197</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else                      # normal header assignment
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">198</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @row[index][1] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">199</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">200</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">201</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">202</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">203</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">204</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">205</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   &lt;&lt;( field )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">206</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   &lt;&lt;( header_and_field_array )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">207</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   &lt;&lt;( header_and_field_hash )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">208</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">209</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # If a two-element Array is provided, it is assumed to be a header and field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">210</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # and the pair is appended.  A Hash works the same way with the key being
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">211</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # the header and the value being the field.  Anything else is assumed to be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">212</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # a lone field which is appended with a +nil+ header.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">213</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">214</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the row for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">215</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">216</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def &lt;&lt;(arg)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">217</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if arg.is_a?(Array) and arg.size == 2  # appending a header and name
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">218</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row &lt;&lt; arg
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">219</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      elsif arg.is_a?(Hash)                  # append header and name pairs
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">220</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        arg.each { |pair| @row &lt;&lt; pair }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">221</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                                   # append field value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">222</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row &lt;&lt; [nil, arg]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">223</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">224</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">225</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">226</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">227</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">228</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">229</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # A shortcut for appending multiple fields.  Equivalent to:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">230</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">231</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   args.each { |arg| faster_csv_row &lt;&lt; arg }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">232</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">233</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the row for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">234</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">235</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def push(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">236</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      args.each { |arg| self &lt;&lt; arg }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">237</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">238</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">239</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">240</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">241</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">242</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">243</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   delete( header )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">244</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   delete( header, offset )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">245</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   delete( index )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">246</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">247</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Used to remove a pair from the row by +header+ or +index+.  The pair is
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">248</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # located as described in FasterCSV::Row.field().  The deleted pair is 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">249</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # returned, or +nil+ if a pair could not be found.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">250</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">251</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def delete(header_or_index, minimum_index = 0)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">252</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if header_or_index.is_a? Integer  # by index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">253</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row.delete_at(header_or_index)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">254</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                              # by header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">255</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row.delete_at(index(header_or_index, minimum_index))
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">256</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">257</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">258</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">259</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">260</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # The provided +block+ is passed a header and field for each pair in the row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">261</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # and expected to return +true+ or +false+, depending on whether the pair
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">262</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # should be deleted.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">263</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">264</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the row for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">265</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">266</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def delete_if(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">267</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @row.delete_if(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">268</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">269</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">270</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">271</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">272</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">273</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method accepts any number of arguments which can be headers, indices,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">274</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Ranges of either, or two-element Arrays containing a header and offset.  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">275</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Each argument will be replaced with a field lookup as described in
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">276</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # FasterCSV::Row.field().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">277</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">278</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # If called with no arguments, all fields are returned.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">279</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">280</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def fields(*headers_and_or_indices)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">281</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if headers_and_or_indices.empty?  # return all fields--no arguments
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">282</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row.map { |pair| pair.last }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">283</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                              # or work like values_at()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">284</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers_and_or_indices.inject(Array.new) do |all, h_or_i|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">285</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          all + if h_or_i.is_a? Range
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">286</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            index_begin = h_or_i.begin.is_a?(Integer) ? h_or_i.begin :
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">287</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                                        index(h_or_i.begin)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">288</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            index_end   = h_or_i.end.is_a?(Integer)   ? h_or_i.end :
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">289</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                                        index(h_or_i.end)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">290</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            new_range   = h_or_i.exclude_end? ? (index_begin...index_end) :
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">291</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                                (index_begin..index_end)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">292</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            fields.values_at(new_range)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">293</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">294</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            [field(*Array(h_or_i))]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">295</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">296</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">297</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">298</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">299</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    alias_method :values_at, :fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">300</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">301</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">302</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">303</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   index( header )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">304</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   index( header, offset )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">305</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">306</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method will return the index of a field with the provided +header+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">307</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # The +offset+ can be used to locate duplicate header names, as described in
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">308</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # FasterCSV::Row.field().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">309</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">310</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def index(header, minimum_index = 0)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">311</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # find the pair
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">312</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      index = headers[minimum_index..-1].index(header)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">313</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # return the index at the right offset, if we found one
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">314</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      index.nil? ? nil : index + minimum_index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">315</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">316</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">317</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if +name+ is a header for this row, and +false+ otherwise.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">318</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def header?(name)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">319</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      headers.include? name
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">320</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">321</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    alias_method :include?, :header?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">322</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">323</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">324</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if +data+ matches a field in this row, and +false+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">325</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # otherwise.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">326</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">327</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def field?(data)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">328</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      fields.include? data
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">329</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">330</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">331</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    include Enumerable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">332</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">333</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">334</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Yields each pair of the row as header and field tuples (much like
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">335</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # iterating over a Hash).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">336</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">337</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Support for Enumerable.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">338</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">339</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the row for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">340</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">341</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">342</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @row.each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">343</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">344</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">345</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">346</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">347</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">348</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if this row contains the same headers and fields in the 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">349</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # same order as +other+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">350</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">351</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def ==(other)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">352</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @row == other.row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">353</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">354</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">355</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">356</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Collapses the row into a simple Hash.  Be warning that this discards field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">357</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # order and clobbers duplicate fields.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">358</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">359</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def to_hash
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">360</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # flatten just one level of the internal Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">361</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      Hash[*@row.inject(Array.new) { |ary, pair| ary.push(*pair) }]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">362</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">363</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">364</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">365</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns the row as a CSV String.  Headers are not used.  Equivalent to:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">366</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">367</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   faster_csv_row.fields.to_csv( options )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">368</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">369</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def to_csv(options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">370</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      fields.to_csv(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">371</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">372</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    alias_method :to_s, :to_csv
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">373</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">374</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # A summary of fields, by header.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">375</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def inspect
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">376</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      str = &quot;#&lt;#{self.class}&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">377</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      each do |header, field|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">378</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        str &lt;&lt; &quot; #{header.is_a?(Symbol) ? header.to_s : header.inspect}:&quot; &lt;&lt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">379</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>               field.inspect
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">380</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">381</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      str &lt;&lt; &quot;&gt;&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">382</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">383</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">384</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">385</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">386</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A FasterCSV::Table is a two-dimensional data structure for representing CSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">387</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # documents.  Tables allow you to work with the data by row or column, 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">388</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # manipulate the data, and even convert the results back to CSV, if needed.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">389</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">390</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # All tables returned by FasterCSV will be constructed from this class, if
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">391</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # header row processing is activated.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">392</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">393</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  class Table
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">394</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">395</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Construct a new FasterCSV::Table from +array_of_rows+, which are expected
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">396</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # to be FasterCSV::Row objects.  All rows are assumed to have the same 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">397</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # headers.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">398</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">399</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # A FasterCSV::Table object supports the following Array methods through
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">400</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # delegation:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">401</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">402</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * empty?()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">403</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * length()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">404</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # * size()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">405</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">406</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def initialize(array_of_rows)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">407</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @table = array_of_rows
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">408</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @mode  = :col_or_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">409</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">410</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">411</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # The current access mode for indexing and iteration.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">412</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    attr_reader :mode
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">413</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">414</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Internal data format used to compare equality.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">415</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    attr_reader :table
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">416</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    protected   :table
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">417</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">418</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ### Array Delegation ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">419</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">420</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    extend Forwardable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">421</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def_delegators :@table, :empty?, :length, :size
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">422</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">423</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">424</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns a duplicate table object, in column mode.  This is handy for 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">425</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # chaining in a single call without changing the table mode, but be aware 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">426</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # that this method can consume a fair amount of memory for bigger data sets.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">427</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">428</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the duplicate table for chaining.  Don't chain
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">429</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # destructive methods (like []=()) this way though, since you are working
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">430</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # with a duplicate.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">431</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">432</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_col
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">433</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self.class.new(@table.dup).by_col!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">434</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">435</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">436</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">437</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Switches the mode of this table to column mode.  All calls to indexing and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">438</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # iteration methods will work with columns until the mode is changed again.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">439</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">440</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table and is safe to chain.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">441</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">442</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_col!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">443</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @mode = :col
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">444</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">445</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">446</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">447</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">448</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">449</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns a duplicate table object, in mixed mode.  This is handy for 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">450</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # chaining in a single call without changing the table mode, but be aware 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">451</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # that this method can consume a fair amount of memory for bigger data sets.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">452</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">453</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the duplicate table for chaining.  Don't chain
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">454</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # destructive methods (like []=()) this way though, since you are working
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">455</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # with a duplicate.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">456</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">457</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_col_or_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">458</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self.class.new(@table.dup).by_col_or_row!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">459</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">460</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">461</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">462</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Switches the mode of this table to mixed mode.  All calls to indexing and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">463</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # iteration methods will use the default intelligent indexing system until
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">464</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # the mode is changed again.  In mixed mode an index is assumed to be a row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">465</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # reference while anything else is assumed to be column access by headers.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">466</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">467</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table and is safe to chain.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">468</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">469</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_col_or_row!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">470</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @mode = :col_or_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">471</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">472</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">473</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">474</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">475</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">476</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns a duplicate table object, in row mode.  This is handy for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">477</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # in a single call without changing the table mode, but be aware that this
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">478</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # method can consume a fair amount of memory for bigger data sets.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">479</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">480</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the duplicate table for chaining.  Don't chain
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">481</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # destructive methods (like []=()) this way though, since you are working
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">482</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # with a duplicate.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">483</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">484</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">485</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self.class.new(@table.dup).by_row!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">486</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">487</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">488</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">489</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Switches the mode of this table to row mode.  All calls to indexing and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">490</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # iteration methods will work with rows until the mode is changed again.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">491</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">492</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table and is safe to chain.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">493</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">494</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def by_row!
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">495</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @mode = :row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">496</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">497</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">498</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">499</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">500</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">501</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns the headers for the first row of this table (assumed to match all
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">502</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # other rows).  An empty Array is returned for empty tables.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">503</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">504</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">505</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @table.empty?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">506</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Array.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">507</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">508</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.first.headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">509</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">510</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">511</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">512</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">513</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # In the default mixed mode, this method returns rows for index access and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">514</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # columns for header access.  You can force the index association by first
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">515</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # calling by_col!() or by_row!().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">516</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">517</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Columns are returned as an Array of values.  Altering that Array has no
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">518</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # effect on the table.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">519</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">520</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def [](index_or_header)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">521</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :row or  # by index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">522</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>         (@mode == :col_or_row and index_or_header.is_a? Integer)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">523</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table[index_or_header]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">524</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                 # by header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">525</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.map { |row| row[index_or_header] }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">526</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">527</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">528</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">529</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">530</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # In the default mixed mode, this method assigns rows for index access and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">531</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # columns for header access.  You can force the index association by first
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">532</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # calling by_col!() or by_row!().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">533</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">534</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Rows may be set to an Array of values (which will inherit the table's
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">535</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # headers()) or a FasterCSV::Row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">536</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">537</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Columns may be set to a single value, which is copied to each row of the 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">538</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # column, or an Array of values.  Arrays of values are assigned to rows top
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">539</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # to bottom in row major order.  Excess values are ignored and if the Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">540</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # does not have a value for each row the extra rows will receive a +nil+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">541</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">542</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Assigning to an existing column or row clobbers the data.  Assigning to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">543</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # new columns creates them at the right end of the table.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">544</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">545</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def []=(index_or_header, value)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">546</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :row or  # by index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">547</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>         (@mode == :col_or_row and index_or_header.is_a? Integer)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">548</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if value.is_a? Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">549</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @table[index_or_header] = Row.new(headers, value)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">550</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">551</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @table[index_or_header] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">552</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">553</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                 # set column
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">554</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if value.is_a? Array  # multiple values
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">555</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @table.each_with_index do |row, i|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">556</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if row.header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">557</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              row[index_or_header] = index_or_header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">558</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">559</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              row[index_or_header] = value[i]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">560</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">561</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">562</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else                  # repeated value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">563</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @table.each do |row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">564</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if row.header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">565</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              row[index_or_header] = index_or_header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">566</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">567</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              row[index_or_header] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">568</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">569</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">570</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">571</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">572</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">573</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">574</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">575</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # The mixed mode default is to treat a list of indices as row access,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">576</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # returning the rows indicated.  Anything else is considered columnar
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">577</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # access.  For columnar access, the return set has an Array for each row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">578</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # with the values indicated by the headers in each Array.  You can force
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">579</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # column or row mode using by_col!() or by_row!().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">580</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">581</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # You cannot mix column and row access.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">582</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">583</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def values_at(*indices_or_headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">584</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :row or  # by indices
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">585</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>         ( @mode == :col_or_row and indices_or_headers.all? do |index|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">586</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                      index.is_a?(Integer)         or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">587</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                      ( index.is_a?(Range)         and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">588</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                        index.first.is_a?(Integer) and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">589</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                        index.last.is_a?(Integer) )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">590</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                    end )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">591</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.values_at(*indices_or_headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">592</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                 # by headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">593</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.map { |row| row.values_at(*indices_or_headers) }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">594</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">595</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">596</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">597</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">598</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Adds a new row to the bottom end of this table.  You can provide an Array,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">599</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # which will be converted to a FasterCSV::Row (inheriting the table's
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">600</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # headers()), or a FasterCSV::Row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">601</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">602</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">603</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">604</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def &lt;&lt;(row_or_array)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">605</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if row_or_array.is_a? Array  # append Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">606</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table &lt;&lt; Row.new(headers, row_or_array)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">607</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                         # append Row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">608</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table &lt;&lt; row_or_array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">609</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">610</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">611</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">612</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">613</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">614</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">615</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # A shortcut for appending multiple rows.  Equivalent to:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">616</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">617</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #   rows.each { |row| self &lt;&lt; row }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">618</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">619</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">620</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">621</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def push(*rows)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">622</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      rows.each { |row| self &lt;&lt; row }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">623</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">624</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">625</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">626</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">627</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">628</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Removes and returns the indicated column or row.  In the default mixed
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">629</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # mode indices refer to rows and everything else is assumed to be a column
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">630</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # header.  Use by_col!() or by_row!() to force the lookup.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">631</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">632</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def delete(index_or_header)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">633</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :row or  # by index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">634</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>         (@mode == :col_or_row and index_or_header.is_a? Integer)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">635</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.delete_at(index_or_header)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">636</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                 # by header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">637</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.map { |row| row.delete(index_or_header).last }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">638</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">639</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">640</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">641</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">642</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Removes any column or row for which the block returns +true+.  In the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">643</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # default mixed mode or row mode, iteration is the standard row major
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">644</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # walking of rows.  In column mode, interation will +yield+ two element
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">645</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # tuples containing the column name and an Array of values for that column.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">646</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">647</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">648</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">649</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def delete_if(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">650</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :row or @mode == :col_or_row  # by index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">651</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.delete_if(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">652</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else                                      # by header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">653</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        to_delete = Array.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">654</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers.each_with_index do |header, i|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">655</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          to_delete &lt;&lt; header if block[[header, self[header]]]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">656</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">657</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        to_delete.map { |header| delete(header) }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">658</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">659</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">660</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">661</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">662</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">663</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    include Enumerable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">664</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">665</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">666</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # In the default mixed mode or row mode, iteration is the standard row major
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">667</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # walking of rows.  In column mode, interation will +yield+ two element
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">668</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # tuples containing the column name and an Array of values for that column.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">669</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">670</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # This method returns the table for chaining.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">671</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">672</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">673</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @mode == :col
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">674</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers.each { |header| block[[header, self[header]]] }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">675</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">676</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @table.each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">677</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">678</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">679</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">680</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">681</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">682</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns +true+ if all rows of this table ==() +other+'s rows.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">683</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def ==(other)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">684</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @table == other.table
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">685</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">686</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">687</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">688</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns the table as an Array of Arrays.  Headers will be the first row,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">689</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # then all of the field rows will follow.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">690</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">691</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def to_a
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">692</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @table.inject([headers]) do |array, row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">693</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if row.header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">694</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">695</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">696</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          array + [row.fields]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">697</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">698</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">699</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">700</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">701</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">702</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Returns the table as a complete CSV String.  Headers will be listed first,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">703</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # then all of the field rows.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">704</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">705</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def to_csv(options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">706</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @table.inject([headers.to_csv(options)]) do |rows, row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">707</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if row.header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">708</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          rows
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">709</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">710</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          rows + [row.fields.to_csv(options)]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">711</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">712</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end.join
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">713</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">714</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    alias_method :to_s, :to_csv
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">715</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">716</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    def inspect
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">717</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      &quot;#&lt;#{self.class} mode:#{@mode} row_count:#{to_a.size}&gt;&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">718</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">719</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">720</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">721</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The error thrown when the parser encounters illegal CSV formatting.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">722</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  class MalformedCSVError &lt; RuntimeError; end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">723</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">724</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">725</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A FieldInfo Struct contains details about a field's position in the data
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">726</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # source it was read from.  FasterCSV will pass this Struct to some blocks
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">727</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # that make decisions based on field structure.  See 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">728</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV.convert_fields() for an example.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">729</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">730</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;index&lt;/tt&gt;&lt;/b&gt;::  The zero-based index of the field in its row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">731</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;line&lt;/tt&gt;&lt;/b&gt;::   The line of the data source this row is from.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">732</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;header&lt;/tt&gt;&lt;/b&gt;:: The header for the column, when available.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">733</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">734</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  FieldInfo = Struct.new(:index, :line, :header)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">735</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">736</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A Regexp used to find and convert some common Date formats.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">737</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  DateMatcher     = / \A(?: (\w+,?\s+)?\w+\s+\d{1,2},?\s+\d{2,4} |
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">738</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                            \d{4}-\d{2}-\d{2} )\z /x
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">739</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A Regexp used to find and convert some common DateTime formats.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">740</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  DateTimeMatcher =
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">741</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    / \A(?: (\w+,?\s+)?\w+\s+\d{1,2}\s+\d{1,2}:\d{1,2}:\d{1,2},?\s+\d{2,4} |
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">742</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            \d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2} )\z /x
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">743</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">744</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This Hash holds the built-in converters of FasterCSV that can be accessed by
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">745</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # name.  You can select Converters with FasterCSV.convert() or through the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">746</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # +options+ Hash passed to FasterCSV::new().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">747</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">748</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:integer&lt;/tt&gt;&lt;/b&gt;::    Converts any field Integer() accepts.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">749</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:float&lt;/tt&gt;&lt;/b&gt;::      Converts any field Float() accepts.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">750</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:numeric&lt;/tt&gt;&lt;/b&gt;::    A combination of &lt;tt&gt;:integer&lt;/tt&gt; 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">751</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                               and &lt;tt&gt;:float&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">752</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:date&lt;/tt&gt;&lt;/b&gt;::       Converts any field Date::parse() accepts.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">753</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:date_time&lt;/tt&gt;&lt;/b&gt;::  Converts any field DateTime::parse() accepts.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">754</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:all&lt;/tt&gt;&lt;/b&gt;::        All built-in converters.  A combination of 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">755</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                               &lt;tt&gt;:date_time&lt;/tt&gt; and &lt;tt&gt;:numeric&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">756</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">757</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This Hash is intetionally left unfrozen and users should feel free to add
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">758</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # values to it that can be accessed by all FasterCSV objects.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">759</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">760</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # To add a combo field, the value should be an Array of names.  Combo fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">761</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # can be nested with other combo fields.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">762</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">763</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Converters  = { :integer   =&gt; lambda { |f| Integer(f)        rescue f },
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">764</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :float     =&gt; lambda { |f| Float(f)          rescue f },
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">765</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :numeric   =&gt; [:integer, :float],
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">766</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :date      =&gt; lambda { |f|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">767</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                    f =~ DateMatcher ? (Date.parse(f) rescue f) : f
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">768</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  },
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">769</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :date_time =&gt; lambda { |f|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">770</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                    f =~ DateTimeMatcher ? (DateTime.parse(f) rescue f) : f
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">771</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  },
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">772</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :all       =&gt; [:date_time, :numeric] }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">773</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">774</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">775</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This Hash holds the built-in header converters of FasterCSV that can be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">776</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # accessed by name.  You can select HeaderConverters with
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">777</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV.header_convert() or through the +options+ Hash passed to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">778</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV::new().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">779</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">780</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:downcase&lt;/tt&gt;&lt;/b&gt;::  Calls downcase() on the header String.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">781</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:symbol&lt;/tt&gt;&lt;/b&gt;::    The header String is downcased, spaces are
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">782</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                              replaced with underscores, non-word characters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">783</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                              are dropped, and finally to_sym() is called.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">784</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">785</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This Hash is intetionally left unfrozen and users should feel free to add
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">786</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # values to it that can be accessed by all FasterCSV objects.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">787</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">788</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # To add a combo field, the value should be an Array of names.  Combo fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">789</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # can be nested with other combo fields.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">790</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">791</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  HeaderConverters = {
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">792</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    :downcase =&gt; lambda { |h| h.downcase },
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">793</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    :symbol   =&gt; lambda { |h|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">794</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      h.downcase.tr(&quot; &quot;, &quot;_&quot;).delete(&quot;^a-z0-9_&quot;).to_sym
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">795</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">796</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">797</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">798</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">799</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The options used when no overrides are given by calling code.  They are:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">800</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">801</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:col_sep&lt;/tt&gt;&lt;/b&gt;::            &lt;tt&gt;&quot;,&quot;&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">802</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:row_sep&lt;/tt&gt;&lt;/b&gt;::            &lt;tt&gt;:auto&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">803</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:quote_char&lt;/tt&gt;&lt;/b&gt;::         &lt;tt&gt;'&quot;'&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">804</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:converters&lt;/tt&gt;&lt;/b&gt;::         +nil+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">805</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:unconverted_fields&lt;/tt&gt;&lt;/b&gt;:: +nil+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">806</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:headers&lt;/tt&gt;&lt;/b&gt;::            +false+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">807</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:return_headers&lt;/tt&gt;&lt;/b&gt;::     +false+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">808</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:header_converters&lt;/tt&gt;&lt;/b&gt;::  +nil+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">809</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:skip_blanks&lt;/tt&gt;&lt;/b&gt;::        +false+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">810</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:force_quotes&lt;/tt&gt;&lt;/b&gt;::       +false+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">811</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">812</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  DEFAULT_OPTIONS = { :col_sep            =&gt; &quot;,&quot;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">813</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :row_sep            =&gt; :auto,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">814</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :quote_char         =&gt; '&quot;', 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">815</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :converters         =&gt; nil,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">816</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :unconverted_fields =&gt; nil,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">817</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :headers            =&gt; false,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">818</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :return_headers     =&gt; false,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">819</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :header_converters  =&gt; nil,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">820</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :skip_blanks        =&gt; false,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">821</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                      :force_quotes       =&gt; false }.freeze
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">822</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">823</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">824</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method will build a drop-in replacement for many of the standard CSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">825</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # methods.  It allows you to write code like:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">826</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">827</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">828</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #     require &quot;faster_csv&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">829</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #     FasterCSV.build_csv_interface
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">830</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   rescue LoadError
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">831</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #     require &quot;csv&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">832</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">833</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   # ... use CSV here ...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">834</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">835</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This is not a complete interface with completely identical behavior.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">836</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # However, it is intended to be close enough that you won't notice the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">837</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # difference in most cases.  CSV methods supported are:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">838</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">839</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * foreach()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">840</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * generate_line()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">841</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * open()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">842</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * parse()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">843</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * parse_line()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">844</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * readlines()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">845</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">846</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Be warned that this interface is slower than vanilla FasterCSV due to the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">847</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # extra layer of method calls.  Depending on usage, this can slow it down to 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">848</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # near CSV speeds.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">849</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">850</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.build_csv_interface
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">851</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Object.const_set(:CSV, Class.new).class_eval do
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">852</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.foreach(path, rs = :auto, &amp;block)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">853</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        FasterCSV.foreach(path, :row_sep =&gt; rs, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">854</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">855</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">856</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.generate_line(row, fs = &quot;,&quot;, rs = &quot;&quot;)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">857</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        FasterCSV.generate_line(row, :col_sep =&gt; fs, :row_sep =&gt; rs)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">858</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">859</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">860</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.open(path, mode, fs = &quot;,&quot;, rs = :auto, &amp;block)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">861</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if block and mode.include? &quot;r&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">862</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          FasterCSV.open(path, mode, :col_sep =&gt; fs, :row_sep =&gt; rs) do |csv|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">863</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            csv.each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">864</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">865</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">866</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          FasterCSV.open(path, mode, :col_sep =&gt; fs, :row_sep =&gt; rs, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">867</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">868</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">869</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">870</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.parse(str_or_readable, fs = &quot;,&quot;, rs = :auto, &amp;block)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">871</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        FasterCSV.parse(str_or_readable, :col_sep =&gt; fs, :row_sep =&gt; rs, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">872</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">873</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">874</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.parse_line(src, fs = &quot;,&quot;, rs = :auto)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">875</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        FasterCSV.parse_line(src, :col_sep =&gt; fs, :row_sep =&gt; rs)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">876</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">877</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">878</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      def self.readlines(path, rs = :auto)  # :nodoc:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">879</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        FasterCSV.readlines(path, :row_sep =&gt; rs)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">880</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">881</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">882</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">883</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">884</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">885</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method allows you to serialize an Array of Ruby objects to a String or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">886</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # File of CSV data.  This is not as powerful as Marshal or YAML, but perhaps
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">887</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # useful for spreadsheet and database interaction.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">888</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">889</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Out of the box, this method is intended to work with simple data objects or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">890</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Structs.  It will serialize a list of instance variables and/or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">891</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Struct.members().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">892</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">893</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # If you need need more complicated serialization, you can control the process
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">894</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # by adding methods to the class to be serialized.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">895</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">896</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A class method csv_meta() is responsible for returning the first row of the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">897</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # document (as an Array).  This row is considered to be a Hash of the form
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">898</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # key_1,value_1,key_2,value_2,...  FasterCSV::load() expects to find a class
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">899</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # key with a value of the stringified class name and FasterCSV::dump() will
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">900</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # create this, if you do not define this method.  This method is only called
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">901</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # on the first object of the Array.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">902</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">903</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The next method you can provide is an instance method called csv_headers().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">904</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is expected to return the second line of the document (again as
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">905</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # an Array), which is to be used to give each column a header.  By default,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">906</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV::load() will set an instance variable if the field header starts
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">907</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # with an @ character or call send() passing the header as the method name and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">908</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # the field value as an argument.  This method is only called on the first
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">909</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # object of the Array.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">910</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">911</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Finally, you can provide an instance method called csv_dump(), which will
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">912</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # be passed the headers.  This should return an Array of fields that can be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">913</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # serialized for this object.  This method is called once for every object in
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">914</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # the Array.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">915</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">916</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +io+ parameter can be used to serialize to a File, and +options+ can be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">917</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # anything FasterCSV::new() accepts.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">918</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">919</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.dump(ary_of_objs, io = &quot;&quot;, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">920</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    obj_template = ary_of_objs.first
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">921</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">922</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv = FasterCSV.new(io, options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">923</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">924</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # write meta information
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">925</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">926</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv &lt;&lt; obj_template.class.csv_meta
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">927</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    rescue NoMethodError
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">928</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv &lt;&lt; [:class, obj_template.class]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">929</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">930</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">931</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # write headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">932</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">933</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      headers = obj_template.csv_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">934</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    rescue NoMethodError
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">935</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      headers = obj_template.instance_variables.sort
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">936</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if obj_template.class.ancestors.find { |cls| cls.to_s =~ /\AStruct\b/ }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">937</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers += obj_template.members.map { |mem| &quot;#{mem}=&quot; }.sort
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">938</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">939</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">940</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv &lt;&lt; headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">941</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">942</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # serialize each object
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">943</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ary_of_objs.each do |obj|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">944</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">945</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv &lt;&lt; obj.csv_dump(headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">946</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      rescue NoMethodError
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">947</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv &lt;&lt; headers.map do |var|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">948</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          if var[0] == ?@
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">949</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            obj.instance_variable_get(var)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">950</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">951</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            obj[var[0..-2]]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">952</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">953</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">954</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">955</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">956</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">957</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if io.is_a? String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">958</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv.string
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">959</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">960</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv.close
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">961</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">962</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">963</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">964</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">965</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">966</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   filter( options = Hash.new ) { |row| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">967</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   filter( input, options = Hash.new ) { |row| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">968</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   filter( input, output, options = Hash.new ) { |row| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">969</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">970</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is a convenience for building Unix-like filters for CSV data.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">971</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Each row is yielded to the provided block which can alter it as needed.  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">972</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # After the block returns, the row is appended to +output+ altered or not.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">973</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">974</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +input+ and +output+ arguments can be anything FasterCSV::new() accepts
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">975</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # (generally String or IO objects).  If not given, they default to 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">976</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;ARGF&lt;/tt&gt; and &lt;tt&gt;$stdout&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">977</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">978</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +options+ parameter is also filtered down to FasterCSV::new() after some
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">979</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # clever key parsing.  Any key beginning with &lt;tt&gt;:in_&lt;/tt&gt; or 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">980</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;:input_&lt;/tt&gt; will have that leading identifier stripped and will only
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">981</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # be used in the +options+ Hash for the +input+ object.  Keys starting with
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">982</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;:out_&lt;/tt&gt; or &lt;tt&gt;:output_&lt;/tt&gt; affect only +output+.  All other keys 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">983</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # are assigned to both objects.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">984</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">985</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The &lt;tt&gt;:output_row_sep&lt;/tt&gt; +option+ defaults to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">986</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;$INPUT_RECORD_SEPARATOR&lt;/tt&gt; (&lt;tt&gt;$/&lt;/tt&gt;).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">987</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">988</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.filter(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">989</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # parse options for input, output, or both
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">990</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    in_options, out_options = Hash.new, {:row_sep =&gt; $INPUT_RECORD_SEPARATOR}
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">991</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if args.last.is_a? Hash
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">992</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      args.pop.each do |key, value|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">993</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        case key.to_s
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">994</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        when /\Ain(?:put)?_(.+)\Z/
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">995</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          in_options[$1.to_sym] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">996</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        when /\Aout(?:put)?_(.+)\Z/
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">997</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          out_options[$1.to_sym] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">998</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">999</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          in_options[key]  = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1000</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          out_options[key] = value
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1001</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1002</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1003</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1004</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # build input and output wrappers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1005</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    input   = FasterCSV.new(args.shift || ARGF,    in_options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1006</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    output  = FasterCSV.new(args.shift || $stdout, out_options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1007</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1008</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # read, yield, write
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1009</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    input.each do |row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1010</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      yield row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1011</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      output &lt;&lt; row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1012</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1013</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1014</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1015</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1016</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is intended as the primary interface for reading CSV files.  You
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1017</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # pass a +path+ and any +options+ you wish to set for the read.  Each row of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1018</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # file will be passed to the provided +block+ in turn.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1019</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1020</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +options+ parameter can be anything FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1021</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1022</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.foreach(path, options = Hash.new, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1023</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    open(path, &quot;rb&quot;, options) do |csv|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1024</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv.each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1025</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1026</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1027</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1028</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1029</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1030</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   generate( str, options = Hash.new ) { |faster_csv| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1031</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   generate( options = Hash.new ) { |faster_csv| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1032</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1033</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method wraps a String you provide, or an empty default String, in a 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1034</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV object which is passed to the provided block.  You can use the 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1035</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # block to append CSV rows to the String and when the block exits, the 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1036</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # final String will be returned.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1037</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1038</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Note that a passed String *is* modfied by this method.  Call dup() before
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1039</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # passing if you need a new String.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1040</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1041</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +options+ parameter can be anthing FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1042</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1043</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.generate(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1044</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # add a default empty String, if none was given
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1045</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if args.first.is_a? String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1046</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      io = StringIO.new(args.shift)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1047</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      io.seek(0, IO::SEEK_END)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1048</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      args.unshift(io)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1049</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1050</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      args.unshift(&quot;&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1051</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1052</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    faster_csv = new(*args)  # wrap
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1053</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    yield faster_csv         # yield for appending
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1054</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    faster_csv.string        # return final String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1055</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1056</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1057</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1058</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is a shortcut for converting a single row (Array) into a CSV 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1059</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # String.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1060</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1061</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +options+ parameter can be anthing FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1062</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1063</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The &lt;tt&gt;:row_sep&lt;/tt&gt; +option+ defaults to &lt;tt&gt;$INPUT_RECORD_SEPARATOR&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1064</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # (&lt;tt&gt;$/&lt;/tt&gt;) when calling this method.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1065</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1066</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.generate_line(row, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1067</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    options = {:row_sep =&gt; $INPUT_RECORD_SEPARATOR}.merge(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1068</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    (new(&quot;&quot;, options) &lt;&lt; row).string
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1069</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1070</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1071</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1072</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method will return a FasterCSV instance, just like FasterCSV::new(), 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1073</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # but the instance will be cached and returned for all future calls to this 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1074</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # method for the same +data+ object (tested by Object#object_id()) with the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1075</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # same +options+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1076</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1077</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # If a block is given, the instance is passed to the block and the return
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1078</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # value becomes the return value of the block.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1079</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1080</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.instance(data = $stdout, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1081</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # create a _signature_ for this method call, data object and options
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1082</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    sig = [data.object_id] +
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1083</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          options.values_at(*DEFAULT_OPTIONS.keys.sort_by { |sym| sym.to_s })
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1084</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1085</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # fetch or create the instance for this signature
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1086</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @@instances ||= Hash.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1087</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    instance    =   (@@instances[sig] ||= new(data, options))
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1088</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1089</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if block_given?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1090</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      yield instance  # run block, if given, returning result
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1091</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1092</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      instance        # or return the instance
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1093</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1094</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1095</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1096</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1097</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is the reading counterpart to FasterCSV::dump().  See that
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1098</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # method for a detailed description of the process.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1099</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1100</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # You can customize loading by adding a class method called csv_load() which 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1101</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # will be passed a Hash of meta information, an Array of headers, and an Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1102</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # of fields for the object the method is expected to return.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1103</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1104</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Remember that all fields will be Strings after this load.  If you need
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1105</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # something else, use +options+ to setup converters or provide a custom
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1106</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # csv_load() implementation.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1107</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1108</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.load(io_or_str, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1109</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv = FasterCSV.new(io_or_str, options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1110</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1111</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # load meta information
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1112</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    meta = Hash[*csv.shift]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1113</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    cls  = meta[&quot;class&quot;].split(&quot;::&quot;).inject(Object) do |c, const|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1114</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      c.const_get(const)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1115</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1116</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1117</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # load headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1118</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    headers = csv.shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1119</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1120</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # unserialize each object stored in the file
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1121</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    results = csv.inject(Array.new) do |all, row|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1122</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1123</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        obj = cls.csv_load(meta, headers, row)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1124</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      rescue NoMethodError
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1125</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        obj = cls.allocate
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1126</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        headers.zip(row) do |name, value|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1127</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          if name[0] == ?@
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1128</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            obj.instance_variable_set(name, value)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1129</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1130</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            obj.send(name, value)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1131</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1132</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1133</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1134</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      all &lt;&lt; obj
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1135</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1136</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1137</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv.close unless io_or_str.is_a? String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1138</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1139</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    results
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1140</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1141</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1142</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1143</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1144</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   open( filename, mode=&quot;rb&quot;, options = Hash.new ) { |faster_csv| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1145</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   open( filename, mode=&quot;rb&quot;, options = Hash.new )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1146</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1147</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method opens an IO object, and wraps that with FasterCSV.  This is
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1148</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # intended as the primary interface for writing a CSV file.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1149</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1150</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # You may pass any +args+ Ruby's open() understands followed by an optional
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1151</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Hash containing any +options+ FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1152</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1153</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method works like Ruby's open() call, in that it will pass a FasterCSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1154</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # object to a provided block and close it when the block termminates, or it
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1155</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # will return the FasterCSV object when no block is provided.  (*Note*: This
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1156</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # is different from the standard CSV library which passes rows to the block.  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1157</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Use FasterCSV::foreach() for that behavior.)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1158</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1159</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # An opened FasterCSV object will delegate to many IO methods, for 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1160</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # convenience.  You may call:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1161</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1162</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * binmode()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1163</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * close()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1164</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * close_read()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1165</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * close_write()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1166</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * closed?()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1167</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * eof()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1168</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * eof?()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1169</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * fcntl()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1170</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * fileno()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1171</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * flush()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1172</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * fsync()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1173</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * ioctl()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1174</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * isatty()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1175</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * pid()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1176</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * pos()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1177</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * reopen()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1178</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * seek()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1179</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * stat()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1180</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * sync()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1181</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * sync=()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1182</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * tell()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1183</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * to_i()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1184</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * to_io()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1185</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # * tty?()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1186</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1187</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.open(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1188</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # find the +options+ Hash
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1189</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    options = if args.last.is_a? Hash then args.pop else Hash.new end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1190</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # default to a binary open mode
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1191</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    args &lt;&lt; &quot;rb&quot; if args.size == 1
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1192</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # wrap a File opened with the remaining +args+
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1193</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv     = new(File.open(*args), options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1194</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1195</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # handle blocks like Ruby's open(), not like the CSV library
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1196</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if block_given?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1197</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1198</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        yield csv
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1199</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      ensure
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1200</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv.close
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1201</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1202</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1203</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1204</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1205</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1206</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1207</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1208</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1209</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   parse( str, options = Hash.new ) { |row| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1210</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   parse( str, options = Hash.new )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1211</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1212</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method can be used to easily parse CSV out of a String.  You may either
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1213</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # provide a +block+ which will be called with each row of the String in turn,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1214</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # or just use the returned Array of Arrays (when no +block+ is given).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1215</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1216</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # You pass your +str+ to read from, and an optional +options+ Hash containing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1217</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # anything FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1218</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1219</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.parse(*args, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1220</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    csv = new(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1221</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if block.nil?  # slurp contents, if no block is given
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1222</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1223</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv.read
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1224</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      ensure
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1225</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv.close
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1226</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1227</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else           # or pass each row to a provided block
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1228</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv.each(&amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1229</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1230</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1231</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1232</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1233</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method is a shortcut for converting a single line of a CSV String into 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1234</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # a into an Array.  Note that if +line+ contains multiple rows, anything 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1235</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # beyond the first row is ignored.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1236</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1237</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The +options+ parameter can be anthing FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1238</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1239</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.parse_line(line, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1240</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    new(line, options).shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1241</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1242</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1243</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1244</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Use to slurp a CSV file into an Array of Arrays.  Pass the +path+ to the 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1245</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # file and any +options+ FasterCSV::new() understands.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1246</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1247</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.read(path, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1248</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    open(path, &quot;rb&quot;, options) { |csv| csv.read }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1249</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1250</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1251</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Alias for FasterCSV::read().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1252</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.readlines(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1253</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    read(*args)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1254</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1255</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1256</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1257</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # A shortcut for:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1258</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1259</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   FasterCSV.read( path, { :headers           =&gt; true,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1260</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                           :converters        =&gt; :numeric,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1261</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                           :header_converters =&gt; :symbol }.merge(options) )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1262</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1263</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def self.table(path, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1264</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    read( path, { :headers           =&gt; true,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1265</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :converters        =&gt; :numeric,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1266</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                  :header_converters =&gt; :symbol }.merge(options) )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1267</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1268</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1269</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1270</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This constructor will wrap either a String or IO object passed in +data+ for
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1271</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # reading and/or writing.  In addition to the FasterCSV instance methods, 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1272</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # several IO methods are delegated.  (See FasterCSV::open() for a complete 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1273</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # list.)  If you pass a String for +data+, you can later retrieve it (after
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1274</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # writing to it, for example) with FasterCSV.string().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1275</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1276</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Note that a wrapped String will be positioned at at the beginning (for 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1277</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # reading).  If you want it at the end (for writing), use 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1278</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV::generate().  If you want any other positioning, pass a preset 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1279</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # StringIO object instead.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1280</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1281</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # You may set any reading and/or writing preferences in the +options+ Hash.  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1282</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Available options are:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1283</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1284</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:col_sep&lt;/tt&gt;&lt;/b&gt;::            The String placed between each field.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1285</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:row_sep&lt;/tt&gt;&lt;/b&gt;::            The String appended to the end of each
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1286</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       row.  This can be set to the special
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1287</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;:auto&lt;/tt&gt; setting, which requests
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1288</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       that FasterCSV automatically discover
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1289</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       this from the data.  Auto-discovery
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1290</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       reads ahead in the data looking for
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1291</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       the next &lt;tt&gt;&quot;\r\n&quot;&lt;/tt&gt;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1292</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;&quot;\n&quot;&lt;/tt&gt;, or &lt;tt&gt;&quot;\r&quot;&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1293</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       sequence.  A sequence will be selected
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1294</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       even if it occurs in a quoted field,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1295</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       assuming that you would have the same
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1296</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       line endings there.  If none of those
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1297</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       sequences is found, +data+ is
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1298</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;ARGF&lt;/tt&gt;, &lt;tt&gt;STDIN&lt;/tt&gt;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1299</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;STDOUT&lt;/tt&gt;, or &lt;tt&gt;STDERR&lt;/tt&gt;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1300</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       or the stream is only available for
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1301</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       output, the default
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1302</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;$INPUT_RECORD_SEPARATOR&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1303</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       (&lt;tt&gt;$/&lt;/tt&gt;) is used.  Obviously,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1304</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       discovery takes a little time.  Set
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1305</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       manually if speed is important.  Also
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1306</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       note that IO objects should be opened
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1307</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       in binary mode on Windows if this
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1308</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       feature will be used as the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1309</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       line-ending translation can cause
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1310</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       problems with resetting the document
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1311</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       position to where it was before the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1312</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       read ahead.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1313</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:quote_char&lt;/tt&gt;&lt;/b&gt;::         The character used to quote fields.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1314</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       This has to be a single character
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1315</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       String.  This is useful for
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1316</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       application that incorrectly use
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1317</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;'&lt;/tt&gt; as the quote character
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1318</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       instead of the correct &lt;tt&gt;&quot;&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1319</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV will always consider a
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1320</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       double sequence this character to be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1321</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       an escaped quote.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1322</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:encoding&lt;/tt&gt;&lt;/b&gt;::           The encoding to use when parsing the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1323</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       file. Defaults to your &lt;tt&gt;$KDOCE&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1324</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       setting. Valid values: &lt;tt&gt;`n’&lt;/tt&gt; or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1325</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;`N’&lt;/tt&gt; for none, &lt;tt&gt;`e’&lt;/tt&gt; or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1326</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;`E’&lt;/tt&gt; for EUC, &lt;tt&gt;`s’&lt;/tt&gt; or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1327</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;`S’&lt;/tt&gt; for SJIS, and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1328</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;`u’&lt;/tt&gt; or &lt;tt&gt;`U’&lt;/tt&gt; for UTF-8
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1329</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       (see Regexp.new()).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1330</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:field_size_limit&lt;/tt&gt;&lt;/b&gt;::   This is a maximum size FasterCSV will
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1331</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       read ahead looking for the closing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1332</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       quote for a field.  (In truth, it
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1333</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       reads to the first line ending beyond
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1334</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       this size.)  If a quote cannot be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1335</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       found within the limit FasterCSV will
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1336</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       raise a MalformedCSVError, assuming
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1337</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       the data is faulty.  You can use this
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1338</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       limit to prevent what are effectively
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1339</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       DoS attacks on the parser.  However,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1340</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       this limit can cause a legitimate
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1341</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       parse to fail and thus is set to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1342</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       +nil+, or off, by default.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1343</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:converters&lt;/tt&gt;&lt;/b&gt;::         An Array of names from the Converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1344</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       Hash and/or lambdas that handle custom
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1345</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       conversion.  A single converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1346</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       doesn't have to be in an Array.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1347</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:unconverted_fields&lt;/tt&gt;&lt;/b&gt;:: If set to +true+, an
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1348</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       unconverted_fields() method will be
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1349</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       added to all returned rows (Array or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1350</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV::Row) that will return the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1351</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       fields as they were before convertion.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1352</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       Note that &lt;tt&gt;:headers&lt;/tt&gt; supplied
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1353</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       by Array or String were not fields of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1354</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       the document and thus will have an
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1355</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       empty Array attached.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1356</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:headers&lt;/tt&gt;&lt;/b&gt;::            If set to &lt;tt&gt;:first_row&lt;/tt&gt; or 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1357</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       +true+, the initial row of the CSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1358</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       file will be treated as a row of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1359</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       headers.  If set to an Array, the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1360</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       contents will be used as the headers.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1361</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       If set to a String, the String is run
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1362</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       through a call of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1363</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV::parse_line() with the same
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1364</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;:col_sep&lt;/tt&gt;, &lt;tt&gt;:row_sep&lt;/tt&gt;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1365</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       and &lt;tt&gt;:quote_char&lt;/tt&gt; as this
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1366</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       instance to produce an Array of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1367</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       headers.  This setting causes
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1368</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV.shift() to return rows as
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1369</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV::Row objects instead of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1370</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       Arrays and FasterCSV.read() to return
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1371</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       FasterCSV::Table objects instead of
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1372</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       an Array of Arrays.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1373</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:return_headers&lt;/tt&gt;&lt;/b&gt;::     When +false+, header rows are silently
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1374</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       swallowed.  If set to +true+, header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1375</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       rows are returned in a FasterCSV::Row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1376</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       object with identical headers and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1377</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       fields (save that the fields do not go
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1378</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       through the converters).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1379</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:write_headers&lt;/tt&gt;&lt;/b&gt;::      When +true+ and &lt;tt&gt;:headers&lt;/tt&gt; is
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1380</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       set, a header row will be added to the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1381</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       output.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1382</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:header_converters&lt;/tt&gt;&lt;/b&gt;::  Identical in functionality to
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1383</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       &lt;tt&gt;:converters&lt;/tt&gt; save that the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1384</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       conversions are only made to header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1385</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       rows.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1386</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:skip_blanks&lt;/tt&gt;&lt;/b&gt;::        When set to a +true+ value, FasterCSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1387</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       will skip over any rows with no
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1388</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       content.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1389</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;b&gt;&lt;tt&gt;:force_quotes&lt;/tt&gt;&lt;/b&gt;::       When set to a +true+ value, FasterCSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1390</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #                                       will quote all CSV fields it creates.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1391</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1392</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # See FasterCSV::DEFAULT_OPTIONS for the default settings.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1393</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1394</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Options cannot be overriden in the instance methods for performance reasons,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1395</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # so be sure to set what you want here.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1396</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1397</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def initialize(data, options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1398</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # build the options for this read/write
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1399</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    options = DEFAULT_OPTIONS.merge(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1400</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1401</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # create the IO object we will read from
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1402</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @io = if data.is_a? String then StringIO.new(data) else data end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1403</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1404</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    init_separators(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1405</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    init_parsers(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1406</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    init_converters(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1407</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    init_headers(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1408</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1409</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    unless options.empty?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1410</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      raise ArgumentError, &quot;Unknown options:  #{options.keys.join(', ')}.&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1411</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1412</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1413</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # track our own lineno since IO gets confused about line-ends is CSV fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1414</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @lineno = 0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1415</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1416</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1417</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1418</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The line number of the last row read from this file.  Fields with nested 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1419</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # line-end characters will not affect this count.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1420</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1421</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  attr_reader :lineno
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1422</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1423</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  ### IO and StringIO Delegation ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1424</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1425</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  extend Forwardable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1426</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def_delegators :@io, :binmode, :close, :close_read, :close_write, :closed?,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1427</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                       :eof, :eof?, :fcntl, :fileno, :flush, :fsync, :ioctl,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1428</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                       :isatty, :pid, :pos, :reopen, :seek, :stat, :string,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1429</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                       :sync, :sync=, :tell, :to_i, :to_io, :tty?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1430</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1431</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Rewinds the underlying IO object and resets FasterCSV's lineno() counter.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1432</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def rewind
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1433</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @headers = nil
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1434</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @lineno  = 0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1435</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1436</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @io.rewind
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1437</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1438</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1439</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  ### End Delegation ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1440</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1441</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1442</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The primary write method for wrapped Strings and IOs, +row+ (an Array or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1443</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV::Row) is converted to CSV and appended to the data source.  When a
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1444</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV::Row is passed, only the row's fields() are appended to the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1445</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # output.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1446</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1447</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The data source must be open for writing.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1448</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1449</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def &lt;&lt;(row)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1450</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # make sure headers have been assigned
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1451</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if header_row? and [Array, String].include? @use_headers.class
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1452</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      parse_headers  # won't read data for Array or String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1453</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      self &lt;&lt; @headers if @write_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1454</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1455</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1456</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # Handle FasterCSV::Row objects and Hashes
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1457</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    row = case row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1458</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          when self.class::Row then row.fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1459</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          when Hash            then @headers.map { |header| row[header] }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1460</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else                      row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1461</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1462</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1463</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @headers =  row if header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1464</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @lineno  += 1
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1465</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1466</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @io &lt;&lt; row.map(&amp;@quote).join(@col_sep) + @row_sep  # quote and separate
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1467</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1468</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    self  # for chaining
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1469</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1470</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  alias_method :add_row, :&lt;&lt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1471</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  alias_method :puts,    :&lt;&lt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1472</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1473</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1474</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1475</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   convert( name )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1476</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   convert { |field| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1477</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   convert { |field, field_info| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1478</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1479</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # You can use this method to install a FasterCSV::Converters built-in, or 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1480</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # provide a block that handles a custom conversion.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1481</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1482</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # If you provide a block that takes one argument, it will be passed the field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1483</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # and is expected to return the converted value or the field itself.  If your
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1484</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # block takes two arguments, it will also be passed a FieldInfo Struct, 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1485</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # containing details about the field.  Again, the block should return a 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1486</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # converted field or the field itself.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1487</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1488</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def convert(name = nil, &amp;converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1489</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    add_converter(:converters, self.class::Converters, name, &amp;converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1490</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1491</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1492</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1493</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # :call-seq:
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1494</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   header_convert( name )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1495</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   header_convert { |field| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1496</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  #   header_convert { |field, field_info| ... }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1497</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1498</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Identical to FasterCSV.convert(), but for header rows.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1499</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1500</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Note that this method must be called before header rows are read to have any
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1501</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # effect.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1502</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1503</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def header_convert(name = nil, &amp;converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1504</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    add_converter( :header_converters,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1505</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                   self.class::HeaderConverters,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1506</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                   name,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1507</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                   &amp;converter )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1508</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1509</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1510</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  include Enumerable
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1511</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1512</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1513</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Yields each row of the data source in turn.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1514</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1515</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Support for Enumerable.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1516</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1517</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The data source must be open for reading.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1518</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1519</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def each
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1520</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    while row = shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1521</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      yield row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1522</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1523</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1524</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1525</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1526</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Slurps the remaining rows and returns an Array of Arrays.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1527</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1528</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The data source must be open for reading.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1529</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1530</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def read
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1531</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    rows = to_a
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1532</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @use_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1533</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      Table.new(rows)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1534</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1535</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      rows
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1536</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1537</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1538</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  alias_method :readlines, :read
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1539</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1540</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Returns +true+ if the next row read will be a header row.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1541</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def header_row?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1542</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @use_headers and @headers.nil?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1543</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1544</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1545</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1546</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The primary read method for wrapped Strings and IOs, a single row is pulled
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1547</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # from the data source, parsed and returned as an Array of fields (if header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1548</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # rows are not used) or a FasterCSV::Row (when header rows are used).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1549</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1550</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The data source must be open for reading.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1551</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1552</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1553</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #########################################################################
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1554</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ### This method is purposefully kept a bit long as simple conditional ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1555</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ### checks are faster than numerous (expensive) method calls.         ###
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1556</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    #########################################################################
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1557</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1558</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # handle headers not based on document content
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1559</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if header_row? and @return_headers and
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1560</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>       [Array, String].include? @use_headers.class
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1561</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @unconverted_fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1562</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return add_unconverted_fields(parse_headers, Array.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1563</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1564</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return parse_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1565</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1566</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1567</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1568</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # begin with a blank line, so we can always add to it
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1569</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    line = String.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1570</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1571</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1572</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # it can take multiple calls to &lt;tt&gt;@io.gets()&lt;/tt&gt; to get a full line,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1573</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # because of \r and/or \n characters embedded in quoted fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1574</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1575</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    loop do
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1576</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # add another read to the line
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1577</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1578</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        line  += @io.gets(@row_sep)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1579</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      rescue
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1580</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return nil
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1581</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1582</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # copy the line so we can chop it up in parsing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1583</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      parse =  line.dup
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1584</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      parse.sub!(@parsers[:line_end], &quot;&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1585</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1586</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1587</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # I believe a blank line should be an &lt;tt&gt;Array.new&lt;/tt&gt;, not 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1588</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # CSV's &lt;tt&gt;[nil]&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1589</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1590</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if parse.empty?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1591</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @lineno += 1
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1592</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if @skip_blanks
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1593</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          line = &quot;&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1594</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          next
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1595</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        elsif @unconverted_fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1596</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          return add_unconverted_fields(Array.new, Array.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1597</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        elsif @use_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1598</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          return FasterCSV::Row.new(Array.new, Array.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1599</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1600</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          return Array.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1601</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1602</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1603</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1604</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # parse the fields with a mix of String#split and regular expressions
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1605</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      csv           = Array.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1606</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      current_field = String.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1607</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      field_quotes  = 0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1608</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      parse.split(@col_sep, -1).each do |match|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1609</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if current_field.empty? &amp;&amp; match.count(@quote_and_newlines).zero?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1610</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          csv           &lt;&lt; (match.empty? ? nil : match)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1611</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        elsif(current_field.empty? ? match[0] : current_field[0]) == @quote_char[0]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1612</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          current_field &lt;&lt; match
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1613</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          field_quotes += match.count(@quote_char)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1614</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          if field_quotes % 2 == 0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1615</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            in_quotes = current_field[@parsers[:quoted_field], 1]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1616</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            raise MalformedCSVError unless in_quotes
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1617</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            current_field = in_quotes
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1618</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            current_field.gsub!(@quote_char * 2, @quote_char) # unescape contents
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1619</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            csv           &lt;&lt; current_field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1620</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            current_field =  String.new
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1621</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            field_quotes  =  0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1622</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else # we found a quoted field that spans multiple lines
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1623</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            current_field &lt;&lt; @col_sep
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1624</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1625</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        elsif match.count(&quot;\r\n&quot;).zero?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1626</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          raise MalformedCSVError, &quot;Illegal quoting on line #{lineno + 1}.&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1627</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1628</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          raise MalformedCSVError, &quot;Unquoted fields do not allow &quot; +
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1629</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                   &quot;\\r or \\n (line #{lineno + 1}).&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1630</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1631</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1632</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1633</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # if parse is empty?(), we found all the fields on the line...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1634</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if field_quotes % 2 == 0
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1635</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @lineno += 1
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1636</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1637</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        # save fields unconverted fields, if needed...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1638</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        unconverted = csv.dup if @unconverted_fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1639</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1640</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        # convert fields, if needed...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1641</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv = convert_fields(csv) unless @use_headers or @converters.empty?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1642</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        # parse out header rows and handle FasterCSV::Row conversions...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1643</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        csv = parse_headers(csv)  if     @use_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1644</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1645</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        # inject unconverted fields and accessor, if requested...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1646</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if @unconverted_fields and not csv.respond_to? :unconverted_fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1647</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          add_unconverted_fields(csv, unconverted)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1648</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1649</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1650</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        # return the results
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1651</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        break csv
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1652</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1653</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # if we're not empty?() but at eof?(), a quoted field wasn't closed...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1654</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @io.eof?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1655</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        raise MalformedCSVError, &quot;Unclosed quoted field on line #{lineno + 1}.&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1656</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      elsif @field_size_limit and current_field.size &gt;= @field_size_limit
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1657</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        raise MalformedCSVError, &quot;Field size exceeded on line #{lineno + 1}.&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1658</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1659</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # otherwise, we need to loop and pull some more data to complete the row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1660</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1661</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1662</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  alias_method :gets,     :shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1663</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  alias_method :readline, :shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1664</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1665</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Returns a simplified description of the key FasterCSV attributes.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1666</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def inspect
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1667</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    str = &quot;&lt;##{self.class} io_type:&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1668</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # show type of wrapped IO
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1669</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if    @io == $stdout then str &lt;&lt; &quot;$stdout&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1670</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    elsif @io == $stdin  then str &lt;&lt; &quot;$stdin&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1671</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    elsif @io == $stderr then str &lt;&lt; &quot;$stderr&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1672</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else                      str &lt;&lt; @io.class.to_s
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1673</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1674</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # show IO.path(), if available
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1675</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @io.respond_to?(:path) and (p = @io.path)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1676</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      str &lt;&lt; &quot; io_path:#{p.inspect}&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1677</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1678</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # show other attributes
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1679</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    %w[ lineno     col_sep     row_sep
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1680</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        quote_char skip_blanks encoding ].each do |attr_name|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1681</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if a = instance_variable_get(&quot;@#{attr_name}&quot;)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1682</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        str &lt;&lt; &quot; #{attr_name}:#{a.inspect}&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1683</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1684</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1685</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @use_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1686</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      str &lt;&lt; &quot; headers:#{(@headers || true).inspect}&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1687</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1688</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    str &lt;&lt; &quot;&gt;&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1689</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1690</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1691</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  private
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1692</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1693</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1694</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Stores the indicated separators for later use.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1695</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1696</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # If auto-discovery was requested for &lt;tt&gt;@row_sep&lt;/tt&gt;, this method will read
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1697</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # ahead in the &lt;tt&gt;@io&lt;/tt&gt; and try to find one.  +ARGF+, +STDIN+, +STDOUT+,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1698</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # +STDERR+ and any stream open for output only with a default
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1699</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;@row_sep&lt;/tt&gt; of &lt;tt&gt;$INPUT_RECORD_SEPARATOR&lt;/tt&gt; (&lt;tt&gt;$/&lt;/tt&gt;).
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1700</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1701</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method also establishes the quoting rules used for CSV output.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1702</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1703</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def init_separators(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1704</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # store the selected separators
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1705</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @col_sep            = options.delete(:col_sep)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1706</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @row_sep            = options.delete(:row_sep)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1707</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @quote_char         = options.delete(:quote_char)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1708</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @quote_and_newlines = &quot;#{@quote_char}\r\n&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1709</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1710</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @quote_char.length != 1
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1711</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      raise ArgumentError, &quot;:quote_char has to be a single character String&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1712</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1713</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1714</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # automatically discover row separator when requested
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1715</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @row_sep == :auto
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1716</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if [ARGF, STDIN, STDOUT, STDERR].include?(@io) or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1717</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        (defined?(Zlib) and @io.class == Zlib::GzipWriter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1718</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        @row_sep = $INPUT_RECORD_SEPARATOR
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1719</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1720</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        begin
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1721</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          saved_pos = @io.pos  # remember where we were
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1722</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          while @row_sep == :auto
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1723</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1724</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # if we run out of data, it's probably a single line 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1725</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # (use a sensible default)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1726</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1727</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if @io.eof?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1728</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              @row_sep = $INPUT_RECORD_SEPARATOR
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1729</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              break
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1730</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1731</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1732</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # read ahead a bit
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1733</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            sample =  @io.read(1024)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1734</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            sample += @io.read(1) if sample[-1..-1] == &quot;\r&quot; and not @io.eof?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1735</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1736</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            # try to find a standard separator
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1737</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if sample =~ /\r\n?|\n/
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1738</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              @row_sep = $&amp;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1739</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>              break
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1740</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1741</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1742</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          # tricky seek() clone to work around GzipReader's lack of seek()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1743</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @io.rewind
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1744</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          # reset back to the remembered position
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1745</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          while saved_pos &gt; 1024  # avoid loading a lot of data into memory
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1746</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            @io.read(1024)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1747</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            saved_pos -= 1024
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1748</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1749</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @io.read(saved_pos) if saved_pos.nonzero?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1750</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rescue IOError  # stream not opened for reading
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1751</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          @row_sep = $INPUT_RECORD_SEPARATOR
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1752</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1753</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1754</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1755</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1756</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # establish quoting rules
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1757</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    do_quote = lambda do |field|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1758</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @quote_char                                      +
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1759</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      String(field).gsub(@quote_char, @quote_char * 2) +
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1760</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @quote_char
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1761</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1762</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @quote = if options.delete(:force_quotes)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1763</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      do_quote
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1764</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1765</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      lambda do |field|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1766</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if field.nil?  # represent +nil+ fields as empty unquoted fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1767</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          &quot;&quot;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1768</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1769</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          field = String(field)  # Stringify fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1770</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          # represent empty fields as empty quoted fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1771</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          if field.empty? or
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1772</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>             field.count(&quot;\r\n#{@col_sep}#{@quote_char}&quot;).nonzero?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1773</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            do_quote.call(field)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1774</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1775</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            field  # unquoted field
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1776</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1777</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1778</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1779</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1780</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1781</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1782</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Pre-compiles parsers and stores them by name for access during reads.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1783</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def init_parsers(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1784</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # store the parser behaviors
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1785</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @skip_blanks      = options.delete(:skip_blanks)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1786</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @encoding         = options.delete(:encoding)  # nil will use $KCODE
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1787</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @field_size_limit = options.delete(:field_size_limit)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1788</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1789</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # prebuild Regexps for faster parsing
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1790</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    esc_col_sep = Regexp.escape(@col_sep)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1791</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    esc_row_sep = Regexp.escape(@row_sep)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1792</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    esc_quote   = Regexp.escape(@quote_char)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1793</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @parsers = {
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1794</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      :any_field      =&gt; Regexp.new( &quot;[^#{esc_col_sep}]+&quot;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1795</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                     Regexp::MULTILINE,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1796</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                     @encoding ),
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1797</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      :quoted_field   =&gt; Regexp.new( &quot;^#{esc_quote}(.*)#{esc_quote}$&quot;,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1798</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                     Regexp::MULTILINE,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1799</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                     @encoding ),
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1800</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # safer than chomp!()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1801</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      :line_end       =&gt; Regexp.new(&quot;#{esc_row_sep}\\z&quot;, nil, @encoding)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1802</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1803</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1804</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1805</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1806</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Loads any converters requested during construction.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1807</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1808</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # If +field_name+ is set &lt;tt&gt;:converters&lt;/tt&gt; (the default) field converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1809</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # are set.  When +field_name+ is &lt;tt&gt;:header_converters&lt;/tt&gt; header converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1810</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # are added instead.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1811</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1812</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The &lt;tt&gt;:unconverted_fields&lt;/tt&gt; option is also actived for 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1813</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # &lt;tt&gt;:converters&lt;/tt&gt; calls, if requested.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1814</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1815</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def init_converters(options, field_name = :converters)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1816</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if field_name == :converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1817</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @unconverted_fields = options.delete(:unconverted_fields)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1818</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1819</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1820</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    instance_variable_set(&quot;@#{field_name}&quot;, Array.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1821</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1822</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # find the correct method to add the coverters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1823</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    convert = method(field_name.to_s.sub(/ers\Z/, &quot;&quot;))
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1824</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1825</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # load converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1826</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    unless options[field_name].nil?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1827</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # allow a single converter not wrapped in an Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1828</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      unless options[field_name].is_a? Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1829</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        options[field_name] = [options[field_name]]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1830</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1831</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # load each converter...
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1832</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      options[field_name].each do |converter|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1833</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if converter.is_a? Proc  # custom code block
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1834</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          convert.call(&amp;converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1835</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else                     # by name
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1836</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          convert.call(converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1837</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1838</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1839</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1840</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1841</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    options.delete(field_name)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1842</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1843</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1844</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Stores header row settings and loads header converters, if needed.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1845</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def init_headers(options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1846</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @use_headers    = options.delete(:headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1847</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @return_headers = options.delete(:return_headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1848</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @write_headers  = options.delete(:write_headers)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1849</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1850</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # headers must be delayed until shift(), in case they need a row of content
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1851</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    @headers = nil
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1852</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1853</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    init_converters(options, :header_converters)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1854</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1855</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1856</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1857</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # The actual work method for adding converters, used by both 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1858</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # FasterCSV.convert() and FasterCSV.header_convert().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1859</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1860</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This method requires the +var_name+ of the instance variable to place the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1861</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # converters in, the +const+ Hash to lookup named converters in, and the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1862</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # normal parameters of the FasterCSV.convert() and FasterCSV.header_convert()
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1863</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # methods.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1864</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1865</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def add_converter(var_name, const, name = nil, &amp;converter)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1866</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if name.nil?  # custom converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1867</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      instance_variable_get(&quot;@#{var_name}&quot;) &lt;&lt; converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1868</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    else          # named converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1869</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      combo = const[name]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1870</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      case combo
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1871</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      when Array  # combo converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1872</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        combo.each do |converter_name|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1873</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          add_converter(var_name, const, converter_name)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1874</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1875</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      else        # individual named converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1876</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        instance_variable_get(&quot;@#{var_name}&quot;) &lt;&lt; combo
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1877</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1878</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1879</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1880</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1881</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1882</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Processes +fields+ with &lt;tt&gt;@converters&lt;/tt&gt;, or &lt;tt&gt;@header_converters&lt;/tt&gt;
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1883</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # if +headers+ is passed as +true+, returning the converted field set.  Any
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1884</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # converter that changes the field into something other than a String halts
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1885</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # the pipeline of conversion for that field.  This is primarily an efficiency
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1886</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # shortcut.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1887</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1888</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def convert_fields(fields, headers = false)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1889</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    # see if we are converting headers or fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1890</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    converters = headers ? @header_converters : @converters
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1891</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1892</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    fields.enum_for(:each_with_index).map do |field, index|  # map_with_index
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1893</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      converters.each do |converter|
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1894</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        field = if converter.arity == 1  # straight field converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1895</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          converter[field]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1896</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else                             # FieldInfo converter
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1897</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          header = @use_headers &amp;&amp; !headers ? @headers[index] : nil
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1898</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          converter[field, FieldInfo.new(index, lineno, header)]
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1899</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1900</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        break unless field.is_a? String  # short-curcuit pipeline for speed
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1901</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1902</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      field  # return final state of each field, converted or original
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1903</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1904</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1905</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1906</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1907</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # This methods is used to turn a finished +row+ into a FasterCSV::Row.  Header
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1908</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # rows are also dealt with here, either by returning a FasterCSV::Row with
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1909</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # identical headers and fields (save that the fields do not go through the
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1910</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # converters) or by reading past them to return a field row. Headers are also
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1911</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # saved in &lt;tt&gt;@headers&lt;/tt&gt; for use in future rows.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1912</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1913</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # When +nil+, +row+ is assumed to be a header row not based on an actual row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1914</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # of the stream.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1915</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1916</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def parse_headers(row = nil)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1917</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if @headers.nil?                # header row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1918</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @headers = case @use_headers  # save headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1919</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 # Array of headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1920</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 when Array  then @use_headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1921</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 # CSV header String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1922</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 when String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1923</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                   self.class.parse_line( @use_headers,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1924</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                          :col_sep    =&gt; @col_sep,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1925</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                          :row_sep    =&gt; @row_sep,
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1926</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                                          :quote_char =&gt; @quote_char )
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1927</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 # first row is headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1928</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 else             row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1929</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                 end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1930</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1931</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      # prepare converted and unconverted copies
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1932</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      row      = @headers                       if row.nil?
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1933</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      @headers = convert_fields(@headers, true)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1934</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1935</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      if @return_headers                                     # return headers
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1936</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return FasterCSV::Row.new(@headers, row, true)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1937</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      elsif not [Array, String].include? @use_headers.class  # skip to field row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1938</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return shift
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1939</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1940</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1941</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1942</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    FasterCSV::Row.new(@headers, convert_fields(row))  # field row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1943</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1944</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1945</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1946</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Thiw methods injects an instance variable &lt;tt&gt;unconverted_fields&lt;/tt&gt; into
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1947</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # +row+ and an accessor method for it called unconverted_fields().  The
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1948</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # variable is set to the contents of +fields+.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1949</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # 
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1950</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def add_unconverted_fields(row, fields)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1951</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    class &lt;&lt; row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1952</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>      attr_reader :unconverted_fields
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1953</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1954</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    row.instance_eval { @unconverted_fields = fields }
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1955</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    row
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1956</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1957</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1958</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1959</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># Another name for FasterCSV.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1960</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>FCSV = FasterCSV
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1961</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1962</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># Another name for FasterCSV::instance().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1963</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>def FasterCSV(*args, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1964</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  FasterCSV.instance(*args, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1965</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1966</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1967</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre># Another name for FCSV::instance().
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1968</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>def FCSV(*args, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1969</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  FCSV.instance(*args, &amp;block)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1970</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1971</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1972</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>class Array
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1973</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Equivalent to &lt;tt&gt;FasterCSV::generate_line(self, options)&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1974</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def to_csv(options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1975</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    FasterCSV.generate_line(self, options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1976</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1977</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1978</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1979</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>class String
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1980</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  # Equivalent to &lt;tt&gt;FasterCSV::parse_line(self, options)&lt;/tt&gt;.
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1981</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  def parse_csv(options = Hash.new)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1982</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    FasterCSV.parse_line(self, options)
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1983</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">1984</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>end
</pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      b/lib/redmine.rb
    </th>
  </tr>
</thead>
<tbody>

<tr>
  <th class="line-num">19</th>
  <th class="line-num">19</th>
  <td class="line-code ">
    <pre>end
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">20</th>
  <th class="line-num">20</th>
  <td class="line-code ">
    <pre>
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">21</th>
  <th class="line-num">21</th>
  <td class="line-code ">
    <pre>if RUBY_VERSION &lt; '1.9'
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  require 'faster<span>_</span>csv'
</pre>
  </td>
</tr>

<tr>
  <th class="line-num"></th>
  <th class="line-num">22</th>
  <td class="line-code diff_in">
    <pre>  require 'faster<span></span>csv'
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">23</th>
  <th class="line-num">23</th>
  <td class="line-code ">
    <pre>else
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">24</th>
  <th class="line-num">24</th>
  <td class="line-code ">
    <pre>  require 'csv'
</pre>
  </td>
</tr>

<tr>
  <th class="line-num">25</th>
  <th class="line-num">25</th>
  <td class="line-code ">
    <pre>  FCSV = CSV
</pre>
  </td>
</tr>
</tbody>
</table>
</div>




<p class="other-formats">(Other formats not available in this archive.</p>




        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>

<!-- Mirrored from redmine.ogf.org/projects/redmine-og/repository/revisions/d7f091927706950b63fcfabbff36311b6c8c06ab/diff by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Sep 2022 22:40:23 GMT -->
</html>
