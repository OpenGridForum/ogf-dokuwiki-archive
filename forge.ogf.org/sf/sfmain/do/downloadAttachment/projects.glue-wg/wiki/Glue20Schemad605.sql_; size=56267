-- ================================================================================
--   oracle SQL DDL Script File
-- ================================================================================


-- ===============================================================================
-- 
--   Generated by:      tedia2sql -- v1.2.12
--                      See http://tedia2sql.tigris.org/AUTHORS.html for tedia2sql author information
-- 
--   Target Database:   oracle
--   Generated at:      Mon May 19 15:54:24 2008
--   Input Files:       GLUE20_41_2.dia
-- 
-- ================================================================================



-- Generated SQL Constraints Drop statements
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia

drop index uidx_AttType_name;
drop index idx_name;
drop index uidx_Endpoint;
drop index uidx_EntryTypes_name;
drop index idx_UD_name;
drop index idx_uniqueKey;
drop index uidx_SShare;
drop index uidx_SShareCapacity;
drop index uidx_AccessProt;
alter table ComputingServiceLoc drop constraint fk_CServicelocID ;
alter table AccessPolicy drop constraint fk_UserEndpoint ;
alter table AccessPolicy drop constraint fk_EndpointAccess ;
alter table MappingPolicy drop constraint fk_UserShare ;
alter table ApplicationEnvironment drop constraint fk_CManagerAppEnv ;
alter table EndpointShare_LNK drop constraint fk_EndpointShare ;
alter table ComputingManager drop constraint fk_CServiceCManager ;
alter table ComputingActivity drop constraint fk_CServiceCActivity ;
alter table ComputingActivity drop constraint fk_CManagerCActivity ;
alter table ComputingActivity drop constraint fk_CShareCActivty ;
alter table StorageMappingPolicy drop constraint fk_UserDomainSShare ;
alter table StorageMappingPolicy drop constraint fk_SShareUserDomain ;
alter table StorageShare drop constraint fk_SServiceSShare ;
alter table StorageService drop constraint fk_AdminStorageService ;
alter table StorageAccessProtocol drop constraint fk_SServiceAccessProt ;
alter table ComputingService drop constraint fk_AdminCService ;
alter table ExecutionEnvironment drop constraint fk_ExecEnvCManager ;
alter table Benchmark drop constraint fk_CBenchmarkEntryTypes ;
alter table CService_SService drop constraint fk_CS_CSSS ;
alter table CService_SService drop constraint fk_SS_CSSS ;
alter table StorageShareCapacity drop constraint fk_SShareSCapacity ;
alter table StorageServiceCapacity drop constraint fk_SServiceSCap ;
alter table ComputingMappingPolicy drop constraint fk_UserComputingShare ;
alter table ComputingEndpoint drop constraint fk_EndpointCEndpoint ;
alter table ComputingEndpoint drop constraint fk_CServiceCEndpoint ;
alter table StorageEndpoint drop constraint fk_EndpointSEndpoint ;
alter table StorageEndpoint drop constraint fk_SServiceSEndpoint ;
alter table StorageResource drop constraint fk_SManagerSResource ;
alter table StorageManager drop constraint fk_SServiceSManager ;
alter table ComputingShare drop constraint fk_CShareSService ;
alter table ComputingActivity drop constraint fk_ExecEnvCActivity ;
alter table SShareSResource drop constraint shrSRsrc_fk_StrgShrServiceID ;
alter table SShareSResource drop constraint shrSRsrc_fk_StorageResourceID ;
alter table AppEnvExecEnv drop constraint apnvxcnv_fk_AplctnvrnmntSrvcD ;
alter table AppEnvExecEnv drop constraint apnvxcnv_fk_ExctnvrnmntID ;
alter table CShareExecEnv drop constraint cShrxcnv_fk_CmptngShrServiceID ;
alter table CShareExecEnv drop constraint cShrxcnv_fk_ExctnvrnmntID ;
alter table ComputingService_MVA drop constraint fk_CSMVA_AttType ;
alter table ComputingManager_MVA drop constraint fk_CMMVA_AttType ;
alter table ComputingShare_MVA drop constraint fk_CShareMVA_AttType ;
alter table CShareCapacity_MVA drop constraint fk_CCMVA_AttType ;
alter table ExecutionEnvironment_MVA drop constraint fk_ExecEnv_AttType ;
alter table ApplicationEnvironment_MVA drop constraint fk_AppEnvMVA_AttType ;
alter table ComputingActivity_MVA drop constraint fk_CAMVA_AttType ;
alter table Endpoint_MVA drop constraint fk_Endpoint_AttType ;
alter table StorageShare_MVA drop constraint fk_SShareMVA_AttType ;
alter table SShareCapacity_MVA drop constraint fk_SCMVA_AttType ;
alter table SAccessPolicy_MVA drop constraint fk_SAPMVA_AttType ;
alter table StorageResource_MVA drop constraint fk_SMMVA_AttType ;
alter table StorageManager_MVA drop constraint fk_SMVMA_AttType ;
alter table StorageService_MVA drop constraint fk_SSMVA_AttType ;
alter table UserContact drop constraint fk_UserDomUserContact ;
alter table AdminContact drop constraint fk_AdminDomAdminContact ;
alter table AdminDomainLocation drop constraint fk_AdminDomAdminLoc ;
alter table UserDomainLocation drop constraint fk_UserDomUserLoc ;
alter table StorageServiceLoc drop constraint fk_SServiceLocSService ;
alter table ComputingShare drop constraint fk_CServiceCShare ;
alter table ApplicationHandle drop constraint fk_AppEnvHandleCService ;
alter table ApplicationHandle drop constraint fk_AppEnv ;


-- Generated Permissions Drops
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia




-- Generated SQL View Drop Statements
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia

drop view GLUE20.V_ExecEnvBenchmark cascade constraints ;
drop view GLUE20.V_CManagerBenchmark cascade constraints ;


-- Generated SQL Schema Drop statements
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia

drop table GLUE20.SShareSResource cascade constraints ;
drop table GLUE20.AppEnvExecEnv cascade constraints ;
drop table GLUE20.CShareExecEnv cascade constraints ;
drop table GLUE20.AttributeTypes cascade constraints ;
drop table GLUE20.AdminDomain cascade constraints ;
drop table GLUE20.Endpoint cascade constraints ;
drop table GLUE20.EntryTypes cascade constraints ;
drop table GLUE20.UserDomain cascade constraints ;
drop table GLUE20.AccessPolicy cascade constraints ;
drop table GLUE20.MappingPolicy cascade constraints ;
drop table GLUE20.ComputingService cascade constraints ;
drop table GLUE20.ComputingManager cascade constraints ;
drop table GLUE20.ComputingShare cascade constraints ;
drop table GLUE20.ApplicationEnvironment cascade constraints ;
drop table GLUE20.EndpointShare_LNK cascade constraints ;
drop table GLUE20.Benchmark cascade constraints ;
drop table GLUE20.ComputingActivity cascade constraints ;
drop table GLUE20.StorageService cascade constraints ;
drop table GLUE20.StorageShare cascade constraints ;
drop table GLUE20.StorageShareCapacity cascade constraints ;
drop table GLUE20.StorageMappingPolicy cascade constraints ;
drop table GLUE20.StorageAccessProtocol cascade constraints ;
drop table GLUE20.ExecutionEnvironment cascade constraints ;
drop table GLUE20.CService_SService cascade constraints ;
drop table GLUE20.StorageServiceCapacity cascade constraints ;
drop table GLUE20.ComputingMappingPolicy cascade constraints ;
drop table GLUE20.ComputingEndpoint cascade constraints ;
drop table GLUE20.StorageEndpoint cascade constraints ;
drop table GLUE20.StorageManager cascade constraints ;
drop table GLUE20.StorageResource cascade constraints ;
drop table GLUE20.Endpoint_MVA cascade constraints ;
drop table GLUE20.ComputingService_MVA cascade constraints ;
drop table GLUE20.StorageService_MVA cascade constraints ;
drop table GLUE20.ComputingShare_MVA cascade constraints ;
drop table GLUE20.StorageShare_MVA cascade constraints ;
drop table GLUE20.ComputingManager_MVA cascade constraints ;
drop table GLUE20.ExecutionEnvironment_MVA cascade constraints ;
drop table GLUE20.ApplicationEnvironment_MVA cascade constraints ;
drop table GLUE20.ComputingActivity_MVA cascade constraints ;
drop table GLUE20.SShareCapacity_MVA cascade constraints ;
drop table GLUE20.CShareCapacity_MVA cascade constraints ;
drop table GLUE20.SAccessPolicy_MVA cascade constraints ;
drop table GLUE20.StorageManager_MVA cascade constraints ;
drop table GLUE20.StorageResource_MVA cascade constraints ;
drop table GLUE20.UserContact cascade constraints ;
drop table GLUE20.AdminContact cascade constraints ;
drop table GLUE20.AdminDomainLocation cascade constraints ;
drop table GLUE20.UserDomainLocation cascade constraints ;
drop table GLUE20.ComputingServiceLoc cascade constraints ;
drop table GLUE20.StorageServiceLoc cascade constraints ;
drop table GLUE20.ApplicationHandle cascade constraints ;


-- Generated SQL Schema
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia


-- SShareSResource
-- Association between StorageShare and StorageResource
create table GLUE20.SShareSResource (
  storageShareServiceID     varchar (255) not null,
  storageShareLocalID       varchar (128) not null,
  storageResourceID         varchar (255) not null,
  constraint pk_SShareSResource primary key (storageShareServiceID,storageShareLocalID,storageResourceID)
) ;

-- AppEnvExecEnv
-- Association between ApplicationEnvironment and ExecutionEnvironment
create table GLUE20.AppEnvExecEnv (
  aplctnvrnmntServiceID     varchar (255) not null,
  applicationEnvironmentLocalID varchar (255) not null,
  executionEnvironmentID    varchar (255) not null,
  constraint pk_AppEnvExecEnv primary key (aplctnvrnmntServiceID,applicationEnvironmentLocalID,executionEnvironmentID)
) ;

-- CShareExecEnv
-- Association between ComputingShare and ExecutionEnvironment
create table GLUE20.CShareExecEnv (
  computingShareServiceID   varchar (255) not null,
  computingShareLocalID     varchar (128) not null,
  executionEnvironmentID    varchar (255) not null,
  constraint pk_CShareExecEnv primary key (computingShareServiceID,computingShareLocalID,executionEnvironmentID)
) ;

-- AttributeTypes
create table GLUE20.AttributeTypes (
  id                        integer not null,	-- The ID of the type.
  name                      varchar (255) not null,	-- The name of the type.
  constraint pk_AttributeTypes primary key (id)
) ;

-- AdminDomain
create table GLUE20.AdminDomain (
  ID                        varchar (255) not null,
  name                      varchar (255),
  description               varchar (255),
  distributed               integer (1),
  adminDomainID             varchar (255),	-- The ID of another AdminDomain entry to express the participation of this entry into the higher level one.
  constraint pk_AdminDomain primary key (ID)
) ;

-- Endpoint
-- Used for Computing and Storage Endpoints. For now, both (computing
-- and storage) endpoints differ by only one  addional attribute. It is 
-- more feasible to keep the schema simpler and store the differing
-- attribute values in the ValueTable than creating two new tables.
create table GLUE20.Endpoint (
  serviceID                 varchar (255) not null,	-- The ID of the service it belongs to
  ID                        varchar (255) not null,
  name                      varchar (255),	-- The name of the Endpoint
  url                       varchar (255) not null,	-- The Endpoint URL
  technology                varchar (255) not null,	-- EndpointTechnology_t
  interface                 varchar (255) not null,
  implementor               varchar (255),
  implementationName        varchar (255),
  implementationVersion     varchar (255),
  qualityLevel              varchar (32) not null,
  healthState               varchar (32) not null,	-- The state of the Endpoint
  healthStateInfo           varchar (255),	-- EndpointState 
  servingState              varchar (255) not null,	-- ServingState_t
  startTime                 date,	-- DateTime_t, The timestamp for the start time of the endpoint
  issuerCA                  varchar (255) not null,	-- DN_t
  downTimeAnnounce          date,	-- DateTime_t, The timestamp for the announcement of the next scheduled downtime
  downTimeStart             date,	-- DateTime_t, The starting timestamp of the next scheduled downtime
  downTimeEnd               date,	-- DateTime_t, The ending timestamp of the next scheduled downtime
  downTimeInfo              varchar (255),	-- Description of the next scheduled downtime
  check                     (qualitylevel in ( 'development', 'testing', 'pre-production', 'production')),
  check                     (healthstate in ('ok', 'warning', 'critical', 'unknown', 'other')),
  check                     (servingstate in ('production', 'draining', 'queueing', 'closed')),
  constraint pk_Endpoint primary key (ID)
) ;

-- EntryTypes
create table GLUE20.EntryTypes (
  id                        integer not null,
  name                      varchar (255) not null,
  constraint pk_EntryTypes primary key (id)
) ;

-- UserDomain
create table GLUE20.UserDomain (
  ID                        varchar (255) not null,
  name                      varchar (255),
  description               varchar (255),
  level                     integer,
  userDomainID              varchar (255),	-- The ID of another UserDomain entry to express the participation of this entry into the higher level one.
  constraint pk_UserDomain primary key (ID)
) ;

-- AccessPolicy
create table GLUE20.AccessPolicy (
  serviceID                 varchar (255) not null,	-- The ID of the service this access policy applies to (same as endpoint)
  localID                   varchar (128) not null,	-- LocalID_t. Identifier local to the service of the endpoint.
  userdomainID              varchar (255) not null,	-- The ID of the UserDomain
  endpointID                varchar (255) not null,	-- The ID of the Endoint this UserDomain may access
  scheme                    varchar (30) not null,
  constraint pk_AccessPolicy primary key (serviceID,localID)
) ;

-- MappingPolicy
create table GLUE20.MappingPolicy (
  userDomainID              varchar (255) not null,	-- The User Domain ID
  shareID                   varchar (128) not null,	-- The ID of the Share the UserDomain may utilize
  serviceID                 varchar (255) not null,	-- The ID of the service the share belongs to
  scheme                    varchar (30) not null,
  Rule                      varchar (128),
  constraint pk_MappingPolicy primary key (userDomainID,shareID,serviceID,scheme)
) ;

-- ComputingService
-- Table to store information about Computing Service. Multivalued
-- attributes:  - Statuspage - OtherInfo
create table GLUE20.ComputingService (
  ID                        varchar (255) not null,	-- A system wide uniqueID
  name                      varchar (255),
  type                      varchar(128) not null,	-- ServiceType_t
  qualityLevel              varchar (32) not null,	-- QualityLevel_t
  complexity                varchar (64),
  totalJobs                 integer,	-- [job]
  runningJobs               integer,	-- [job]
  waitingJobs               integer,	-- [job]
  stagingJobs               integer,	-- [job]
  suspendedJobs             integer,	-- [job]
  preLRMSWaitingJobs        integer,	-- [job]
  domainID                  varchar (255) not null,	-- The (foreign) key to its AdminDomain
  constraint pk_ComputingService primary key (ID)
) ;

-- ComputingManager
create table GLUE20.ComputingManager (
  serviceID                 varchar (255) not null,	-- The service it belongs to
  ID                        varchar (255) not null,
  name                      varchar (128),
  type                      varchar (64) not null,	-- ComputingManagerType_t
  version                   varchar (16),
  reservation               integer (1),	-- Boolean
  bulkSubmission            integer (1),	-- Boolean
  totalPhysicalCPU          integer,
  totalLogicalCPUs          integer,
  totalSlots                integer,	-- [slot]
  slotsUsedByLocalJobs      integer,	-- [slot]
  slotsUsedByGridJobs       integer,	-- [slot]
  homogeneity               integer,	-- Boolean
  networkInfo               varchar (255),	-- NetworkInfo_t
  localCpuDistribution      varchar (255),
  workingAreaShared         integer (1),	-- Boolean
  workingAreaTotal          integer,	-- [GB]
  workingAreaFree           integer,	-- [GB]
  workingAreaLifeTime       integer,	-- [sec]
  cacheTotal                integer,	-- [GB]
  cacheFree                 integer,	-- [GB]
  tmpDir                    varchar (255),
  scratchDir                varchar (255),
  applicationDir            varchar (255),
  envLocalID                varchar (128) not null,	-- LocalID_t
  applicationEnvID          integer not null,	-- The application environment ID
  constraint pk_ComputingManager primary key (ID)
) ;

-- ComputingShare
create table GLUE20.ComputingShare (
  serviceID                 varchar (255) not null,	-- The ID of the Service it belongs to
  localID                   varchar (128) not null,	-- LocalID_t, A local identifier in the scope of the service
  name                      varchar (255),
  description               varchar(255),
  mappingQueue              varchar(128),
  maxWallTime               integer,	-- [sec]
  maxTotalWallTime          integer,	-- [sec]
  minWallTime               integer,	-- [sec]
  defaultWallTime           integer,	-- [sec]
  maxCPUTime                integer,	-- [sec]
  maxTotalCPUTim            integer,	-- [sec]
  minCPUTime                integer,	-- [sec]
  defaultCPUtime            integer,	-- [sec]
  maxTotalJobs              integer,	-- [job]
  maxRunningJobs            integer,	-- [job]
  maxWaitingJobs            integer,	-- [job]
  maxPreLRMSWaitingJobs     integer,	-- [job]
  maxUserRunningJobs        integer,	-- [job]
  maxSlotsPerJobs           integer,	-- [job]
  maxStageInStreams         integer,	-- [stream]
  maxStageOutStreams        integer,	-- [stream]
  schedulingPolicy          varchar (32),	-- schedulingPolicy_t
  maxMemory                 integer,	-- [MB]
  maxDiskSpace              integer,	-- [GB]
  preemption                integer (1),	-- Boolean
  servingstate              varchar (32) not null,	-- servingState_t
  totalJobs                 integer,	-- [job]
  runningJobs               integer,	-- [job]
  localRunningJobs          integer,	-- [job]
  waitingJobs               integer,	-- [job]
  localWaitingJobs          integer,	-- [job]
  stagingJobs               integer,	-- [job]
  suspendedJobs             integer,	-- [job]
  preLRMSWaitingJobs        integer,	-- [job]
  estimatedAverageWaitingTime integer,	-- [sec]
  estimatedWorstWaitingTime integer,	-- [sec]
  freeSlots                 integer ,	-- [slot]
  freeSlotsWithDuration     integer,	-- [slot]
  usedSlots                 integer,	-- [slot]
  requestedSlots            integer,	-- [slot]
  reservationPolicy         varchar (64),	-- ReservationPolicy_t
  defaultSService           varchar (255),	-- The ID of the default Storage Service to use
  check                     (reservationpolicy in ('none', 'mandatory', 'optional')),
  constraint pk_ComputingShare primary key (serviceID,localID)
) ;

-- ApplicationEnvironment
-- This Table also includes the 'Application Handle ' object Attributes
create table GLUE20.ApplicationEnvironment (
  serviceID                 varchar (255) not null,	-- The ID of the service this ApplicationEnvironment belongs to
  localID                   varchar (255) not null,	-- LocalID_t, A local identifier in the scope of the service
  name                      varchar (255) not null,
  version                   varchar (16),
  repository                varchar (255),
  state                     varchar (100),	-- AppEnvState_t
  removalDate               datetime,	-- DateTime_t
  license                   varchar (128),	-- License_t
  description               varchar (255),
  parallelSupport           varchar (16),
  maxSlots                  integer,	-- [slot]
  maxJobs                   integer,	-- [job]
  maxUserSeats              integer,	-- [user seat]
  freeSlots                 integer,	-- [slot]
  freeJobs                  integer,	-- [job]
  freeUserSeats             integer,	-- [user seat]
  cManagerID                varchar (255) not null,	-- The ID of the computing manager where this application environment belongs to (and may be used by)
  check                     (license in ('opensource', 'commercial', 'other', 'unknown')),
  constraint pk_ApplicationEnvironment primary key (serviceID,localID)
) ;

-- EndpointShare_LNK
-- Lookup table to associate an Endpoint with a Share (Computing and
-- Storage)
create table GLUE20.EndpointShare_LNK (
  endpointID                varchar (255) not null,	-- The primary key from the endpoint table.
  shareID                   varchar (128) not null,	-- The primary key from the Share
  serviceID                 varchar (255) not null,	-- The ID of the service the endpoint and share belong to
  constraint pk_EndpointShare_LNK primary key (endpointID,shareID,serviceID)
) ;

-- Benchmark
-- The Benchmark table  is used by ComputingManager and
-- ExecutionEnvironment. Therefore each data set must be identified by
-- the 'type' id from the entrytypes table.
create table GLUE20.Benchmark (
  parentID                  varchar (255) not null,	-- the uniqueID of the parent ( ExecutionEnvironment or ComputingManager)
  parentType                integer not null,	-- the type of the parent entry (foreign key to EntryType table) for ComputingManager or ExecutionEvironment
  localID                   varchar (128) not null,	-- LocalID_t, local to ComputingService
  type                      varchar (32) not null,	-- Benchmark_t
  value                     float not null,
  check                     (parenttype in (102 108)),	-- ComputingManager, ExecutionEnvironement
) ;

-- ComputingActivity
create table GLUE20.ComputingActivity (
  serviceID                 varchar (255) not null,	-- The ID of the service which manages this activity
  ID                        varchar (255) not null,
  name                      varchar (255),
  type                      varchar (32),	-- ComputingActivityType_t
  idFromEndpoint            varchar (255),
  localIdFromManager        varchar (255),
  jobDescription            varchar (128),	-- JobDescription_t
  state                     varchar (32) not null,	-- ComputingActivityState_t	
  restartState              varchar (32),	-- ComputingActivityState_t	
  exitCode                  integer,
  computingManagerExitCode  varchar (64),
  waititingPosition         integer,
  userDomain                varchar (255),
  owner                     varchar (128) not null,
  localOwner                varchar (128),
  requestedTotalWallTime    integer,	-- [sec]
  requestedTotalCPUTime     integer,	-- [sec]
  requestedSlots            integer,	-- [slot]
  stdIn                     varchar (128),
  stdOut                    varchar (128),
  stdErr                    varchar (128),
  logDir                    varchar (128),
  queue                     varchar (255),
  usedTotalWallTime         integer,	-- [sec]
  usedTotalCPUTime          integer,	-- [sec]
  usedMainMemory            integer,	-- [MB]
  submissionTime            date,	-- DateTime_t
  cmSubmissionTime          datetime,	-- DateTime_t, ComputingManagerSubmissionTime
  startTime                 date,	-- DateTime_t
  cmEndTime                 date,	-- DateTime
  endTime                   date,	-- DateTime_t
  workingAreaEraseTime      date,	-- DateTime_t
  proxyExpirationTime       date,	-- DateTime_t
  submissionHost            varchar (255),
  submissionClientName      varchar (128),
  endpointID                varchar (255),	-- The ID of the ComputingEndpoint this activity has been submitted by
  cManagerID                varchar(255),	-- The ID of the ComputingManager this activity is assigned to
  shareID                   varchar (128),	-- The ID of the share this activity is mapped to
  executionEnvID            varchar (255),	-- The ID of the environment this activity is executed in
  check                     (type in ('single', 'collectionelement', 'parallelelement', 'workflownode')),
  constraint pk_ComputingActivity primary key (ID)
) ;

-- StorageService
create table GLUE20.StorageService (
  ID                        varchar (255) not null,
  name                      varchar (255),
  type                      varchar (128) not null,	-- ServiceType_t
  qualityLevel              varchar (32) not null,	-- QualityLevel_t
  complexity                varchar (64),
  domainID                  varchar (255) not null,	-- The ID of the Domain where this Service belongs to
  locationID                integer,
  constraint pk_StorageService primary key (ID)
) ;

-- StorageShare
create table GLUE20.StorageShare (
  serviceID                 varchar (255) not null,
  localID                   varchar (128) not null,	-- LocalID_t
  name                      varchar (255),
  description               varchar (255),
  servingState              varchar (32) not null,	-- servingState_t
  path                      varchar (255),
  sharingID                 varchar (128) not null,	-- LocalID_t common to the storage shares which use the same storage share capacities
  accessLatency             varchar (64) not null,	-- AccessLatency_t
  defaultLifeTime           integer,	-- [sec]
  maximumLifeTime           integer,	-- [sec]
  tag                       varchar (255),
  check                     (accesslatency in ('online', 'nearline', 'offline')),
  constraint pk_StorageShare primary key (serviceID,localID)
) ;

-- StorageShareCapacity
create table GLUE20.StorageShareCapacity (
  localID                   varchar (128) not null,	-- LocalID_t
  serviceID                 varchar (255) not null,	-- The ID of the service this capacity in in the scope of
  shareID                   varchar (255) not null,	-- The ID of the related parent entry 
  type                      varchar (64) not null,	-- StorageCapacity_t
  totalSize                 integer,	-- [GB]
  usedSize                  integer,	-- [GB]
  freeSize                  integer,	-- [GB]
  reservedSize              integer,	-- [GB]
  constraint pk_StorageShareCapacity primary key (serviceID,shareID)
) ;

-- StorageMappingPolicy
-- Mapps a UserDomain to StorageShare(s)  it may utilize.
create table GLUE20.StorageMappingPolicy (
  userDomainID              varchar (255) not null,	-- The ID which references the user domain where this rule applies to.
  shareID                   varchar (128) not null,	-- The ID of the Share this UserDomain may utilize
  serviceID                 varchar (255) not null,
  localID                   varchar (128) not null,
  rule                      varchar (128),
  scheme                    varchar (128),	-- policyScheme_t
  constraint pk_StorageMappingPolicy primary key (userDomainID,shareID,serviceID,localID)
) ;

-- StorageAccessProtocol
create table GLUE20.StorageAccessProtocol (
  serviceID                 varchar (255) not null,	-- The ID of the StorageService which offers these access protocols.
  localID                   varchar (128) not null,	-- A local identifier within the scope of the StorageService
  type                      varchar (16) not null,	-- StorageAccessProtocol_t
  version                   varchar (20),
  maxStreams                integer,
  constraint pk_StorageAccessProtocol primary key (serviceID,localID)
) ;

-- ExecutionEnvironment
create table GLUE20.ExecutionEnvironment (
  serviceID                 varchar (255) not null,	-- The ID of the service this execution environment belongs to
  ID                        varchar (255) not null,
  platform                  varchar (32) not null,	-- PlatformType_t
  virtualMachine            integer,	-- Boolean
  totalInstances            integer,
  usedInstances             integer,
  unavailableInstances      integer,
  physicalCPUs              integer,
  logicalCPUs               integer,
  cpuMultiplicity           varchar (128),	-- CPUMultiplicity_t
  cpuVendor                 varchar (32),
  cpuModel                  varchar (64),
  cpuVersion                varchar (16),
  cpuClockSpeed             integer,	-- [MHz]
  cpuTimeScalingFactor      float,
  wallTimeScalingFactor     float,
  mainMemorySize            integer not null,	-- [MB]
  virtualMemorySize         integer,	-- [MB]
  osFamiliy                 varchar (32) not null,	-- OSFamiliy_t
  osName                    varchar (64),	-- OSName_t
  osVersion                 varchar (16),
  connectivityIn            integer not null,	-- Boolean
  connectivityOut           integer not null,	-- Boolean
  cManagerID                varchar (255) not null,	-- ComputingManagerID
  check                     (cpumultiplicity in ('singlecpu-singlecore', 'singlecpu-multicore', 'multicpu-singlecore','multicpu-multicore')),
  constraint pk_ExecutionEnvironment primary key (ID)
) ;

-- CService_SService
create table GLUE20.CService_SService (
  localID                   varchar (128) not null,	-- LocalID_t
  localPath                 varchar (255) not null,
  remotePath                varchar (255) not null,
  cServiceID                varchar (255) not null,	-- The ID of the related computing service
  sServiceID                varchar (255) not null	-- The ID of the related storage service
) ;

-- StorageServiceCapacity
create table GLUE20.StorageServiceCapacity (
  localID                   varchar (128) not null,	-- LocalID_t
  serviceID                 varchar (255) not null,	-- The ID of the related parent entry
  type                      varchar (64) not null,	-- StorageCapacity_t
  totalSize                 integer,	-- [GB]
  usedSize                  integer,	-- [GB]
  freeSize                  integer,	-- [GB]
  reservedSize              integer,	-- [GB]
  constraint pk_StorageServiceCapacity primary key (localID,serviceID)
) ;

-- ComputingMappingPolicy
-- Mapps a UserDomain to ComputingShare(s)  it may utilize.
create table GLUE20.ComputingMappingPolicy (
  userDomainID              varchar (255) not null,	-- The ID which references the user domain where this rule applies to.
  serviceID                 varchar (255) not null,	-- The serviceID of the share and of the mapping policy
  shareID                   varchar (128) not null,	-- LocalID_t, The localID of the Share this UserDomain may utilize
  localID                   varchar (100) not null,	-- LocalID_t, the localID of the mapping policy
  scheme                    varchar (100),	-- policyScheme_t
  rule                      varchar (100),
  constraint pk_ComputingMappingPolicy primary key (userDomainID,serviceID,shareID,localID)
) ;

-- ComputingEndpoint
-- This table links the computing service to a computing endpoint. The
-- table contains a column which needs to be an ID of the general
-- endpoint table. 
create table GLUE20.ComputingEndpoint (
  endpointID                varchar (255) not null,	-- The ID of the Endpoint entry
  cServiceID                varchar (255) not null,	-- The ID of the computing service
  staging                   varchar (32),	-- Staging_t
  constraint pk_ComputingEndpoint primary key (endpointID,cServiceID)
) ;

-- StorageEndpoint
-- This table links the computing service to a computing endpoint. The
-- table contains a column which needs to be an ID of the general
-- endpoint table. Through this we enable to extract storage and
-- computing endpoint common attributes but allow to have individual
-- attributes by adding columns to this table.
create table GLUE20.StorageEndpoint (
  endpointID                varchar (255) not null,	-- The ID of the Endpoint entry
  sServiceID                varchar (255) not null,	-- The ID of the computing service
  constraint pk_StorageEndpoint primary key (endpointID,sServiceID)
) ;

-- StorageManager
create table GLUE20.StorageManager (
  ID                        varchar (255) not null,
  type                      varchar (64) not null,	-- StorageManager_t
  version                   varchar (16),
  sServiceID                varchar (255) not null,	-- The ID  of the service this manager participates in
  constraint pk_StorageManager primary key (ID)
) ;

-- StorageResource
create table GLUE20.StorageResource (
  ID                        varchar (255) not null,
  name                      varchar (255),
  type                      varchar (32) not null,	-- StorageResourceType_t
  latency                   varchar (32) not null,	-- AccessLatency_t
  totalSize                 integer,	-- [GB]
  freeSize                  integer,	-- [GB]
  usedSize                  integer,	-- [GB]
  sManagerID                varchar (255) not null,	-- The ID of the storage manager entry
  check                     (accesslatency in ('online', 'nearline', 'offline')),
  constraint pk_StorageResource primary key (ID)
) ;

-- Endpoint_MVA
-- This table keeps multivalued attribute values for Endpoint entries:
-- InterfaceExtension WSDL SupportedProfile Semantics TrustedCA [DN_t]
create table GLUE20.Endpoint_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- InterfaceExtension, WSDL, SupportedProfile, Semantics, TrustedCA [DN_t]
  value                     varchar (255) not null
) ;

-- ComputingService_MVA
-- This table keeps multivalued attribute values for ComputingService
-- entries: - Capability - StatusPage - OtherInfo
create table GLUE20.ComputingService_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,
  value                     varchar (255) not null
) ;

-- StorageService_MVA
-- This table keeps multivalued attribute values for StorageService
-- entries: Capability_t StatusPage OtherInfo
create table GLUE20.StorageService_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo, StatusPage, Capability_t
  value                     varchar (255) not null
) ;

-- ComputingShare_MVA
-- This table keeps multivalued attribute values for ComputingShare
-- entries: Tag
create table GLUE20.ComputingShare_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- Tag
  value                     varchar (255) not null
) ;

-- StorageShare_MVA
-- This table keeps multivalued attribute values for StorageShare
-- entries: RetentionPolicy ExpirationMode OtherInfo
create table GLUE20.StorageShare_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo, ExpirationMode, RetentionPolicy
  value                     varchar (255) not null
) ;

-- ComputingManager_MVA
-- This table keeps multivalued attribute values for ComputingManager
-- entries: - OtherInfo
create table GLUE20.ComputingManager_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- ExecutionEnvironment_MVA
-- This table keeps multivalued attribute values for
-- ExecutionEnvironment entries: NetworkInfo_t
create table GLUE20.ExecutionEnvironment_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- NetworkInfo_t
  value                     varchar (255) not null
) ;

-- ApplicationEnvironment_MVA
-- This table keeps multivalued attribute values for
-- ApplicationEnvironment entries: BestBenchmark_t
create table GLUE20.ApplicationEnvironment_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- BestBenchmark_t
  value                     varchar (255) not null
) ;

-- ComputingActivity_MVA
-- This table keeps multivalued attribute values for ComputingActivity
-- entries: Error RequestedApplicationEnvironment - ExecutionNode -
-- OtherMessages
create table GLUE20.ComputingActivity_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- Error, RequestedApplicationEnvironment, ExecutionNode, OtherMessages
  value                     varchar (255) not null
) ;

-- SShareCapacity_MVA
-- This table keeps multivalued attribute values for
-- StorageShareCapacity entries: OtherInfo
create table GLUE20.SShareCapacity_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- CShareCapacity_MVA
-- This table keeps multivalued attribute values for
-- ComputingShareCapacity entries: OtherInfo
create table GLUE20.CShareCapacity_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- SAccessPolicy_MVA
-- This table keeps multivalued attribute values for StorageAccessPolicy
-- entries: OtherInfo
create table GLUE20.SAccessPolicy_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- StorageManager_MVA
-- This table keeps multivalued attribute values for StorageManager
-- entries: OtherInfo
create table GLUE20.StorageManager_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- StorageResource_MVA
-- This table keeps multivalued attribute values for StorageResource
-- entries: OtherInfo
create table GLUE20.StorageResource_MVA (
  endpointID                varchar (255) not null,
  attributeType             integer,	-- OtherInfo
  value                     varchar (255) not null
) ;

-- UserContact
-- Table to keep UserDomain Contact entries. 
create table GLUE20.UserContact (
  userDomainID              varchar (255) not null,
  localID                   varchar(128) not null,	-- LocalID_t
  url                       varchar(255) not null,
  type                      varchar(50) not null,	-- ContactType_t
  constraint pk_UserContact primary key (userDomainID,localID)
) ;

-- AdminContact
-- Table to keep AdminDomain Contact entries. 
create table GLUE20.AdminContact (
  adminDomainID             varchar (255) not null,
  localID                   varchar(128) not null,	-- LocalID_t
  url                       varchar(255) not null,
  type                      varchar(50) not null,	-- ContactType_t
  constraint pk_AdminContact primary key (adminDomainID,localID)
) ;

-- AdminDomainLocation
-- Table to keep AdminDomain Location entries.
create table GLUE20.AdminDomainLocation (
  adminDomainID             varchar (255) not null,	-- The ID of the parent entry
  localID                   varchar (128) not null,
  name                      varchar(255) not null,
  address                   varchar (128),
  place                     varchar (64),
  country                   varchar (32),
  postcode                  varchar (16),
  longitude                 float,
  latitude                  float,
  constraint pk_AdminDomainLocation primary key (adminDomainID,localID)
) ;

-- UserDomainLocation
-- Table to keep UserDomain Location entries.
create table GLUE20.UserDomainLocation (
  userDomainID              varchar (255) not null,	-- The ID of the parent entry
  localID                   varchar (128) not null,
  name                      varchar(255) not null,
  address                   varchar (128),
  place                     varchar (64),
  country                   varchar (32),
  postcode                  varchar (16),
  longitude                 float,
  latitude                  float,
  constraint pk_UserDomainLocation primary key (userDomainID,localID)
) ;

-- ComputingServiceLoc
-- Table to keep ComputingService Location entries.
create table GLUE20.ComputingServiceLoc (
  computingServiceID        varchar (255) not null,	-- The ID of the parent entry
  localID                   varchar (128) not null,
  name                      varchar(255) not null,
  address                   varchar (128),
  place                     varchar (64),
  country                   varchar (32),
  postcode                  varchar (16),
  longitude                 float,
  latitude                  float,
  constraint pk_ComputingServiceLoc primary key (computingServiceID,localID)
) ;

-- StorageServiceLoc
-- Table to keep StorageService Location entries.
create table GLUE20.StorageServiceLoc (
  storageServiceID          varchar (255) not null,	-- The ID of the parent entry
  localID                   varchar (128) not null,
  name                      varchar(255) not null,
  address                   varchar (128),
  place                     varchar (64),
  country                   varchar (32),
  postcode                  varchar (16),
  longitude                 float,
  latitude                  float,
  constraint pk_StorageServiceLoc primary key (storageServiceID,localID)
) ;

-- ApplicationHandle
-- The table which keeps ApplicationHandle entries.
create table GLUE20.ApplicationHandle (
  serviceID                 varchar (255) not null,	-- The ID of the computing service where the application handle is managed by.
  localID                   varchar (128) not null,	-- LocalID_t, A local identifier opaque to the Computing Service
  type                      varchar (32) not null,	-- ApplicationHandle_t
  value                     varchar (255) not null,
  appEnvLocalID             varchar (128) not null	-- LocalID_t,  the localID from the application environment it gives addional information to.
) ;


















































-- Generated SQL Views
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia


-- V_ExecEnvBenchmark
-- A View which filters the Benchmark entries for the
-- ExecutionEnvironment.
create view GLUE20.V_ExecEnvBenchmark as
  select parentID, parentType, localID, type, value
  from Benchmark
  where parentType = 108
;

-- V_CManagerBenchmark
-- A View which filters the Benchmark entries for the ComputingManager.
create view GLUE20.V_CManagerBenchmark as
  select parentID, parentType, localID, type, value
  from Benchmark
  where parentType = 102
;



-- Generated Permissions
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia



-- Generated SQL Insert statements
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia


-- inserts for EntryTypes
insert into EntryTypes values ( 1, 'ValueTable' ) ;
insert into EntryTypes values ( 2, 'AttributeTypes' ) ;
insert into EntryTypes values ( 3, 'EntryTypes' ) ;
insert into EntryTypes values ( 4, 'AdminDomain' ) ;
insert into EntryTypes values ( 5, 'UserDomain' ) ;
insert into EntryTypes values ( 6, 'Location' ) ;
insert into EntryTypes values ( 7, 'Contact' ) ;
insert into EntryTypes values ( 8, 'Endpoint' ) ;
insert into EntryTypes values ( 9, 'MappingPolicy' ) ;
insert into EntryTypes values ( 10, 'AccessPolicy' ) ;
insert into EntryTypes values ( 11, 'ManagementPolicy' ) ;
insert into EntryTypes values ( 100, 'ComputingService' ) ;
insert into EntryTypes values ( 101, 'ComputingShare' ) ;
insert into EntryTypes values ( 102, 'ComputingManager' ) ;
insert into EntryTypes values ( 103, 'ComputingActivity' ) ;
insert into EntryTypes values ( 104, 'ComputingEndpoint' ) ;
insert into EntryTypes values ( 105, 'Benchmark' ) ;
insert into EntryTypes values ( 106, 'ApplicationEnvironment' ) ;
insert into EntryTypes values ( 107, 'ApplicationHandle' ) ;
insert into EntryTypes values ( 108, 'ExecutionEnvironment' ) ;
insert into EntryTypes values ( 200, 'StorageService' ) ;
insert into EntryTypes values ( 201, 'StorageShare' ) ;
insert into EntryTypes values ( 202, 'StorageResource' ) ;
insert into EntryTypes values ( 203, 'StorageEnviroment' ) ;
insert into EntryTypes values ( 204, 'StorageAccessProtocol' ) ;
insert into EntryTypes values ( 205, 'StorageMappingPolicy' ) ;
insert into EntryTypes values ( 206, 'StorageEndpoint' ) ;

-- inserts for AttributeTypes
insert into AttributeTypes values ( 1, 'OtherInfo' ) ;
insert into AttributeTypes values ( 2, 'WWW' ) ;
insert into AttributeTypes values ( 3, 'Owner' ) ;
insert into AttributeTypes values ( 4, 'ManagerEndpoint' ) ;
insert into AttributeTypes values ( 5, 'ServiceCapability' ) ;
insert into AttributeTypes values ( 6, 'StatusPage' ) ;
insert into AttributeTypes values ( 7, 'Capability' ) ;
insert into AttributeTypes values ( 8, 'WSDL' ) ;
insert into AttributeTypes values ( 9, 'SupportedProfile' ) ;
insert into AttributeTypes values ( 10, 'Semantics' ) ;
insert into AttributeTypes values ( 11, 'Rule' ) ;
insert into AttributeTypes values ( 12, 'TrustedCA' ) ;
insert into AttributeTypes values ( 13, 'NetworkInfo' ) ;
insert into AttributeTypes values ( 14, 'Error' ) ;
insert into AttributeTypes values ( 15, 'RequestedApplicationEnvironment' ) ;
insert into AttributeTypes values ( 16, 'OtherMessages' ) ;
insert into AttributeTypes values ( 17, 'ExpirationMode' ) ;
insert into AttributeTypes values ( 18, 'Tag' ) ;
insert into AttributeTypes values ( 19, 'InterfaceExtension' ) ;
insert into AttributeTypes values ( 20, 'JobDescription' ) ;
insert into AttributeTypes values ( 21, 'RetentionPolicy' ) ;
insert into AttributeTypes values ( 22, 'BestBenchmark' ) ;
insert into AttributeTypes values ( 23, 'ExecutionHost' ) ;


-- Generated SQL Constraints
-- --------------------------------------------------------------------
--     Target Database:   oracle
--     SQL Generator:     tedia2sql -- v1.2.12
--     Generated at:      Mon May 19 15:54:21 2008
--     Input Files:       GLUE20_41_2.dia

create unique index uidx_AttType_name on GLUE20.AttributeTypes  (name) ;
create index idx_name on GLUE20.AdminDomain  (name) ;
create unique index uidx_Endpoint on GLUE20.Endpoint  (serviceID,ID) ;
create unique index uidx_EntryTypes_name on GLUE20.EntryTypes  (name) ;
create index idx_UD_name on GLUE20.UserDomain  (name) ;
create unique index idx_uniqueKey on GLUE20.AccessPolicy  (localID,endpointID,userdomainID) ;
create unique index uidx_SShare on GLUE20.StorageShare  (localID,serviceID) ;
create unique index uidx_SShareCapacity on GLUE20.StorageShareCapacity  (serviceID,shareID,type) ;
create unique index uidx_AccessProt on GLUE20.StorageAccessProtocol  (serviceID,localID) ;
alter table GLUE20.ComputingServiceLoc add constraint fk_CServicelocID
  foreign key (computingServiceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.AccessPolicy add constraint fk_UserEndpoint
  foreign key (userdomainID)
  references UserDomain (ID) on delete cascade ;
alter table GLUE20.AccessPolicy add constraint fk_EndpointAccess
  foreign key (endpointID)
  references Endpoint (ID) on delete cascade ;
alter table GLUE20.MappingPolicy add constraint fk_UserShare
  foreign key (userDomainID)
  references UserDomain (ID)  ;
alter table GLUE20.ApplicationEnvironment add constraint fk_CManagerAppEnv
  foreign key (cManagerID)
  references ComputingManager (ID) on delete cascade ;
alter table GLUE20.EndpointShare_LNK add constraint fk_EndpointShare
  foreign key (endpointID)
  references Endpoint (ID)  ;
alter table GLUE20.ComputingManager add constraint fk_CServiceCManager
  foreign key (serviceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.ComputingActivity add constraint fk_CServiceCActivity
  foreign key (serviceID)
  references ComputingService (ID)  ;
alter table GLUE20.ComputingActivity add constraint fk_CManagerCActivity
  foreign key (cManagerID)
  references ComputingManager (ID)  ;
alter table GLUE20.ComputingActivity add constraint fk_CShareCActivty
  foreign key (serviceID,shareID)
  references ComputingShare (serviceID,localID)  ;
alter table GLUE20.StorageMappingPolicy add constraint fk_UserDomainSShare
  foreign key (userDomainID)
  references UserDomain (ID) on delete cascade ;
alter table GLUE20.StorageMappingPolicy add constraint fk_SShareUserDomain
  foreign key (serviceID,shareID)
  references StorageShare (serviceID,localID) on delete cascade ;
alter table GLUE20.StorageShare add constraint fk_SServiceSShare
  foreign key (serviceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.StorageService add constraint fk_AdminStorageService
  foreign key (domainID)
  references AdminDomain (ID) on delete cascade ;
alter table GLUE20.StorageAccessProtocol add constraint fk_SServiceAccessProt
  foreign key (serviceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.ComputingService add constraint fk_AdminCService
  foreign key (domainID)
  references AdminDomain (ID) on delete cascade ;
alter table GLUE20.ExecutionEnvironment add constraint fk_ExecEnvCManager
  foreign key (cManagerID)
  references ComputingManager (ID) on delete cascade ;
alter table GLUE20.Benchmark add constraint fk_CBenchmarkEntryTypes
  foreign key (parentType)
  references EntryTypes (id)  ;
alter table GLUE20.CService_SService add constraint fk_CS_CSSS
  foreign key (cServiceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.CService_SService add constraint fk_SS_CSSS
  foreign key (sServiceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.StorageShareCapacity add constraint fk_SShareSCapacity
  foreign key (serviceID,shareID)
  references StorageShare (serviceID,localID) on delete cascade ;
alter table GLUE20.StorageServiceCapacity add constraint fk_SServiceSCap
  foreign key (serviceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.ComputingMappingPolicy add constraint fk_UserComputingShare
  foreign key (userDomainID)
  references UserDomain (ID) on delete cascade ;
alter table GLUE20.ComputingEndpoint add constraint fk_EndpointCEndpoint
  foreign key (endpointID)
  references Endpoint (ID) on delete cascade ;
alter table GLUE20.ComputingEndpoint add constraint fk_CServiceCEndpoint
  foreign key (cServiceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.StorageEndpoint add constraint fk_EndpointSEndpoint
  foreign key (endpointID)
  references Endpoint (ID)  ;
alter table GLUE20.StorageEndpoint add constraint fk_SServiceSEndpoint
  foreign key (sServiceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.StorageResource add constraint fk_SManagerSResource
  foreign key (sManagerID)
  references StorageManager (ID) on delete cascade ;
alter table GLUE20.StorageManager add constraint fk_SServiceSManager
  foreign key (sServiceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.ComputingShare add constraint fk_CShareSService
  foreign key (defaultSService)
  references StorageService (ID)  ;
alter table GLUE20.ComputingActivity add constraint fk_ExecEnvCActivity
  foreign key (executionEnvID)
  references ExecutionEnvironment (ID)  ;
alter table GLUE20.SShareSResource add constraint shrSRsrc_fk_StrgShrServiceID
  foreign key (storageShareServiceID,storageShareLocalID)
  references StorageShare (serviceID,localID) on delete cascade ;
alter table GLUE20.SShareSResource add constraint shrSRsrc_fk_StorageResourceID
  foreign key (storageResourceID)
  references StorageResource (ID) on delete cascade ;
alter table GLUE20.AppEnvExecEnv add constraint apnvxcnv_fk_AplctnvrnmntSrvcD
  foreign key (aplctnvrnmntServiceID,applicationEnvironmentLocalID)
  references ApplicationEnvironment (serviceID,localID) on delete cascade ;
alter table GLUE20.AppEnvExecEnv add constraint apnvxcnv_fk_ExctnvrnmntID
  foreign key (executionEnvironmentID)
  references ExecutionEnvironment (ID) on delete cascade ;
alter table GLUE20.CShareExecEnv add constraint cShrxcnv_fk_CmptngShrServiceID
  foreign key (computingShareServiceID,computingShareLocalID)
  references ComputingShare (serviceID,localID) on delete cascade ;
alter table GLUE20.CShareExecEnv add constraint cShrxcnv_fk_ExctnvrnmntID
  foreign key (executionEnvironmentID)
  references ExecutionEnvironment (ID) on delete cascade ;
alter table GLUE20.ComputingService_MVA add constraint fk_CSMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.ComputingManager_MVA add constraint fk_CMMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.ComputingShare_MVA add constraint fk_CShareMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.CShareCapacity_MVA add constraint fk_CCMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.ExecutionEnvironment_MVA add constraint fk_ExecEnv_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.ApplicationEnvironment_MVA add constraint fk_AppEnvMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.ComputingActivity_MVA add constraint fk_CAMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.Endpoint_MVA add constraint fk_Endpoint_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.StorageShare_MVA add constraint fk_SShareMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.SShareCapacity_MVA add constraint fk_SCMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.SAccessPolicy_MVA add constraint fk_SAPMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.StorageResource_MVA add constraint fk_SMMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.StorageManager_MVA add constraint fk_SMVMA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.StorageService_MVA add constraint fk_SSMVA_AttType
  foreign key (attributeType)
  references AttributeTypes (id)  ;
alter table GLUE20.UserContact add constraint fk_UserDomUserContact
  foreign key (userDomainID)
  references UserDomain (ID) on delete cascade ;
alter table GLUE20.AdminContact add constraint fk_AdminDomAdminContact
  foreign key (adminDomainID)
  references AdminDomain (ID) on delete cascade ;
alter table GLUE20.AdminDomainLocation add constraint fk_AdminDomAdminLoc
  foreign key (adminDomainID)
  references AdminDomain (ID) on delete cascade ;
alter table GLUE20.UserDomainLocation add constraint fk_UserDomUserLoc
  foreign key (userDomainID)
  references UserDomain (ID) on delete cascade ;
alter table GLUE20.StorageServiceLoc add constraint fk_SServiceLocSService
  foreign key (storageServiceID)
  references StorageService (ID) on delete cascade ;
alter table GLUE20.ComputingShare add constraint fk_CServiceCShare
  foreign key (serviceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.ApplicationHandle add constraint fk_AppEnvHandleCService
  foreign key (serviceID)
  references ComputingService (ID) on delete cascade ;
alter table GLUE20.ApplicationHandle add constraint fk_AppEnv
  foreign key (serviceID,appEnvLocalID)
  references ApplicationEnvironment (serviceID,localID)  ;

-- oracle requires a special 'quit' command
quit


